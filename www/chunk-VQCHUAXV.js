import{b as St,e as Jr}from"./chunk-K5TY53DO.js";import{A as ht,B as ne,D as Y,H as vt,I as yt,J as Le,P as Ie,R as mt,S as gt,Y as ve,Z as pt,a as lt,ga as bt,hb as Ee,kb as wt,l as Se,nb as Q,v as dt,wb as _t,xb as qr,z as ae}from"./chunk-DHHGUDQP.js";import{a as _e,b as ct,c as de,e as ft,f as G,g as Kr,h as Vr,j as C,k as ie,l as re,m as he,o as E}from"./chunk-FIPIWZQS.js";var It,Et=G(()=>{"use strict";Q();It=new ne("Auth")});var Dt,Rt=G(()=>{"use strict";Q();Dt=new ne("UserRepository")});var At=Kr((xt,Fe)=>{"use strict";(function(m){if(typeof xt=="object"&&typeof Fe<"u")Fe.exports=m();else if(typeof define=="function"&&define.amd)define([],m);else{var a;typeof window<"u"?a=window:typeof global<"u"?a=global:typeof self<"u"?a=self:a=this,a.localforage=m()}})(function(){var m,a,w;return function b(T,d,y){function _(P,B){if(!d[P]){if(!T[P]){var h=typeof de=="function"&&de;if(!B&&h)return h(P,!0);if(p)return p(P,!0);var S=new Error("Cannot find module '"+P+"'");throw S.code="MODULE_NOT_FOUND",S}var U=d[P]={exports:{}};T[P][0].call(U.exports,function(F){var J=T[P][1][F];return _(J||F)},U,U.exports,b,T,d,y)}return d[P].exports}for(var p=typeof de=="function"&&de,O=0;O<y.length;O++)_(y[O]);return _}({1:[function(b,T,d){(function(y){"use strict";var _=y.MutationObserver||y.WebKitMutationObserver,p;if(_){var O=0,P=new _(F),B=y.document.createTextNode("");P.observe(B,{characterData:!0}),p=function(){B.data=O=++O%2}}else if(!y.setImmediate&&typeof y.MessageChannel<"u"){var h=new y.MessageChannel;h.port1.onmessage=F,p=function(){h.port2.postMessage(0)}}else"document"in y&&"onreadystatechange"in y.document.createElement("script")?p=function(){var j=y.document.createElement("script");j.onreadystatechange=function(){F(),j.onreadystatechange=null,j.parentNode.removeChild(j),j=null},y.document.documentElement.appendChild(j)}:p=function(){setTimeout(F,0)};var S,U=[];function F(){S=!0;for(var j,H,k=U.length;k;){for(H=U,U=[],j=-1;++j<k;)H[j]();k=U.length}S=!1}T.exports=J;function J(j){U.push(j)===1&&!S&&p()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(b,T,d){"use strict";var y=b(1);function _(){}var p={},O=["REJECTED"],P=["FULFILLED"],B=["PENDING"];T.exports=h;function h(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=B,this.queue=[],this.outcome=void 0,v!==_&&J(this,v)}h.prototype.catch=function(v){return this.then(null,v)},h.prototype.then=function(v,R){if(typeof v!="function"&&this.state===P||typeof R!="function"&&this.state===O)return this;var D=new this.constructor(_);if(this.state!==B){var N=this.state===P?v:R;U(D,N,this.outcome)}else this.queue.push(new S(D,v,R));return D};function S(v,R,D){this.promise=v,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}S.prototype.callFulfilled=function(v){p.resolve(this.promise,v)},S.prototype.otherCallFulfilled=function(v){U(this.promise,this.onFulfilled,v)},S.prototype.callRejected=function(v){p.reject(this.promise,v)},S.prototype.otherCallRejected=function(v){U(this.promise,this.onRejected,v)};function U(v,R,D){y(function(){var N;try{N=R(D)}catch($){return p.reject(v,$)}N===v?p.reject(v,new TypeError("Cannot resolve promise with itself")):p.resolve(v,N)})}p.resolve=function(v,R){var D=j(F,R);if(D.status==="error")return p.reject(v,D.value);var N=D.value;if(N)J(v,N);else{v.state=P,v.outcome=R;for(var $=-1,W=v.queue.length;++$<W;)v.queue[$].callFulfilled(R)}return v},p.reject=function(v,R){v.state=O,v.outcome=R;for(var D=-1,N=v.queue.length;++D<N;)v.queue[D].callRejected(R);return v};function F(v){var R=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof R=="function")return function(){R.apply(v,arguments)}}function J(v,R){var D=!1;function N(K){D||(D=!0,p.reject(v,K))}function $(K){D||(D=!0,p.resolve(v,K))}function W(){R($,N)}var z=j(W);z.status==="error"&&N(z.value)}function j(v,R){var D={};try{D.value=v(R),D.status="success"}catch(N){D.status="error",D.value=N}return D}h.resolve=H;function H(v){return v instanceof this?v:p.resolve(new this(_),v)}h.reject=k;function k(v){var R=new this(_);return p.reject(R,v)}h.all=Re;function Re(v){var R=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=v.length,N=!1;if(!D)return this.resolve([]);for(var $=new Array(D),W=0,z=-1,K=new this(_);++z<D;)X(v[z],z);return K;function X(ce,pe){R.resolve(ce).then(xe,function(se){N||(N=!0,p.reject(K,se))});function xe(se){$[pe]=se,++W===D&&!N&&(N=!0,p.resolve(K,$))}}}h.race=oe;function oe(v){var R=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=v.length,N=!1;if(!D)return this.resolve([]);for(var $=-1,W=new this(_);++$<D;)z(v[$]);return W;function z(K){R.resolve(K).then(function(X){N||(N=!0,p.resolve(W,X))},function(X){N||(N=!0,p.reject(W,X))})}}},{1:1}],3:[function(b,T,d){(function(y){"use strict";typeof y.Promise!="function"&&(y.Promise=b(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(b,T,d){"use strict";var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function p(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var O=p();function P(){try{if(!O||!O.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function B(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(n){if(n.name!=="TypeError")throw n;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new t,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(r.type)}}typeof Promise>"u"&&b(3);var h=Promise;function S(e,r){r&&e.then(function(t){r(null,t)},function(t){r(t)})}function U(e,r,t){typeof r=="function"&&e.then(r),typeof t=="function"&&e.catch(t)}function F(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function J(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var j="local-forage-detect-blob-support",H=void 0,k={},Re=Object.prototype.toString,oe="readonly",v="readwrite";function R(e){for(var r=e.length,t=new ArrayBuffer(r),o=new Uint8Array(t),i=0;i<r;i++)o[i]=e.charCodeAt(i);return t}function D(e){return new h(function(r){var t=e.transaction(j,v),o=B([""]);t.objectStore(j).put(o,"key"),t.onabort=function(i){i.preventDefault(),i.stopPropagation(),r(!1)},t.oncomplete=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);r(n||!i||parseInt(i[1],10)>=43)}}).catch(function(){return!1})}function N(e){return typeof H=="boolean"?h.resolve(H):D(e).then(function(r){return H=r,H})}function $(e){var r=k[e.name],t={};t.promise=new h(function(o,i){t.resolve=o,t.reject=i}),r.deferredOperations.push(t),r.dbReady?r.dbReady=r.dbReady.then(function(){return t.promise}):r.dbReady=t.promise}function W(e){var r=k[e.name],t=r.deferredOperations.pop();if(t)return t.resolve(),t.promise}function z(e,r){var t=k[e.name],o=t.deferredOperations.pop();if(o)return o.reject(r),o.promise}function K(e,r){return new h(function(t,o){if(k[e.name]=k[e.name]||Ye(),e.db)if(r)$(e),e.db.close();else return t(e.db);var i=[e.name];r&&i.push(e.version);var n=O.open.apply(O,i);r&&(n.onupgradeneeded=function(s){var u=n.result;try{u.createObjectStore(e.storeName),s.oldVersion<=1&&u.createObjectStore(j)}catch(c){if(c.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+s.oldVersion+" to version "+s.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw c}}),n.onerror=function(s){s.preventDefault(),o(n.error)},n.onsuccess=function(){var s=n.result;s.onversionchange=function(u){u.target.close()},t(s),W(e)}})}function X(e){return K(e,!1)}function ce(e){return K(e,!0)}function pe(e,r){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,i=e.version>e.db.version;if(o&&(e.version!==r&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||t){if(t){var n=e.db.version+1;n>e.version&&(e.version=n)}return!0}return!1}function xe(e){return new h(function(r,t){var o=new FileReader;o.onerror=t,o.onloadend=function(i){var n=btoa(i.target.result||"");r({__local_forage_encoded_blob:!0,data:n,type:e.type})},o.readAsBinaryString(e)})}function se(e){var r=R(atob(e.data));return B([r],{type:e.type})}function We(e){return e&&e.__local_forage_encoded_blob}function Vt(e){var r=this,t=r._initReady().then(function(){var o=k[r._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return U(t,e,e),t}function qt(e){$(e);for(var r=k[e.name],t=r.forages,o=0;o<t.length;o++){var i=t[o];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,X(e).then(function(n){return e.db=n,pe(e)?ce(e):n}).then(function(n){e.db=r.db=n;for(var s=0;s<t.length;s++)t[s]._dbInfo.db=n}).catch(function(n){throw z(e,n),n})}function Z(e,r,t,o){o===void 0&&(o=1);try{var i=e.db.transaction(e.storeName,r);t(null,i)}catch(n){if(o>0&&(!e.db||n.name==="InvalidStateError"||n.name==="NotFoundError"))return h.resolve().then(function(){if(!e.db||n.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),ce(e)}).then(function(){return qt(e).then(function(){Z(e,r,t,o-1)})}).catch(t);t(n)}}function Ye(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Jt(e){var r=this,t={db:null};if(e)for(var o in e)t[o]=e[o];var i=k[t.name];i||(i=Ye(),k[t.name]=i),i.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=Vt);var n=[];function s(){return h.resolve()}for(var u=0;u<i.forages.length;u++){var c=i.forages[u];c!==r&&n.push(c._initReady().catch(s))}var f=i.forages.slice(0);return h.all(n).then(function(){return t.db=i.db,X(t)}).then(function(l){return t.db=l,pe(t,r._defaultConfig.version)?ce(t):l}).then(function(l){t.db=i.db=l,r._dbInfo=t;for(var g=0;g<f.length;g++){var I=f[g];I!==r&&(I._dbInfo.db=t.db,I._dbInfo.version=t.version)}})}function Gt(e,r){var t=this;e=F(e);var o=new h(function(i,n){t.ready().then(function(){Z(t._dbInfo,oe,function(s,u){if(s)return n(s);try{var c=u.objectStore(t._dbInfo.storeName),f=c.get(e);f.onsuccess=function(){var l=f.result;l===void 0&&(l=null),We(l)&&(l=se(l)),i(l)},f.onerror=function(){n(f.error)}}catch(l){n(l)}})}).catch(n)});return S(o,r),o}function Qt(e,r){var t=this,o=new h(function(i,n){t.ready().then(function(){Z(t._dbInfo,oe,function(s,u){if(s)return n(s);try{var c=u.objectStore(t._dbInfo.storeName),f=c.openCursor(),l=1;f.onsuccess=function(){var g=f.result;if(g){var I=g.value;We(I)&&(I=se(I));var x=e(I,g.key,l++);x!==void 0?i(x):g.continue()}else i()},f.onerror=function(){n(f.error)}}catch(g){n(g)}})}).catch(n)});return S(o,r),o}function Ht(e,r,t){var o=this;e=F(e);var i=new h(function(n,s){var u;o.ready().then(function(){return u=o._dbInfo,Re.call(r)==="[object Blob]"?N(u.db).then(function(c){return c?r:xe(r)}):r}).then(function(c){Z(o._dbInfo,v,function(f,l){if(f)return s(f);try{var g=l.objectStore(o._dbInfo.storeName);c===null&&(c=void 0);var I=g.put(c,e);l.oncomplete=function(){c===void 0&&(c=null),n(c)},l.onabort=l.onerror=function(){var x=I.error?I.error:I.transaction.error;s(x)}}catch(x){s(x)}})}).catch(s)});return S(i,t),i}function Xt(e,r){var t=this;e=F(e);var o=new h(function(i,n){t.ready().then(function(){Z(t._dbInfo,v,function(s,u){if(s)return n(s);try{var c=u.objectStore(t._dbInfo.storeName),f=c.delete(e);u.oncomplete=function(){i()},u.onerror=function(){n(f.error)},u.onabort=function(){var l=f.error?f.error:f.transaction.error;n(l)}}catch(l){n(l)}})}).catch(n)});return S(o,r),o}function Zt(e){var r=this,t=new h(function(o,i){r.ready().then(function(){Z(r._dbInfo,v,function(n,s){if(n)return i(n);try{var u=s.objectStore(r._dbInfo.storeName),c=u.clear();s.oncomplete=function(){o()},s.onabort=s.onerror=function(){var f=c.error?c.error:c.transaction.error;i(f)}}catch(f){i(f)}})}).catch(i)});return S(t,e),t}function er(e){var r=this,t=new h(function(o,i){r.ready().then(function(){Z(r._dbInfo,oe,function(n,s){if(n)return i(n);try{var u=s.objectStore(r._dbInfo.storeName),c=u.count();c.onsuccess=function(){o(c.result)},c.onerror=function(){i(c.error)}}catch(f){i(f)}})}).catch(i)});return S(t,e),t}function tr(e,r){var t=this,o=new h(function(i,n){if(e<0){i(null);return}t.ready().then(function(){Z(t._dbInfo,oe,function(s,u){if(s)return n(s);try{var c=u.objectStore(t._dbInfo.storeName),f=!1,l=c.openKeyCursor();l.onsuccess=function(){var g=l.result;if(!g){i(null);return}e===0||f?i(g.key):(f=!0,g.advance(e))},l.onerror=function(){n(l.error)}}catch(g){n(g)}})}).catch(n)});return S(o,r),o}function rr(e){var r=this,t=new h(function(o,i){r.ready().then(function(){Z(r._dbInfo,oe,function(n,s){if(n)return i(n);try{var u=s.objectStore(r._dbInfo.storeName),c=u.openKeyCursor(),f=[];c.onsuccess=function(){var l=c.result;if(!l){o(f);return}f.push(l.key),l.continue()},c.onerror=function(){i(c.error)}}catch(l){i(l)}})}).catch(i)});return S(t,e),t}function nr(e,r){r=J.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;if(!e.name)i=h.reject("Invalid arguments");else{var n=e.name===t.name&&o._dbInfo.db,s=n?h.resolve(o._dbInfo.db):X(e).then(function(u){var c=k[e.name],f=c.forages;c.db=u;for(var l=0;l<f.length;l++)f[l]._dbInfo.db=u;return u});e.storeName?i=s.then(function(u){if(u.objectStoreNames.contains(e.storeName)){var c=u.version+1;$(e);var f=k[e.name],l=f.forages;u.close();for(var g=0;g<l.length;g++){var I=l[g];I._dbInfo.db=null,I._dbInfo.version=c}var x=new h(function(A,L){var M=O.open(e.name,c);M.onerror=function(V){var le=M.result;le.close(),L(V)},M.onupgradeneeded=function(){var V=M.result;V.deleteObjectStore(e.storeName)},M.onsuccess=function(){var V=M.result;V.close(),A(V)}});return x.then(function(A){f.db=A;for(var L=0;L<l.length;L++){var M=l[L];M._dbInfo.db=A,W(M._dbInfo)}}).catch(function(A){throw(z(e,A)||h.resolve()).catch(function(){}),A})}}):i=s.then(function(u){$(e);var c=k[e.name],f=c.forages;u.close();for(var l=0;l<f.length;l++){var g=f[l];g._dbInfo.db=null}var I=new h(function(x,A){var L=O.deleteDatabase(e.name);L.onerror=function(){var M=L.result;M&&M.close(),A(L.error)},L.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},L.onsuccess=function(){var M=L.result;M&&M.close(),x(M)}});return I.then(function(x){c.db=x;for(var A=0;A<f.length;A++){var L=f[A];W(L._dbInfo)}}).catch(function(x){throw(z(e,x)||h.resolve()).catch(function(){}),x})})}return S(i,r),i}var or={_driver:"asyncStorage",_initStorage:Jt,_support:P(),iterate:Qt,getItem:Gt,setItem:Ht,removeItem:Xt,clear:Zt,length:er,key:tr,keys:rr,dropInstance:nr};function ir(){return typeof openDatabase=="function"}var ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ar="~~local_forage_type~",ze=/^~~local_forage_type~([^~]+)~/,be="__lfsc__:",Ae=be.length,Ne="arbf",Te="blob",Ke="si08",Ve="ui08",qe="uic8",Je="si16",Ge="si32",Qe="ur16",He="ui32",Xe="fl32",Ze="fl64",et=Ae+Ne.length,tt=Object.prototype.toString;function rt(e){var r=e.length*.75,t=e.length,o,i=0,n,s,u,c;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var f=new ArrayBuffer(r),l=new Uint8Array(f);for(o=0;o<t;o+=4)n=ee.indexOf(e[o]),s=ee.indexOf(e[o+1]),u=ee.indexOf(e[o+2]),c=ee.indexOf(e[o+3]),l[i++]=n<<2|s>>4,l[i++]=(s&15)<<4|u>>2,l[i++]=(u&3)<<6|c&63;return f}function Oe(e){var r=new Uint8Array(e),t="",o;for(o=0;o<r.length;o+=3)t+=ee[r[o]>>2],t+=ee[(r[o]&3)<<4|r[o+1]>>4],t+=ee[(r[o+1]&15)<<2|r[o+2]>>6],t+=ee[r[o+2]&63];return r.length%3===2?t=t.substring(0,t.length-1)+"=":r.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function sr(e,r){var t="";if(e&&(t=tt.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&tt.call(e.buffer)==="[object ArrayBuffer]")){var o,i=be;e instanceof ArrayBuffer?(o=e,i+=Ne):(o=e.buffer,t==="[object Int8Array]"?i+=Ke:t==="[object Uint8Array]"?i+=Ve:t==="[object Uint8ClampedArray]"?i+=qe:t==="[object Int16Array]"?i+=Je:t==="[object Uint16Array]"?i+=Qe:t==="[object Int32Array]"?i+=Ge:t==="[object Uint32Array]"?i+=He:t==="[object Float32Array]"?i+=Xe:t==="[object Float64Array]"?i+=Ze:r(new Error("Failed to get type for BinaryArray"))),r(i+Oe(o))}else if(t==="[object Blob]"){var n=new FileReader;n.onload=function(){var s=ar+e.type+"~"+Oe(this.result);r(be+Te+s)},n.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),r(null,s)}}function ur(e){if(e.substring(0,Ae)!==be)return JSON.parse(e);var r=e.substring(et),t=e.substring(Ae,et),o;if(t===Te&&ze.test(r)){var i=r.match(ze);o=i[1],r=r.substring(i[0].length)}var n=rt(r);switch(t){case Ne:return n;case Te:return B([n],{type:o});case Ke:return new Int8Array(n);case Ve:return new Uint8Array(n);case qe:return new Uint8ClampedArray(n);case Je:return new Int16Array(n);case Qe:return new Uint16Array(n);case Ge:return new Int32Array(n);case He:return new Uint32Array(n);case Xe:return new Float32Array(n);case Ze:return new Float64Array(n);default:throw new Error("Unkown type: "+t)}}var Pe={serialize:sr,deserialize:ur,stringToBuffer:rt,bufferToString:Oe};function nt(e,r,t,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,o)}function cr(e){var r=this,t={db:null};if(e)for(var o in e)t[o]=typeof e[o]!="string"?e[o].toString():e[o];var i=new h(function(n,s){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(u){return s(u)}t.db.transaction(function(u){nt(u,t,function(){r._dbInfo=t,n()},function(c,f){s(f)})},s)});return t.serializer=Pe,i}function te(e,r,t,o,i,n){e.executeSql(t,o,i,function(s,u){u.code===u.SYNTAX_ERR?s.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(c,f){f.rows.length?n(c,u):nt(c,r,function(){c.executeSql(t,o,i,n)},n)},n):n(s,u)},n)}function fr(e,r){var t=this;e=F(e);var o=new h(function(i,n){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(u){te(u,s,"SELECT * FROM "+s.storeName+" WHERE key = ? LIMIT 1",[e],function(c,f){var l=f.rows.length?f.rows.item(0).value:null;l&&(l=s.serializer.deserialize(l)),i(l)},function(c,f){n(f)})})}).catch(n)});return S(o,r),o}function lr(e,r){var t=this,o=new h(function(i,n){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(u){te(u,s,"SELECT * FROM "+s.storeName,[],function(c,f){for(var l=f.rows,g=l.length,I=0;I<g;I++){var x=l.item(I),A=x.value;if(A&&(A=s.serializer.deserialize(A)),A=e(A,x.key,I+1),A!==void 0){i(A);return}}i()},function(c,f){n(f)})})}).catch(n)});return S(o,r),o}function ot(e,r,t,o){var i=this;e=F(e);var n=new h(function(s,u){i.ready().then(function(){r===void 0&&(r=null);var c=r,f=i._dbInfo;f.serializer.serialize(r,function(l,g){g?u(g):f.db.transaction(function(I){te(I,f,"INSERT OR REPLACE INTO "+f.storeName+" (key, value) VALUES (?, ?)",[e,l],function(){s(c)},function(x,A){u(A)})},function(I){if(I.code===I.QUOTA_ERR){if(o>0){s(ot.apply(i,[e,c,t,o-1]));return}u(I)}})})}).catch(u)});return S(n,t),n}function dr(e,r,t){return ot.apply(this,[e,r,t,1])}function hr(e,r){var t=this;e=F(e);var o=new h(function(i,n){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(u){te(u,s,"DELETE FROM "+s.storeName+" WHERE key = ?",[e],function(){i()},function(c,f){n(f)})})}).catch(n)});return S(o,r),o}function vr(e){var r=this,t=new h(function(o,i){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(s){te(s,n,"DELETE FROM "+n.storeName,[],function(){o()},function(u,c){i(c)})})}).catch(i)});return S(t,e),t}function yr(e){var r=this,t=new h(function(o,i){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(s){te(s,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(u,c){var f=c.rows.item(0).c;o(f)},function(u,c){i(c)})})}).catch(i)});return S(t,e),t}function mr(e,r){var t=this,o=new h(function(i,n){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(u){te(u,s,"SELECT key FROM "+s.storeName+" WHERE id = ? LIMIT 1",[e+1],function(c,f){var l=f.rows.length?f.rows.item(0).key:null;i(l)},function(c,f){n(f)})})}).catch(n)});return S(o,r),o}function gr(e){var r=this,t=new h(function(o,i){r.ready().then(function(){var n=r._dbInfo;n.db.transaction(function(s){te(s,n,"SELECT key FROM "+n.storeName,[],function(u,c){for(var f=[],l=0;l<c.rows.length;l++)f.push(c.rows.item(l).key);o(f)},function(u,c){i(c)})})}).catch(i)});return S(t,e),t}function pr(e){return new h(function(r,t){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(i,n){for(var s=[],u=0;u<n.rows.length;u++)s.push(n.rows.item(u).name);r({db:e,storeNames:s})},function(i,n){t(n)})},function(o){t(o)})})}function br(e,r){r=J.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;return e.name?i=new h(function(n){var s;e.name===t.name?s=o._dbInfo.db:s=openDatabase(e.name,"","",0),e.storeName?n({db:s,storeNames:[e.storeName]}):n(pr(s))}).then(function(n){return new h(function(s,u){n.db.transaction(function(c){function f(x){return new h(function(A,L){c.executeSql("DROP TABLE IF EXISTS "+x,[],function(){A()},function(M,V){L(V)})})}for(var l=[],g=0,I=n.storeNames.length;g<I;g++)l.push(f(n.storeNames[g]));h.all(l).then(function(){s()}).catch(function(x){u(x)})},function(c){u(c)})})}):i=h.reject("Invalid arguments"),S(i,r),i}var wr={_driver:"webSQLStorage",_initStorage:cr,_support:ir(),iterate:lr,getItem:fr,setItem:dr,removeItem:hr,clear:vr,length:yr,key:mr,keys:gr,dropInstance:br};function _r(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function it(e,r){var t=e.name+"/";return e.storeName!==r.storeName&&(t+=e.storeName+"/"),t}function Sr(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Ir(){return!Sr()||localStorage.length>0}function Er(e){var r=this,t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=it(e,r._defaultConfig),Ir()?(r._dbInfo=t,t.serializer=Pe,h.resolve()):h.reject()}function Dr(e){var r=this,t=r.ready().then(function(){for(var o=r._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var n=localStorage.key(i);n.indexOf(o)===0&&localStorage.removeItem(n)}});return S(t,e),t}function Rr(e,r){var t=this;e=F(e);var o=t.ready().then(function(){var i=t._dbInfo,n=localStorage.getItem(i.keyPrefix+e);return n&&(n=i.serializer.deserialize(n)),n});return S(o,r),o}function xr(e,r){var t=this,o=t.ready().then(function(){for(var i=t._dbInfo,n=i.keyPrefix,s=n.length,u=localStorage.length,c=1,f=0;f<u;f++){var l=localStorage.key(f);if(l.indexOf(n)===0){var g=localStorage.getItem(l);if(g&&(g=i.serializer.deserialize(g)),g=e(g,l.substring(s),c++),g!==void 0)return g}}});return S(o,r),o}function Ar(e,r){var t=this,o=t.ready().then(function(){var i=t._dbInfo,n;try{n=localStorage.key(e)}catch{n=null}return n&&(n=n.substring(i.keyPrefix.length)),n});return S(o,r),o}function Nr(e){var r=this,t=r.ready().then(function(){for(var o=r._dbInfo,i=localStorage.length,n=[],s=0;s<i;s++){var u=localStorage.key(s);u.indexOf(o.keyPrefix)===0&&n.push(u.substring(o.keyPrefix.length))}return n});return S(t,e),t}function Tr(e){var r=this,t=r.keys().then(function(o){return o.length});return S(t,e),t}function Or(e,r){var t=this;e=F(e);var o=t.ready().then(function(){var i=t._dbInfo;localStorage.removeItem(i.keyPrefix+e)});return S(o,r),o}function Pr(e,r,t){var o=this;e=F(e);var i=o.ready().then(function(){r===void 0&&(r=null);var n=r;return new h(function(s,u){var c=o._dbInfo;c.serializer.serialize(r,function(f,l){if(l)u(l);else try{localStorage.setItem(c.keyPrefix+e,f),s(n)}catch(g){(g.name==="QuotaExceededError"||g.name==="NS_ERROR_DOM_QUOTA_REACHED")&&u(g),u(g)}})})});return S(i,t),i}function Cr(e,r){if(r=J.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var o=this,i;return e.name?i=new h(function(n){e.storeName?n(it(e,o._defaultConfig)):n(e.name+"/")}).then(function(n){for(var s=localStorage.length-1;s>=0;s--){var u=localStorage.key(s);u.indexOf(n)===0&&localStorage.removeItem(u)}}):i=h.reject("Invalid arguments"),S(i,r),i}var Mr={_driver:"localStorageWrapper",_initStorage:Er,_support:_r(),iterate:xr,getItem:Rr,setItem:Pr,removeItem:Or,clear:Dr,length:Tr,key:Ar,keys:Nr,dropInstance:Cr},Br=function(r,t){return r===t||typeof r=="number"&&typeof t=="number"&&isNaN(r)&&isNaN(t)},Ur=function(r,t){for(var o=r.length,i=0;i<o;){if(Br(r[i],t))return!0;i++}return!1},at=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},fe={},st={},ue={INDEXEDDB:or,WEBSQL:wr,LOCALSTORAGE:Mr},Lr=[ue.INDEXEDDB._driver,ue.WEBSQL._driver,ue.LOCALSTORAGE._driver],we=["dropInstance"],Ce=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(we),Fr={description:"",driver:Lr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function jr(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function Me(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(at(r[t])?arguments[0][t]=r[t].slice():arguments[0][t]=r[t])}return arguments[0]}var kr=function(){function e(r){_(this,e);for(var t in ue)if(ue.hasOwnProperty(t)){var o=ue[t],i=o._driver;this[t]=i,fe[i]||this.defineDriver(o)}this._defaultConfig=Me({},Fr),this._config=Me({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":y(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in t){if(o==="storeName"&&(t[o]=t[o].replace(/\W/g,"_")),o==="version"&&typeof t[o]!="number")return new Error("Database version must be a number.");this._config[o]=t[o]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,o,i){var n=new h(function(s,u){try{var c=t._driver,f=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){u(f);return}for(var l=Ce.concat("_initStorage"),g=0,I=l.length;g<I;g++){var x=l[g],A=!Ur(we,x);if((A||t[x])&&typeof t[x]!="function"){u(f);return}}var L=function(){for(var le=function(Yr){return function(){var zr=new Error("Method "+Yr+" is not implemented by the current driver"),ut=h.reject(zr);return S(ut,arguments[arguments.length-1]),ut}},Be=0,Wr=we.length;Be<Wr;Be++){var Ue=we[Be];t[Ue]||(t[Ue]=le(Ue))}};L();var M=function(le){fe[c]&&console.info("Redefining LocalForage driver: "+c),fe[c]=t,st[c]=le,s()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(M,u):M(!!t._support):M(!0)}catch(V){u(V)}});return U(n,o,i),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,o,i){var n=fe[t]?h.resolve(fe[t]):h.reject(new Error("Driver not found."));return U(n,o,i),n},e.prototype.getSerializer=function(t){var o=h.resolve(Pe);return U(o,t),o},e.prototype.ready=function(t){var o=this,i=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return U(i,t,t),i},e.prototype.setDriver=function(t,o,i){var n=this;at(t)||(t=[t]);var s=this._getSupportedDrivers(t);function u(){n._config.driver=n.driver()}function c(g){return n._extend(g),u(),n._ready=n._initStorage(n._config),n._ready}function f(g){return function(){var I=0;function x(){for(;I<g.length;){var A=g[I];return I++,n._dbInfo=null,n._ready=null,n.getDriver(A).then(c).catch(x)}u();var L=new Error("No available storage method found.");return n._driverSet=h.reject(L),n._driverSet}return x()}}var l=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=l.then(function(){var g=s[0];return n._dbInfo=null,n._ready=null,n.getDriver(g).then(function(I){n._driver=I._driver,u(),n._wrapLibraryMethodsWithReady(),n._initDriver=f(s)})}).catch(function(){u();var g=new Error("No available storage method found.");return n._driverSet=h.reject(g),n._driverSet}),U(this._driverSet,o,i),this._driverSet},e.prototype.supports=function(t){return!!st[t]},e.prototype._extend=function(t){Me(this,t)},e.prototype._getSupportedDrivers=function(t){for(var o=[],i=0,n=t.length;i<n;i++){var s=t[i];this.supports(s)&&o.push(s)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,o=Ce.length;t<o;t++)jr(this,Ce[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),$r=new kr;T.exports=$r},{3:3}]},{},[4])(4)})});var ye,De,Nt,q,je=G(()=>{"use strict";ye=Vr(At()),De={SecureStorage:"ionicSecureStorage",IndexedDB:ye.default.INDEXEDDB,LocalStorage:ye.default.LOCALSTORAGE},Nt={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[De.SecureStorage,De.IndexedDB,De.LocalStorage]},q=class{constructor(a=Nt){this._db=null,this._secureStorageDriver=null;let w=Object.assign({},Nt,a||{});this._config=w}create(){return E(this,null,function*(){let a=ye.default.createInstance(this._config);return this._db=a,yield a.setDriver(this._config.driverOrder||[]),this})}defineDriver(a){return E(this,null,function*(){return a._driver===De.SecureStorage&&(this._secureStorageDriver=a),ye.default.defineDriver(a)})}get driver(){var a;return((a=this._db)===null||a===void 0?void 0:a.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(a){return this.assertDb().getItem(a)}set(a,w){return this.assertDb().setItem(a,w)}remove(a){return this.assertDb().removeItem(a)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(a){return this.assertDb().iterate(a)}setEncryptionKey(a){var w;if(this._secureStorageDriver)(w=this._secureStorageDriver)===null||w===void 0||w.setEncryptionKey(a);else throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available")}}});function Gr(m,a){return _t(m)?new ke:new q(a)}var Tt,ke,dn,Pt=G(()=>{"use strict";qr();Q();Q();je();je();Tt=new ne("STORAGE_CONFIG_TOKEN"),ke=class extends q{constructor(){super()}create(){return E(this,null,function*(){return this})}defineDriver(){return E(this,null,function*(){})}get driver(){return"noop"}get(a){return E(this,null,function*(){return null})}set(a,w){return E(this,null,function*(){})}remove(a){return E(this,null,function*(){})}clear(){return E(this,null,function*(){})}length(){return E(this,null,function*(){return 0})}keys(){return E(this,null,function*(){return[]})}forEach(a){return E(this,null,function*(){})}setEncryptionKey(a){}};dn=(()=>{class m{static forRoot(w=null){return{ngModule:m,providers:[{provide:Tt,useValue:w},{provide:q,useFactory:Gr,deps:[pt,Tt]}]}}}return m.\u0275fac=function(w){return new(w||m)},m.\u0275mod=bt({type:m}),m.\u0275inj=ht({}),m})()});var Ct,Mt=G(()=>{"use strict";Q();Ct=new ne("CloudStorage")});function Qr(m){m===void 0&&(Le(Qr),m=Y(mt));let a=m.get(gt);return w=>new lt(b=>{let T=a.add(),d=!1;function y(){d||(T(),d=!0)}let _=w.subscribe({next:p=>{b.next(p),y()},complete:()=>{b.complete(),y()},error:p=>{b.error(p),y()}});return _.add(()=>{b.unsubscribe(),y()}),_})}function $e(m){return m!=null&&m.injector||Le($e),wt(ct(_e({},m),{loader:void 0,stream:a=>{let w,b=()=>w.unsubscribe();a.abortSignal.addEventListener("abort",b);let T=ve({value:void 0}),d,y=new Promise(p=>d=p);function _(p){T.set(p),d==null||d(T),d=void 0}return w=m.loader(a).subscribe({next:p=>_({value:p}),error:p=>_({error:p}),complete:()=>{d&&_({error:new Error("Resource completed before producing a value")}),a.abortSignal.removeEventListener("abort",b)}}),y}}))}var Bt=G(()=>{"use strict";Q();dt();});function Lt(m){return typeof m=="object"&&m!==null&&typeof m._id=="string"&&typeof m.email=="string"&&typeof m.username=="string"&&typeof m.profilePictureURL=="string"&&Array.isArray(m.roles)}var Hr,Ut,Ft=G(()=>{"use strict";Hr=function(m){return m.None="",m.Amateur="Aficionado",m.Professional="Profesional",m.Collector="Coleccionista",m.Student="Estudiante",m}(Hr||{}),Ut=class m{constructor(a={}){this._id="",this.email="",this.username="",this.profilePictureURL="",this.name={first:"",middle:"",last:""},this.address={line1:"",city:"",country:"",countryCode:"",zipcode:""},this.roles=[],this.bio="",this.activePosts=[],this.fcmToken="",this.stripeAccountId="",Object.assign(this,_e({},a))}static Build(a={}){return new m(a)}get fullName(){return this.name?this.name.middle?`${this.name.first} ${this.name.middle} ${this.name.last}`:`${this.name.first} ${this.name.last}`:""}toJSON(){let a=Object.assign(this);delete a._id,delete a.fullName;try{return JSON.stringify(a)}catch(w){console.error(`Error stringifying object ${a}: ${w}`)}return""}fromJSON(a){try{return JSON.parse(a)}catch(w){console.error(`Error parsing json ${a}: ${w}`)}return null}}});var jt,kt=G(()=>{"use strict";Q();Jr();Pt();Q();jt=(()=>{var a,w,b,me;let d=class d{constructor(){ie(this,b);ie(this,a);ie(this,w,!1);St.isNativePlatform()?(re(this,a,Y(q)),he(this,b,me).call(this)):(re(this,a,localStorage),re(this,w,!0))}get(_){return E(this,null,function*(){let p=null;if(C(this,a)instanceof q&&(C(this,w)||(yield he(this,b,me).call(this)),p=yield C(this,a).get(_)),C(this,a)instanceof Storage&&(p=C(this,a).getItem(_)),p!=null)try{return JSON.parse(p)}catch(O){console.error(`Parsing error: ${O}`)}return null})}set(_,p){return E(this,null,function*(){C(this,a)instanceof q&&(C(this,w)||(yield he(this,b,me).call(this)),C(this,a).set(_,JSON.stringify(p))),C(this,a)instanceof Storage&&(typeof p=="string"?C(this,a).setItem(_,p):C(this,a).setItem(_,JSON.stringify(p)))})}remove(_){return E(this,null,function*(){C(this,a)instanceof q&&(C(this,w)||(yield he(this,b,me).call(this)),C(this,a).remove(_)),C(this,a)instanceof Storage&&C(this,a).removeItem(_)})}clear(){return E(this,null,function*(){C(this,a).clear()})}};a=new WeakMap,w=new WeakMap,b=new WeakSet,me=function(){return E(this,null,function*(){yield C(this,a).create(),re(this,w,!0)})},d.\u0275fac=function(p){return new(p||d)},d.\u0275prov=ae({token:d,factory:d.\u0275fac,providedIn:"root"});let m=d;return m})()});var $t,Wt=G(()=>{"use strict";$t=m=>{let[a,w]=m.split(","),b=a.match(/:(.*?);/),T=b?b[1]:"image/jpeg",d=atob(w),y=Uint8Array.from(d,_=>_.charCodeAt(0));return new Blob([y],{type:T})}});var Gn,ge,Yt,zt,Kt,Xr=G(()=>{"use strict";Q();dt();Bt();Et();Rt();Ft();kt();Mt();Wt();Q();Gn=(()=>{var a,w;let b=class b{constructor(){ie(this,a);ie(this,w);this.injector=Y(vt),this.userRepository=Y(Dt),this.cloudStorage=Y(Ct),this.cache=Y(jt),this.errorMessage=ve(null),this.userId=ve(void 0),this._currentUser=$e({request:()=>this.userId(),loader:({request:d})=>{var y;if(!d)return Se(null);try{let _=this.userRepository.getUserById$(d);return _!=null?_:Se(null)}catch(_){return this.errorMessage.set((y=_==null?void 0:_.message)!=null?y:"Unknown error"),Se(null)}}}),this.authState=Ee(()=>{var d,y,_;return{isAuthenticated:!!this._currentUser.value(),userId:(y=(d=this._currentUser.value())==null?void 0:d._id)!=null?y:"",currentUser:(_=this._currentUser.value())!=null?_:null,errorMessage:this.errorMessage()}}),this.currentUser=Ee(()=>{var d;return(d=this._currentUser.value())!=null?d:null}),this.init=()=>E(this,null,function*(){try{yield this.loadUserFromCache()}catch(d){console.error(d)}}),re(this,a,_=>E(this,[_],function*({profilePictureDataUrl:d,uid:y}){try{return yield this.cloudStorage.upload(`profilePictures/${y}`,$t(d))}catch(p){throw p}})),re(this,w,()=>E(this,null,function*(){try{return yield this.cloudStorage.getDownloadURL("profilePictures/default.webp")}catch(d){throw d}}))}setUserId(d){this.userId.set(d)}setAuthMethod(d){yt(this.injector,()=>{d==="email"&&!(this.authMethod instanceof Yt)&&(this.authMethod=Y(Yt)),d==="google"&&!(this.authMethod instanceof zt)&&(this.authMethod=Y(zt)),d==="apple"&&!(this.authMethod instanceof Kt)&&(this.authMethod=Y(Kt))})}isUidObject(d){return d&&typeof d=="object"&&d.uid&&typeof d.uid=="string"}register(_){return E(this,arguments,function*({method:d,userData:y}){var p,O;this.setAuthMethod(d);try{let B=yield this.authMethod.register({email:y.email,password:y.password,username:y.username});this.isUidObject(B)&&(y._id=B.uid),y.profilePictureDataURL&&y._id?(y.profilePictureURL=(p=yield C(this,a).call(this,{profilePictureDataUrl:y.profilePictureDataURL,uid:y._id}))!=null?p:"",delete y.profilePictureDataURL):y.profilePictureURL=(O=yield C(this,w).call(this))!=null?O:"";let P=y,{password:h}=P,S=ft(P,["password"]);return yield this.userRepository.saveUser(S)}catch(B){throw this.errorMessage.set(B),B}})}login(_){return E(this,arguments,function*({method:d,credentials:y}){var p,O,P,B;this.setAuthMethod(d);try{let h=yield this.authMethod.login(y==null?void 0:y.email,y==null?void 0:y.password);if(Lt(h)){this.setUserId(h._id);return}if(!this.isUidObject(h))return;this.setUserId(h.uid),yield this.waitForUserData(),yield this.cache.set("authState",{isAuthenticated:!0,userId:(O=(p=this._currentUser.value())==null?void 0:p._id)!=null?O:"",username:(B=(P=this._currentUser.value())==null?void 0:P.username)!=null?B:""})}catch(h){throw this.errorMessage.set(h),h}})}logout(){return E(this,null,function*(){this.setAuthMethod("email");try{yield this.authMethod.logout(),this.setUserId(void 0),this._currentUser.set(null),yield this.cache.set("authState",{isAuthenticated:!1,userId:"",username:""})}catch(d){throw this.errorMessage.set(d),d}})}updatePassword(d){return E(this,null,function*(){this.setAuthMethod("email");try{yield this.authMethod.updatePassword(d)}catch(y){throw this.errorMessage.set(y),y}})}resetPassword(d){return E(this,null,function*(){this.setAuthMethod("email");try{yield this.authMethod.resetPassword(d)}catch(y){throw this.errorMessage.set(y),y}})}loadUserFromCache(){return E(this,null,function*(){let d=yield this.cache.get("authState");d!=null&&d.isAuthenticated&&(this.setUserId(d.userId),yield this.waitForUserData())})}waitForUserData(){return new Promise(d=>{let y=setInterval(()=>{this._currentUser.hasValue()&&this._currentUser.value()!==null&&(clearInterval(y),d())},20)})}};a=new WeakMap,w=new WeakMap,b.\u0275fac=function(y){return new(y||b)},b.\u0275prov=ae({token:b,factory:b.\u0275fac,providedIn:"root"});let m=b;return m})(),ge=class{constructor(){this.auth=Y(It)}logout(){return E(this,null,function*(){try{return yield this.auth.logout()}catch(a){throw a}})}updatePassword(a){return E(this,null,function*(){try{return yield this.auth.updatePassword(a)}catch(w){throw w}})}resetPassword(a){return E(this,null,function*(){try{return yield this.auth.resetPassword(a)}catch(w){throw w}})}},Yt=(()=>{let a=class a extends ge{register(b){return E(this,null,function*(){try{return yield this.auth.registerWithEmail(b)}catch(T){throw T}})}login(b,T){return E(this,null,function*(){try{return yield this.auth.loginWithEmail(b,T)}catch(d){throw d}})}};a.\u0275fac=(()=>{let b;return function(d){return(b||(b=Ie(a)))(d||a)}})(),a.\u0275prov=ae({token:a,factory:a.\u0275fac,providedIn:"root"});let m=a;return m})(),zt=(()=>{let a=class a extends ge{register(){return E(this,null,function*(){try{return yield this.auth.registerWithProvider("google")}catch(b){throw b}})}login(){return E(this,null,function*(){try{return yield this.auth.loginWithProvider("google")}catch(b){throw b}})}};a.\u0275fac=(()=>{let b;return function(d){return(b||(b=Ie(a)))(d||a)}})(),a.\u0275prov=ae({token:a,factory:a.\u0275fac,providedIn:"root"});let m=a;return m})(),Kt=(()=>{let a=class a extends ge{register(){return E(this,null,function*(){try{return yield this.auth.loginWithProvider("apple")}catch(b){throw b}})}login(){return E(this,null,function*(){try{return yield this.auth.loginWithProvider("apple")}catch(b){throw b}})}};a.\u0275fac=(()=>{let b;return function(d){return(b||(b=Ie(a)))(d||a)}})(),a.\u0275prov=ae({token:a,factory:a.\u0275fac,providedIn:"root"});let m=a;return m})()});export{Qr as a,$e as b,Bt as c,It as d,Et as e,Dt as f,Rt as g,Hr as h,Ut as i,Lt as j,Ft as k,dn as l,Pt as m,jt as n,kt as o,Ct as p,Mt as q,$t as r,Wt as s,Gn as t,Xr as u};
