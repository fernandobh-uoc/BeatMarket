import{a as y,d as w,l as k}from"./chunk-25CU3KXX.js";import{i as l,u as V}from"./chunk-67JKSNDF.js";import{a as c,b as v,e as I}from"./chunk-UHVVQU73.js";import{f as p,o}from"./chunk-FIPIWZQS.js";var _,T,W,B,j,s,d,D,b,M,S,F,J,R,q,L,x,O,Y,h,U,z,A,P,u,K,E,C,N,Q,H=p(()=>{"use strict";I();k();V();_="ionViewWillEnter",T="ionViewDidEnter",W="ionViewWillLeave",B="ionViewDidLeave",j="ionViewWillUnload",s=n=>{n.tabIndex=-1,n.focus()},d=n=>n.offsetParent!==null,D=()=>({saveViewFocus:i=>{if(c.get("focusManagerPriority",!1)){let a=document.activeElement;a!==null&&(i!=null&&i.contains(a))&&a.setAttribute(b,"true")}},setViewFocus:i=>{let t=c.get("focusManagerPriority",!1);if(Array.isArray(t)&&!i.contains(document.activeElement)){let a=i.querySelector(`[${b}]`);if(a&&d(a)){s(a);return}for(let r of t)switch(r){case"content":let f=i.querySelector('main, [role="main"]');if(f&&d(f)){s(f);return}break;case"heading":let m=i.querySelector('h1, [role="heading"][aria-level="1"]');if(m&&d(m)){s(m);return}break;case"banner":let g=i.querySelector('header, [role="banner"]');if(g&&d(g)){s(g);return}break;default:v(`Unrecognized focus manager priority value ${r}`);break}s(i)}}}),b="ion-last-focus",M=()=>import("./chunk-DHRPXTWO.js"),S=()=>import("./chunk-SYTMM3IT.js"),F=D(),J=n=>new Promise((e,i)=>{w(()=>{R(n),q(n).then(t=>{t.animation&&t.animation.destroy(),L(n),e(t)},t=>{L(n),i(t)})})}),R=n=>{let e=n.enteringEl,i=n.leavingEl;F.saveViewFocus(i),N(e,i,n.direction),n.showGoBack?e.classList.add("can-go-back"):e.classList.remove("can-go-back"),C(e,!1),e.style.setProperty("pointer-events","none"),i&&(C(i,!1),i.style.setProperty("pointer-events","none"))},q=n=>o(void 0,null,function*(){let e=yield x(n);return e&&y.isBrowser?O(e,n):Y(n)}),L=n=>{let e=n.enteringEl,i=n.leavingEl;e.classList.remove("ion-page-invisible"),e.style.removeProperty("pointer-events"),i!==void 0&&(i.classList.remove("ion-page-invisible"),i.style.removeProperty("pointer-events")),F.setViewFocus(e)},x=n=>o(void 0,null,function*(){return!n.leavingEl||!n.animated||n.duration===0?void 0:n.animationBuilder?n.animationBuilder:n.mode==="ios"?(yield M()).iosTransitionAnimation:(yield S()).mdTransitionAnimation}),O=(n,e)=>o(void 0,null,function*(){yield h(e,!0);let i=n(e.baseEl,e);A(e.enteringEl,e.leavingEl);let t=yield z(i,e);return e.progressCallback&&e.progressCallback(void 0),t&&P(e.enteringEl,e.leavingEl),{hasCompleted:t,animation:i}}),Y=n=>o(void 0,null,function*(){let e=n.enteringEl,i=n.leavingEl,t=c.get("focusManagerPriority",!1);return yield h(n,t),A(e,i),P(e,i),{hasCompleted:!0}}),h=(n,e)=>o(void 0,null,function*(){(n.deepWait!==void 0?n.deepWait:e)&&(yield Promise.all([E(n.enteringEl),E(n.leavingEl)])),yield U(n.viewIsReady,n.enteringEl)}),U=(n,e)=>o(void 0,null,function*(){n&&(yield n(e))}),z=(n,e)=>{let i=e.progressCallback,t=new Promise(a=>{n.onFinish(r=>a(r===1))});return i?(n.progressStart(!0),i(n)):n.play(),t},A=(n,e)=>{u(e,W),u(n,_)},P=(n,e)=>{u(n,T),u(e,B)},u=(n,e)=>{if(n){let i=new CustomEvent(e,{bubbles:!1,cancelable:!1});n.dispatchEvent(i)}},K=()=>new Promise(n=>l(()=>l(()=>n()))),E=n=>o(void 0,null,function*(){let e=n;if(e){if(e.componentOnReady!=null){if((yield e.componentOnReady())!=null)return}else if(e.__registerHost!=null){yield new Promise(t=>l(t));return}yield Promise.all(Array.from(e.children).map(E))}}),C=(n,e)=>{e?(n.setAttribute("aria-hidden","true"),n.classList.add("ion-page-hidden")):(n.hidden=!1,n.removeAttribute("aria-hidden"),n.classList.remove("ion-page-hidden"))},N=(n,e,i)=>{n!==void 0&&(n.style.zIndex=i==="back"?"99":"101"),e!==void 0&&(e.style.zIndex="100")},Q=n=>{if(n.classList.contains("ion-page"))return n;let e=n.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return e||n}});export{W as a,B as b,j as c,J as d,u as e,K as f,E as g,C as h,Q as i,H as j};
