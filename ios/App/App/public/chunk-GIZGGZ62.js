import{$ as bt,B as ue,C as yt,D as se,E as gt,F as X,J as mt,K as pt,_ as Ie,ia as wt,n as $e,pb as oe,x as Qr,yb as _t,zb as Xr}from"./chunk-LBGYGD76.js";import{a as ht,c as ye,e as vt,f as re,g as Gr,h as Jr,j as L,k as Z,l as ee,m as V,o as w}from"./chunk-FIPIWZQS.js";var Et,St=re(()=>{"use strict";oe();Et=new se("UserRepository")});var Re,It=re(()=>{"use strict";oe();Re=new se("Auth")});var me,ge,qr,Zr,en,pe,At,Pe,Rt,Pt,Fe,vn,tn,rn,nn,on,je,yn,xt=re(()=>{"use strict";me=function(u){return u.Unimplemented="UNIMPLEMENTED",u.Unavailable="UNAVAILABLE",u}(me||{}),ge=class extends Error{constructor(n,c,l){super(n),this.message=n,this.code=c,this.data=l}},qr=u=>{var n,c;return u!=null&&u.androidBridge?"android":!((c=(n=u==null?void 0:u.webkit)===null||n===void 0?void 0:n.messageHandlers)===null||c===void 0)&&c.bridge?"ios":"web"},Zr=u=>{let n=u.CapacitorCustomPlatform||null,c=u.Capacitor||{},l=c.Plugins=c.Plugins||{},v=()=>n!==null?n.name:qr(u),_=()=>v()!=="web",P=x=>{let y=$.get(x);return!!(y!=null&&y.platforms.has(v())||R(x))},R=x=>{var y;return(y=c.PluginHeaders)===null||y===void 0?void 0:y.find(m=>m.name===x)},E=x=>u.console.error(x),$=new Map,k=(x,y={})=>{let m=$.get(x);if(m)return console.warn(`Capacitor plugin "${x}" already registered. Cannot register plugins twice.`),m.proxy;let b=v(),N=R(x),T,O=()=>w(void 0,null,function*(){return!T&&b in y?T=typeof y[b]=="function"?T=yield y[b]():T=y[b]:n!==null&&!T&&"web"in y&&(T=typeof y.web=="function"?T=yield y.web():T=y.web),T}),H=(I,A)=>{var F,W;if(N){let Y=N==null?void 0:N.methods.find(j=>A===j.name);if(Y)return Y.rtype==="promise"?j=>c.nativePromise(x,A.toString(),j):(j,G)=>c.nativeCallback(x,A.toString(),j,G);if(I)return(F=I[A])===null||F===void 0?void 0:F.bind(I)}else{if(I)return(W=I[A])===null||W===void 0?void 0:W.bind(I);throw new ge(`"${x}" plugin is not implemented on ${b}`,me.Unimplemented)}},B=I=>{let A,F=(...W)=>{let Y=O().then(j=>{let G=H(j,I);if(G){let te=G(...W);return A=te==null?void 0:te.remove,te}else throw new ge(`"${x}.${I}()" is not implemented on ${b}`,me.Unimplemented)});return I==="addListener"&&(Y.remove=()=>w(void 0,null,function*(){return A()})),Y};return F.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(F,"name",{value:I,writable:!1,configurable:!1}),F},ce=B("addListener"),J=B("removeListener"),p=(I,A)=>{let F=ce({eventName:I},A),W=()=>w(void 0,null,function*(){let j=yield F;J({eventName:I,callbackId:j},A)}),Y=new Promise(j=>F.then(()=>j({remove:W})));return Y.remove=()=>w(void 0,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield W()}),Y},C=new Proxy({},{get(I,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?p:ce;case"removeListener":return J;default:return B(A)}}});return l[x]=C,$.set(x,{name:x,proxy:C,platforms:new Set([...Object.keys(y),...N?[b]:[]])}),C};return c.convertFileSrc||(c.convertFileSrc=x=>x),c.getPlatform=v,c.handleError=E,c.isNativePlatform=_,c.isPluginAvailable=P,c.registerPlugin=k,c.Exception=ge,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c},en=u=>u.Capacitor=Zr(u),pe=en(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),At=pe.registerPlugin,Pe=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(n,c){let l=!1;this.listeners[n]||(this.listeners[n]=[],l=!0),this.listeners[n].push(c);let _=this.windowListeners[n];_&&!_.registered&&this.addWindowListener(_),l&&this.sendRetainedArgumentsForEvent(n);let P=()=>w(this,null,function*(){return this.removeListener(n,c)});return Promise.resolve({remove:P})}removeAllListeners(){return w(this,null,function*(){this.listeners={};for(let n in this.windowListeners)this.removeWindowListener(this.windowListeners[n]);this.windowListeners={}})}notifyListeners(n,c,l){let v=this.listeners[n];if(!v){if(l){let _=this.retainedEventArguments[n];_||(_=[]),_.push(c),this.retainedEventArguments[n]=_}return}v.forEach(_=>_(c))}hasListeners(n){return!!this.listeners[n].length}registerWindowListener(n,c){this.windowListeners[c]={registered:!1,windowEventName:n,pluginEventName:c,handler:l=>{this.notifyListeners(c,l)}}}unimplemented(n="not implemented"){return new pe.Exception(n,me.Unimplemented)}unavailable(n="not available"){return new pe.Exception(n,me.Unavailable)}removeListener(n,c){return w(this,null,function*(){let l=this.listeners[n];if(!l)return;let v=l.indexOf(c);this.listeners[n].splice(v,1),this.listeners[n].length||this.removeWindowListener(this.windowListeners[n])})}addWindowListener(n){window.addEventListener(n.windowEventName,n.handler),n.registered=!0}removeWindowListener(n){n&&(window.removeEventListener(n.windowEventName,n.handler),n.registered=!1)}sendRetainedArgumentsForEvent(n){let c=this.retainedEventArguments[n];c&&(delete this.retainedEventArguments[n],c.forEach(l=>{this.notifyListeners(n,l)}))}},Rt=u=>encodeURIComponent(u).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Pt=u=>u.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),Fe=class extends Pe{getCookies(){return w(this,null,function*(){let n=document.cookie,c={};return n.split(";").forEach(l=>{if(l.length<=0)return;let[v,_]=l.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");v=Pt(v).trim(),_=Pt(_).trim(),c[v]=_}),c})}setCookie(n){return w(this,null,function*(){try{let c=Rt(n.key),l=Rt(n.value),v=`; expires=${(n.expires||"").replace("expires=","")}`,_=(n.path||"/").replace("path=",""),P=n.url!=null&&n.url.length>0?`domain=${n.url}`:"";document.cookie=`${c}=${l||""}${v}; path=${_}; ${P};`}catch(c){return Promise.reject(c)}})}deleteCookie(n){return w(this,null,function*(){try{document.cookie=`${n.key}=; Max-Age=0`}catch(c){return Promise.reject(c)}})}clearCookies(){return w(this,null,function*(){try{let n=document.cookie.split(";")||[];for(let c of n)document.cookie=c.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(n){return Promise.reject(n)}})}clearAllCookies(){return w(this,null,function*(){try{yield this.clearCookies()}catch(n){return Promise.reject(n)}})}},vn=At("CapacitorCookies",{web:()=>new Fe}),tn=u=>w(void 0,null,function*(){return new Promise((n,c)=>{let l=new FileReader;l.onload=()=>{let v=l.result;n(v.indexOf(",")>=0?v.split(",")[1]:v)},l.onerror=v=>c(v),l.readAsDataURL(u)})}),rn=(u={})=>{let n=Object.keys(u);return Object.keys(u).map(v=>v.toLocaleLowerCase()).reduce((v,_,P)=>(v[_]=u[n[P]],v),{})},nn=(u,n=!0)=>u?Object.entries(u).reduce((l,v)=>{let[_,P]=v,R,E;return Array.isArray(P)?(E="",P.forEach($=>{R=n?encodeURIComponent($):$,E+=`${_}=${R}&`}),E.slice(0,-1)):(R=n?encodeURIComponent(P):P,E=`${_}=${R}`),`${l}&${E}`},"").substr(1):null,on=(u,n={})=>{let c=Object.assign({method:u.method||"GET",headers:u.headers},n),v=rn(u.headers)["content-type"]||"";if(typeof u.data=="string")c.body=u.data;else if(v.includes("application/x-www-form-urlencoded")){let _=new URLSearchParams;for(let[P,R]of Object.entries(u.data||{}))_.set(P,R);c.body=_.toString()}else if(v.includes("multipart/form-data")||u.data instanceof FormData){let _=new FormData;if(u.data instanceof FormData)u.data.forEach((R,E)=>{_.append(E,R)});else for(let R of Object.keys(u.data))_.append(R,u.data[R]);c.body=_;let P=new Headers(c.headers);P.delete("content-type"),c.headers=P}else(v.includes("application/json")||typeof u.data=="object")&&(c.body=JSON.stringify(u.data));return c},je=class extends Pe{request(n){return w(this,null,function*(){let c=on(n,n.webFetchExtra),l=nn(n.params,n.shouldEncodeUrlParams),v=l?`${n.url}?${l}`:n.url,_=yield fetch(v,c),P=_.headers.get("content-type")||"",{responseType:R="text"}=_.ok?n:{};P.includes("application/json")&&(R="json");let E,$;switch(R){case"arraybuffer":case"blob":$=yield _.blob(),E=yield tn($);break;case"json":E=yield _.json();break;case"document":case"text":default:E=yield _.text()}let k={};return _.headers.forEach((x,y)=>{k[y]=x}),{data:E,headers:k,status:_.status,url:_.url}})}get(n){return w(this,null,function*(){return this.request(Object.assign(Object.assign({},n),{method:"GET"}))})}post(n){return w(this,null,function*(){return this.request(Object.assign(Object.assign({},n),{method:"POST"}))})}put(n){return w(this,null,function*(){return this.request(Object.assign(Object.assign({},n),{method:"PUT"}))})}patch(n){return w(this,null,function*(){return this.request(Object.assign(Object.assign({},n),{method:"PATCH"}))})}delete(n){return w(this,null,function*(){return this.request(Object.assign(Object.assign({},n),{method:"DELETE"}))})}},yn=At("CapacitorHttp",{web:()=>new je})});var Lt=Gr((Dt,ke)=>{"use strict";(function(u){if(typeof Dt=="object"&&typeof ke<"u")ke.exports=u();else if(typeof define=="function"&&define.amd)define([],u);else{var n;typeof window<"u"?n=window:typeof global<"u"?n=global:typeof self<"u"?n=self:n=this,n.localforage=u()}})(function(){var u,n,c;return function l(v,_,P){function R(k,x){if(!_[k]){if(!v[k]){var y=typeof ye=="function"&&ye;if(!x&&y)return y(k,!0);if(E)return E(k,!0);var m=new Error("Cannot find module '"+k+"'");throw m.code="MODULE_NOT_FOUND",m}var b=_[k]={exports:{}};v[k][0].call(b.exports,function(N){var T=v[k][1][N];return R(T||N)},b,b.exports,l,v,_,P)}return _[k].exports}for(var E=typeof ye=="function"&&ye,$=0;$<P.length;$++)R(P[$]);return R}({1:[function(l,v,_){(function(P){"use strict";var R=P.MutationObserver||P.WebKitMutationObserver,E;if(R){var $=0,k=new R(N),x=P.document.createTextNode("");k.observe(x,{characterData:!0}),E=function(){x.data=$=++$%2}}else if(!P.setImmediate&&typeof P.MessageChannel<"u"){var y=new P.MessageChannel;y.port1.onmessage=N,E=function(){y.port2.postMessage(0)}}else"document"in P&&"onreadystatechange"in P.document.createElement("script")?E=function(){var O=P.document.createElement("script");O.onreadystatechange=function(){N(),O.onreadystatechange=null,O.parentNode.removeChild(O),O=null},P.document.documentElement.appendChild(O)}:E=function(){setTimeout(N,0)};var m,b=[];function N(){m=!0;for(var O,H,B=b.length;B;){for(H=b,b=[],O=-1;++O<B;)H[O]();B=b.length}m=!1}v.exports=T;function T(O){b.push(O)===1&&!m&&E()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(l,v,_){"use strict";var P=l(1);function R(){}var E={},$=["REJECTED"],k=["FULFILLED"],x=["PENDING"];v.exports=y;function y(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=x,this.queue=[],this.outcome=void 0,p!==R&&T(this,p)}y.prototype.catch=function(p){return this.then(null,p)},y.prototype.then=function(p,C){if(typeof p!="function"&&this.state===k||typeof C!="function"&&this.state===$)return this;var I=new this.constructor(R);if(this.state!==x){var A=this.state===k?p:C;b(I,A,this.outcome)}else this.queue.push(new m(I,p,C));return I};function m(p,C,I){this.promise=p,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(p){E.resolve(this.promise,p)},m.prototype.otherCallFulfilled=function(p){b(this.promise,this.onFulfilled,p)},m.prototype.callRejected=function(p){E.reject(this.promise,p)},m.prototype.otherCallRejected=function(p){b(this.promise,this.onRejected,p)};function b(p,C,I){P(function(){var A;try{A=C(I)}catch(F){return E.reject(p,F)}A===p?E.reject(p,new TypeError("Cannot resolve promise with itself")):E.resolve(p,A)})}E.resolve=function(p,C){var I=O(N,C);if(I.status==="error")return E.reject(p,I.value);var A=I.value;if(A)T(p,A);else{p.state=k,p.outcome=C;for(var F=-1,W=p.queue.length;++F<W;)p.queue[F].callFulfilled(C)}return p},E.reject=function(p,C){p.state=$,p.outcome=C;for(var I=-1,A=p.queue.length;++I<A;)p.queue[I].callRejected(C);return p};function N(p){var C=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof C=="function")return function(){C.apply(p,arguments)}}function T(p,C){var I=!1;function A(j){I||(I=!0,E.reject(p,j))}function F(j){I||(I=!0,E.resolve(p,j))}function W(){C(F,A)}var Y=O(W);Y.status==="error"&&A(Y.value)}function O(p,C){var I={};try{I.value=p(C),I.status="success"}catch(A){I.status="error",I.value=A}return I}y.resolve=H;function H(p){return p instanceof this?p:E.resolve(new this(R),p)}y.reject=B;function B(p){var C=new this(R);return E.reject(C,p)}y.all=ce;function ce(p){var C=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=p.length,A=!1;if(!I)return this.resolve([]);for(var F=new Array(I),W=0,Y=-1,j=new this(R);++Y<I;)G(p[Y],Y);return j;function G(te,_e){C.resolve(te).then(xe,function(fe){A||(A=!0,E.reject(j,fe))});function xe(fe){F[_e]=fe,++W===I&&!A&&(A=!0,E.resolve(j,F))}}}y.race=J;function J(p){var C=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=p.length,A=!1;if(!I)return this.resolve([]);for(var F=-1,W=new this(R);++F<I;)Y(p[F]);return W;function Y(j){C.resolve(j).then(function(G){A||(A=!0,E.resolve(W,G))},function(G){A||(A=!0,E.reject(W,G))})}}},{1:1}],3:[function(l,v,_){(function(P){"use strict";typeof P.Promise!="function"&&(P.Promise=l(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(l,v,_){"use strict";var P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function R(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function E(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var $=E();function k(){try{if(!$||!$.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function x(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(o){if(o.name!=="TypeError")throw o;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,i=new t,a=0;a<e.length;a+=1)i.append(e[a]);return i.getBlob(r.type)}}typeof Promise>"u"&&l(3);var y=Promise;function m(e,r){r&&e.then(function(t){r(null,t)},function(t){r(t)})}function b(e,r,t){typeof r=="function"&&e.then(r),typeof t=="function"&&e.catch(t)}function N(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function T(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var O="local-forage-detect-blob-support",H=void 0,B={},ce=Object.prototype.toString,J="readonly",p="readwrite";function C(e){for(var r=e.length,t=new ArrayBuffer(r),i=new Uint8Array(t),a=0;a<r;a++)i[a]=e.charCodeAt(a);return t}function I(e){return new y(function(r){var t=e.transaction(O,p),i=x([""]);t.objectStore(O).put(i,"key"),t.onabort=function(a){a.preventDefault(),a.stopPropagation(),r(!1)},t.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),o=navigator.userAgent.match(/Edge\//);r(o||!a||parseInt(a[1],10)>=43)}}).catch(function(){return!1})}function A(e){return typeof H=="boolean"?y.resolve(H):I(e).then(function(r){return H=r,H})}function F(e){var r=B[e.name],t={};t.promise=new y(function(i,a){t.resolve=i,t.reject=a}),r.deferredOperations.push(t),r.dbReady?r.dbReady=r.dbReady.then(function(){return t.promise}):r.dbReady=t.promise}function W(e){var r=B[e.name],t=r.deferredOperations.pop();if(t)return t.resolve(),t.promise}function Y(e,r){var t=B[e.name],i=t.deferredOperations.pop();if(i)return i.reject(r),i.promise}function j(e,r){return new y(function(t,i){if(B[e.name]=B[e.name]||Ve(),e.db)if(r)F(e),e.db.close();else return t(e.db);var a=[e.name];r&&a.push(e.version);var o=$.open.apply($,a);r&&(o.onupgradeneeded=function(s){var f=o.result;try{f.createObjectStore(e.storeName),s.oldVersion<=1&&f.createObjectStore(O)}catch(d){if(d.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+s.oldVersion+" to version "+s.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw d}}),o.onerror=function(s){s.preventDefault(),i(o.error)},o.onsuccess=function(){var s=o.result;s.onversionchange=function(f){f.target.close()},t(s),W(e)}})}function G(e){return j(e,!1)}function te(e){return j(e,!0)}function _e(e,r){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,a=e.version>e.db.version;if(i&&(e.version!==r&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),a||t){if(t){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function xe(e){return new y(function(r,t){var i=new FileReader;i.onerror=t,i.onloadend=function(a){var o=btoa(a.target.result||"");r({__local_forage_encoded_blob:!0,data:o,type:e.type})},i.readAsBinaryString(e)})}function fe(e){var r=C(atob(e.data));return x([r],{type:e.type})}function He(e){return e&&e.__local_forage_encoded_blob}function Jt(e){var r=this,t=r._initReady().then(function(){var i=B[r._dbInfo.name];if(i&&i.dbReady)return i.dbReady});return b(t,e,e),t}function Qt(e){F(e);for(var r=B[e.name],t=r.forages,i=0;i<t.length;i++){var a=t[i];a._dbInfo.db&&(a._dbInfo.db.close(),a._dbInfo.db=null)}return e.db=null,G(e).then(function(o){return e.db=o,_e(e)?te(e):o}).then(function(o){e.db=r.db=o;for(var s=0;s<t.length;s++)t[s]._dbInfo.db=o}).catch(function(o){throw Y(e,o),o})}function ne(e,r,t,i){i===void 0&&(i=1);try{var a=e.db.transaction(e.storeName,r);t(null,a)}catch(o){if(i>0&&(!e.db||o.name==="InvalidStateError"||o.name==="NotFoundError"))return y.resolve().then(function(){if(!e.db||o.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),te(e)}).then(function(){return Qt(e).then(function(){ne(e,r,t,i-1)})}).catch(t);t(o)}}function Ve(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Xt(e){var r=this,t={db:null};if(e)for(var i in e)t[i]=e[i];var a=B[t.name];a||(a=Ve(),B[t.name]=a),a.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=Jt);var o=[];function s(){return y.resolve()}for(var f=0;f<a.forages.length;f++){var d=a.forages[f];d!==r&&o.push(d._initReady().catch(s))}var h=a.forages.slice(0);return y.all(o).then(function(){return t.db=a.db,G(t)}).then(function(g){return t.db=g,_e(t,r._defaultConfig.version)?te(t):g}).then(function(g){t.db=a.db=g,r._dbInfo=t;for(var S=0;S<h.length;S++){var D=h[S];D!==r&&(D._dbInfo.db=t.db,D._dbInfo.version=t.version)}})}function qt(e,r){var t=this;e=N(e);var i=new y(function(a,o){t.ready().then(function(){ne(t._dbInfo,J,function(s,f){if(s)return o(s);try{var d=f.objectStore(t._dbInfo.storeName),h=d.get(e);h.onsuccess=function(){var g=h.result;g===void 0&&(g=null),He(g)&&(g=fe(g)),a(g)},h.onerror=function(){o(h.error)}}catch(g){o(g)}})}).catch(o)});return m(i,r),i}function Zt(e,r){var t=this,i=new y(function(a,o){t.ready().then(function(){ne(t._dbInfo,J,function(s,f){if(s)return o(s);try{var d=f.objectStore(t._dbInfo.storeName),h=d.openCursor(),g=1;h.onsuccess=function(){var S=h.result;if(S){var D=S.value;He(D)&&(D=fe(D));var U=e(D,S.key,g++);U!==void 0?a(U):S.continue()}else a()},h.onerror=function(){o(h.error)}}catch(S){o(S)}})}).catch(o)});return m(i,r),i}function er(e,r,t){var i=this;e=N(e);var a=new y(function(o,s){var f;i.ready().then(function(){return f=i._dbInfo,ce.call(r)==="[object Blob]"?A(f.db).then(function(d){return d?r:xe(r)}):r}).then(function(d){ne(i._dbInfo,p,function(h,g){if(h)return s(h);try{var S=g.objectStore(i._dbInfo.storeName);d===null&&(d=void 0);var D=S.put(d,e);g.oncomplete=function(){d===void 0&&(d=null),o(d)},g.onabort=g.onerror=function(){var U=D.error?D.error:D.transaction.error;s(U)}}catch(U){s(U)}})}).catch(s)});return m(a,t),a}function tr(e,r){var t=this;e=N(e);var i=new y(function(a,o){t.ready().then(function(){ne(t._dbInfo,p,function(s,f){if(s)return o(s);try{var d=f.objectStore(t._dbInfo.storeName),h=d.delete(e);f.oncomplete=function(){a()},f.onerror=function(){o(h.error)},f.onabort=function(){var g=h.error?h.error:h.transaction.error;o(g)}}catch(g){o(g)}})}).catch(o)});return m(i,r),i}function rr(e){var r=this,t=new y(function(i,a){r.ready().then(function(){ne(r._dbInfo,p,function(o,s){if(o)return a(o);try{var f=s.objectStore(r._dbInfo.storeName),d=f.clear();s.oncomplete=function(){i()},s.onabort=s.onerror=function(){var h=d.error?d.error:d.transaction.error;a(h)}}catch(h){a(h)}})}).catch(a)});return m(t,e),t}function nr(e){var r=this,t=new y(function(i,a){r.ready().then(function(){ne(r._dbInfo,J,function(o,s){if(o)return a(o);try{var f=s.objectStore(r._dbInfo.storeName),d=f.count();d.onsuccess=function(){i(d.result)},d.onerror=function(){a(d.error)}}catch(h){a(h)}})}).catch(a)});return m(t,e),t}function or(e,r){var t=this,i=new y(function(a,o){if(e<0){a(null);return}t.ready().then(function(){ne(t._dbInfo,J,function(s,f){if(s)return o(s);try{var d=f.objectStore(t._dbInfo.storeName),h=!1,g=d.openKeyCursor();g.onsuccess=function(){var S=g.result;if(!S){a(null);return}e===0||h?a(S.key):(h=!0,S.advance(e))},g.onerror=function(){o(g.error)}}catch(S){o(S)}})}).catch(o)});return m(i,r),i}function ir(e){var r=this,t=new y(function(i,a){r.ready().then(function(){ne(r._dbInfo,J,function(o,s){if(o)return a(o);try{var f=s.objectStore(r._dbInfo.storeName),d=f.openKeyCursor(),h=[];d.onsuccess=function(){var g=d.result;if(!g){i(h);return}h.push(g.key),g.continue()},d.onerror=function(){a(d.error)}}catch(g){a(g)}})}).catch(a)});return m(t,e),t}function ar(e,r){r=T.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,a;if(!e.name)a=y.reject("Invalid arguments");else{var o=e.name===t.name&&i._dbInfo.db,s=o?y.resolve(i._dbInfo.db):G(e).then(function(f){var d=B[e.name],h=d.forages;d.db=f;for(var g=0;g<h.length;g++)h[g]._dbInfo.db=f;return f});e.storeName?a=s.then(function(f){if(f.objectStoreNames.contains(e.storeName)){var d=f.version+1;F(e);var h=B[e.name],g=h.forages;f.close();for(var S=0;S<g.length;S++){var D=g[S];D._dbInfo.db=null,D._dbInfo.version=d}var U=new y(function(M,K){var z=$.open(e.name,d);z.onerror=function(Q){var ve=z.result;ve.close(),K(Q)},z.onupgradeneeded=function(){var Q=z.result;Q.deleteObjectStore(e.storeName)},z.onsuccess=function(){var Q=z.result;Q.close(),M(Q)}});return U.then(function(M){h.db=M;for(var K=0;K<g.length;K++){var z=g[K];z._dbInfo.db=M,W(z._dbInfo)}}).catch(function(M){throw(Y(e,M)||y.resolve()).catch(function(){}),M})}}):a=s.then(function(f){F(e);var d=B[e.name],h=d.forages;f.close();for(var g=0;g<h.length;g++){var S=h[g];S._dbInfo.db=null}var D=new y(function(U,M){var K=$.deleteDatabase(e.name);K.onerror=function(){var z=K.result;z&&z.close(),M(K.error)},K.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},K.onsuccess=function(){var z=K.result;z&&z.close(),U(z)}});return D.then(function(U){d.db=U;for(var M=0;M<h.length;M++){var K=h[M];W(K._dbInfo)}}).catch(function(U){throw(Y(e,U)||y.resolve()).catch(function(){}),U})})}return m(a,r),a}var sr={_driver:"asyncStorage",_initStorage:Xt,_support:k(),iterate:Zt,getItem:qt,setItem:er,removeItem:tr,clear:rr,length:nr,key:or,keys:ir,dropInstance:ar};function cr(){return typeof openDatabase=="function"}var ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ur="~~local_forage_type~",Ge=/^~~local_forage_type~([^~]+)~/,Ee="__lfsc__:",De=Ee.length,Le="arbf",Te="blob",Je="si08",Qe="ui08",Xe="uic8",qe="si16",Ze="si32",et="ur16",tt="ui32",rt="fl32",nt="fl64",ot=De+Le.length,it=Object.prototype.toString;function at(e){var r=e.length*.75,t=e.length,i,a=0,o,s,f,d;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var h=new ArrayBuffer(r),g=new Uint8Array(h);for(i=0;i<t;i+=4)o=ie.indexOf(e[i]),s=ie.indexOf(e[i+1]),f=ie.indexOf(e[i+2]),d=ie.indexOf(e[i+3]),g[a++]=o<<2|s>>4,g[a++]=(s&15)<<4|f>>2,g[a++]=(f&3)<<6|d&63;return h}function Ce(e){var r=new Uint8Array(e),t="",i;for(i=0;i<r.length;i+=3)t+=ie[r[i]>>2],t+=ie[(r[i]&3)<<4|r[i+1]>>4],t+=ie[(r[i+1]&15)<<2|r[i+2]>>6],t+=ie[r[i+2]&63];return r.length%3===2?t=t.substring(0,t.length-1)+"=":r.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function fr(e,r){var t="";if(e&&(t=it.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&it.call(e.buffer)==="[object ArrayBuffer]")){var i,a=Ee;e instanceof ArrayBuffer?(i=e,a+=Le):(i=e.buffer,t==="[object Int8Array]"?a+=Je:t==="[object Uint8Array]"?a+=Qe:t==="[object Uint8ClampedArray]"?a+=Xe:t==="[object Int16Array]"?a+=qe:t==="[object Uint16Array]"?a+=et:t==="[object Int32Array]"?a+=Ze:t==="[object Uint32Array]"?a+=tt:t==="[object Float32Array]"?a+=rt:t==="[object Float64Array]"?a+=nt:r(new Error("Failed to get type for BinaryArray"))),r(a+Ce(i))}else if(t==="[object Blob]"){var o=new FileReader;o.onload=function(){var s=ur+e.type+"~"+Ce(this.result);r(Ee+Te+s)},o.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),r(null,s)}}function lr(e){if(e.substring(0,De)!==Ee)return JSON.parse(e);var r=e.substring(ot),t=e.substring(De,ot),i;if(t===Te&&Ge.test(r)){var a=r.match(Ge);i=a[1],r=r.substring(a[0].length)}var o=at(r);switch(t){case Le:return o;case Te:return x([o],{type:i});case Je:return new Int8Array(o);case Qe:return new Uint8Array(o);case Xe:return new Uint8ClampedArray(o);case qe:return new Int16Array(o);case et:return new Uint16Array(o);case Ze:return new Int32Array(o);case tt:return new Uint32Array(o);case rt:return new Float32Array(o);case nt:return new Float64Array(o);default:throw new Error("Unkown type: "+t)}}var Oe={serialize:fr,deserialize:lr,stringToBuffer:at,bufferToString:Ce};function st(e,r,t,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,i)}function dr(e){var r=this,t={db:null};if(e)for(var i in e)t[i]=typeof e[i]!="string"?e[i].toString():e[i];var a=new y(function(o,s){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(f){return s(f)}t.db.transaction(function(f){st(f,t,function(){r._dbInfo=t,o()},function(d,h){s(h)})},s)});return t.serializer=Oe,a}function ae(e,r,t,i,a,o){e.executeSql(t,i,a,function(s,f){f.code===f.SYNTAX_ERR?s.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(d,h){h.rows.length?o(d,f):st(d,r,function(){d.executeSql(t,i,a,o)},o)},o):o(s,f)},o)}function hr(e,r){var t=this;e=N(e);var i=new y(function(a,o){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(f){ae(f,s,"SELECT * FROM "+s.storeName+" WHERE key = ? LIMIT 1",[e],function(d,h){var g=h.rows.length?h.rows.item(0).value:null;g&&(g=s.serializer.deserialize(g)),a(g)},function(d,h){o(h)})})}).catch(o)});return m(i,r),i}function vr(e,r){var t=this,i=new y(function(a,o){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(f){ae(f,s,"SELECT * FROM "+s.storeName,[],function(d,h){for(var g=h.rows,S=g.length,D=0;D<S;D++){var U=g.item(D),M=U.value;if(M&&(M=s.serializer.deserialize(M)),M=e(M,U.key,D+1),M!==void 0){a(M);return}}a()},function(d,h){o(h)})})}).catch(o)});return m(i,r),i}function ct(e,r,t,i){var a=this;e=N(e);var o=new y(function(s,f){a.ready().then(function(){r===void 0&&(r=null);var d=r,h=a._dbInfo;h.serializer.serialize(r,function(g,S){S?f(S):h.db.transaction(function(D){ae(D,h,"INSERT OR REPLACE INTO "+h.storeName+" (key, value) VALUES (?, ?)",[e,g],function(){s(d)},function(U,M){f(M)})},function(D){if(D.code===D.QUOTA_ERR){if(i>0){s(ct.apply(a,[e,d,t,i-1]));return}f(D)}})})}).catch(f)});return m(o,t),o}function yr(e,r,t){return ct.apply(this,[e,r,t,1])}function gr(e,r){var t=this;e=N(e);var i=new y(function(a,o){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(f){ae(f,s,"DELETE FROM "+s.storeName+" WHERE key = ?",[e],function(){a()},function(d,h){o(h)})})}).catch(o)});return m(i,r),i}function mr(e){var r=this,t=new y(function(i,a){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(s){ae(s,o,"DELETE FROM "+o.storeName,[],function(){i()},function(f,d){a(d)})})}).catch(a)});return m(t,e),t}function pr(e){var r=this,t=new y(function(i,a){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(s){ae(s,o,"SELECT COUNT(key) as c FROM "+o.storeName,[],function(f,d){var h=d.rows.item(0).c;i(h)},function(f,d){a(d)})})}).catch(a)});return m(t,e),t}function br(e,r){var t=this,i=new y(function(a,o){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(f){ae(f,s,"SELECT key FROM "+s.storeName+" WHERE id = ? LIMIT 1",[e+1],function(d,h){var g=h.rows.length?h.rows.item(0).key:null;a(g)},function(d,h){o(h)})})}).catch(o)});return m(i,r),i}function wr(e){var r=this,t=new y(function(i,a){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(s){ae(s,o,"SELECT key FROM "+o.storeName,[],function(f,d){for(var h=[],g=0;g<d.rows.length;g++)h.push(d.rows.item(g).key);i(h)},function(f,d){a(d)})})}).catch(a)});return m(t,e),t}function _r(e){return new y(function(r,t){e.transaction(function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(a,o){for(var s=[],f=0;f<o.rows.length;f++)s.push(o.rows.item(f).name);r({db:e,storeNames:s})},function(a,o){t(o)})},function(i){t(i)})})}function Er(e,r){r=T.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,a;return e.name?a=new y(function(o){var s;e.name===t.name?s=i._dbInfo.db:s=openDatabase(e.name,"","",0),e.storeName?o({db:s,storeNames:[e.storeName]}):o(_r(s))}).then(function(o){return new y(function(s,f){o.db.transaction(function(d){function h(U){return new y(function(M,K){d.executeSql("DROP TABLE IF EXISTS "+U,[],function(){M()},function(z,Q){K(Q)})})}for(var g=[],S=0,D=o.storeNames.length;S<D;S++)g.push(h(o.storeNames[S]));y.all(g).then(function(){s()}).catch(function(U){f(U)})},function(d){f(d)})})}):a=y.reject("Invalid arguments"),m(a,r),a}var Sr={_driver:"webSQLStorage",_initStorage:dr,_support:cr(),iterate:vr,getItem:hr,setItem:yr,removeItem:gr,clear:mr,length:pr,key:br,keys:wr,dropInstance:Er};function Ir(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ut(e,r){var t=e.name+"/";return e.storeName!==r.storeName&&(t+=e.storeName+"/"),t}function Rr(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Pr(){return!Rr()||localStorage.length>0}function Ar(e){var r=this,t={};if(e)for(var i in e)t[i]=e[i];return t.keyPrefix=ut(e,r._defaultConfig),Pr()?(r._dbInfo=t,t.serializer=Oe,y.resolve()):y.reject()}function xr(e){var r=this,t=r.ready().then(function(){for(var i=r._dbInfo.keyPrefix,a=localStorage.length-1;a>=0;a--){var o=localStorage.key(a);o.indexOf(i)===0&&localStorage.removeItem(o)}});return m(t,e),t}function Dr(e,r){var t=this;e=N(e);var i=t.ready().then(function(){var a=t._dbInfo,o=localStorage.getItem(a.keyPrefix+e);return o&&(o=a.serializer.deserialize(o)),o});return m(i,r),i}function Lr(e,r){var t=this,i=t.ready().then(function(){for(var a=t._dbInfo,o=a.keyPrefix,s=o.length,f=localStorage.length,d=1,h=0;h<f;h++){var g=localStorage.key(h);if(g.indexOf(o)===0){var S=localStorage.getItem(g);if(S&&(S=a.serializer.deserialize(S)),S=e(S,g.substring(s),d++),S!==void 0)return S}}});return m(i,r),i}function Tr(e,r){var t=this,i=t.ready().then(function(){var a=t._dbInfo,o;try{o=localStorage.key(e)}catch{o=null}return o&&(o=o.substring(a.keyPrefix.length)),o});return m(i,r),i}function Cr(e){var r=this,t=r.ready().then(function(){for(var i=r._dbInfo,a=localStorage.length,o=[],s=0;s<a;s++){var f=localStorage.key(s);f.indexOf(i.keyPrefix)===0&&o.push(f.substring(i.keyPrefix.length))}return o});return m(t,e),t}function Or(e){var r=this,t=r.keys().then(function(i){return i.length});return m(t,e),t}function Nr(e,r){var t=this;e=N(e);var i=t.ready().then(function(){var a=t._dbInfo;localStorage.removeItem(a.keyPrefix+e)});return m(i,r),i}function Br(e,r,t){var i=this;e=N(e);var a=i.ready().then(function(){r===void 0&&(r=null);var o=r;return new y(function(s,f){var d=i._dbInfo;d.serializer.serialize(r,function(h,g){if(g)f(g);else try{localStorage.setItem(d.keyPrefix+e,h),s(o)}catch(S){(S.name==="QuotaExceededError"||S.name==="NS_ERROR_DOM_QUOTA_REACHED")&&f(S),f(S)}})})});return m(a,t),a}function Ur(e,r){if(r=T.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var i=this,a;return e.name?a=new y(function(o){e.storeName?o(ut(e,i._defaultConfig)):o(e.name+"/")}).then(function(o){for(var s=localStorage.length-1;s>=0;s--){var f=localStorage.key(s);f.indexOf(o)===0&&localStorage.removeItem(f)}}):a=y.reject("Invalid arguments"),m(a,r),a}var Mr={_driver:"localStorageWrapper",_initStorage:Ar,_support:Ir(),iterate:Lr,getItem:Dr,setItem:Br,removeItem:Nr,clear:xr,length:Or,key:Tr,keys:Cr,dropInstance:Ur},$r=function(r,t){return r===t||typeof r=="number"&&typeof t=="number"&&isNaN(r)&&isNaN(t)},Fr=function(r,t){for(var i=r.length,a=0;a<i;){if($r(r[a],t))return!0;a++}return!1},ft=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},he={},lt={},le={INDEXEDDB:sr,WEBSQL:Sr,LOCALSTORAGE:Mr},jr=[le.INDEXEDDB._driver,le.WEBSQL._driver,le.LOCALSTORAGE._driver],Se=["dropInstance"],Ne=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Se),kr={description:"",driver:jr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Wr(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function Be(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(ft(r[t])?arguments[0][t]=r[t].slice():arguments[0][t]=r[t])}return arguments[0]}var Yr=function(){function e(r){R(this,e);for(var t in le)if(le.hasOwnProperty(t)){var i=le[t],a=i._driver;this[t]=a,he[a]||this.defineDriver(i)}this._defaultConfig=Be({},kr),this._config=Be({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":P(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in t){if(i==="storeName"&&(t[i]=t[i].replace(/\W/g,"_")),i==="version"&&typeof t[i]!="number")return new Error("Database version must be a number.");this._config[i]=t[i]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,i,a){var o=new y(function(s,f){try{var d=t._driver,h=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){f(h);return}for(var g=Ne.concat("_initStorage"),S=0,D=g.length;S<D;S++){var U=g[S],M=!Fr(Se,U);if((M||t[U])&&typeof t[U]!="function"){f(h);return}}var K=function(){for(var ve=function(Hr){return function(){var Vr=new Error("Method "+Hr+" is not implemented by the current driver"),dt=y.reject(Vr);return m(dt,arguments[arguments.length-1]),dt}},Ue=0,Kr=Se.length;Ue<Kr;Ue++){var Me=Se[Ue];t[Me]||(t[Me]=ve(Me))}};K();var z=function(ve){he[d]&&console.info("Redefining LocalForage driver: "+d),he[d]=t,lt[d]=ve,s()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(z,f):z(!!t._support):z(!0)}catch(Q){f(Q)}});return b(o,i,a),o},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,i,a){var o=he[t]?y.resolve(he[t]):y.reject(new Error("Driver not found."));return b(o,i,a),o},e.prototype.getSerializer=function(t){var i=y.resolve(Oe);return b(i,t),i},e.prototype.ready=function(t){var i=this,a=i._driverSet.then(function(){return i._ready===null&&(i._ready=i._initDriver()),i._ready});return b(a,t,t),a},e.prototype.setDriver=function(t,i,a){var o=this;ft(t)||(t=[t]);var s=this._getSupportedDrivers(t);function f(){o._config.driver=o.driver()}function d(S){return o._extend(S),f(),o._ready=o._initStorage(o._config),o._ready}function h(S){return function(){var D=0;function U(){for(;D<S.length;){var M=S[D];return D++,o._dbInfo=null,o._ready=null,o.getDriver(M).then(d).catch(U)}f();var K=new Error("No available storage method found.");return o._driverSet=y.reject(K),o._driverSet}return U()}}var g=this._driverSet!==null?this._driverSet.catch(function(){return y.resolve()}):y.resolve();return this._driverSet=g.then(function(){var S=s[0];return o._dbInfo=null,o._ready=null,o.getDriver(S).then(function(D){o._driver=D._driver,f(),o._wrapLibraryMethodsWithReady(),o._initDriver=h(s)})}).catch(function(){f();var S=new Error("No available storage method found.");return o._driverSet=y.reject(S),o._driverSet}),b(this._driverSet,i,a),this._driverSet},e.prototype.supports=function(t){return!!lt[t]},e.prototype._extend=function(t){Be(this,t)},e.prototype._getSupportedDrivers=function(t){for(var i=[],a=0,o=t.length;a<o;a++){var s=t[a];this.supports(s)&&i.push(s)}return i},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,i=Ne.length;t<i;t++)Wr(this,Ne[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),zr=new Yr;v.exports=zr},{3:3}]},{},[4])(4)})});var be,Ae,Tt,q,We=re(()=>{"use strict";be=Jr(Lt()),Ae={SecureStorage:"ionicSecureStorage",IndexedDB:be.default.INDEXEDDB,LocalStorage:be.default.LOCALSTORAGE},Tt={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[Ae.SecureStorage,Ae.IndexedDB,Ae.LocalStorage]},q=class{constructor(n=Tt){this._db=null,this._secureStorageDriver=null;let c=Object.assign({},Tt,n||{});this._config=c}create(){return w(this,null,function*(){let n=be.default.createInstance(this._config);return this._db=n,yield n.setDriver(this._config.driverOrder||[]),this})}defineDriver(n){return w(this,null,function*(){return n._driver===Ae.SecureStorage&&(this._secureStorageDriver=n),be.default.defineDriver(n)})}get driver(){var n;return((n=this._db)===null||n===void 0?void 0:n.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(n){return this.assertDb().getItem(n)}set(n,c){return this.assertDb().setItem(n,c)}remove(n){return this.assertDb().removeItem(n)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(n){return this.assertDb().iterate(n)}setEncryptionKey(n){var c;if(this._secureStorageDriver)(c=this._secureStorageDriver)===null||c===void 0||c.setEncryptionKey(n);else throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available")}}});function an(u,n){return _t(u)?new Ye:new q(n)}var Ct,Ye,Rn,Nt=re(()=>{"use strict";Xr();oe();oe();We();We();Ct=new se("STORAGE_CONFIG_TOKEN"),Ye=class extends q{constructor(){super()}create(){return w(this,null,function*(){return this})}defineDriver(){return w(this,null,function*(){})}get driver(){return"noop"}get(n){return w(this,null,function*(){return null})}set(n,c){return w(this,null,function*(){})}remove(n){return w(this,null,function*(){})}clear(){return w(this,null,function*(){})}length(){return w(this,null,function*(){return 0})}keys(){return w(this,null,function*(){return[]})}forEach(n){return w(this,null,function*(){})}setEncryptionKey(n){}};Rn=(()=>{class u{static forRoot(c=null){return{ngModule:u,providers:[{provide:Ct,useValue:c},{provide:q,useFactory:an,deps:[bt,Ct]}]}}}return u.\u0275fac=function(c){return new(c||u)},u.\u0275mod=wt({type:u}),u.\u0275inj=yt({}),u})()});var Bt,Ut=re(()=>{"use strict";oe();Bt=new se("CloudStorage")});function $t(u){return typeof u=="object"&&u!==null&&typeof u._id=="string"&&typeof u.email=="string"&&typeof u.username=="string"&&typeof u.profilePictureURL=="string"&&Array.isArray(u.roles)}var sn,Mt,Ft=re(()=>{"use strict";sn=function(u){return u.None="",u.Amateur="Aficionado",u.Professional="Profesional",u.Collector="Coleccionista",u.Student="Estudiante",u}(sn||{}),Mt=class u{constructor(n={}){this._id="",this.email="",this.username="",this.profilePictureURL="",this.name={first:"",middle:"",last:""},this.address={line1:"",city:"",country:"",zipcode:""},this.roles=[],this.bio="",this.activePosts=[],this.fcmToken="",Object.assign(this,ht({},n))}static Build(n={}){return new u(n)}get fullName(){return this.name?this.name.middle?`${this.name.first} ${this.name.middle} ${this.name.last}`:`${this.name.first} ${this.name.last}`:""}toJSON(){let n=Object.assign(this);delete n._id,delete n.fullName;try{return JSON.stringify(n)}catch(c){console.error(`Error stringifying object ${n}: ${c}`)}return""}fromJSON(n){try{return JSON.parse(n)}catch(c){console.error(`Error parsing json ${n}: ${c}`)}return null}}});var jt,kt=re(()=>{"use strict";oe();xt();Nt();oe();jt=(()=>{var n,c,l,we;let _=class _{constructor(){Z(this,l);Z(this,n);Z(this,c,!1);pe.isNativePlatform()?(ee(this,n,X(q)),V(this,l,we).call(this)):(ee(this,n,localStorage),ee(this,c,!0))}get(R){return w(this,null,function*(){let E=null;if(L(this,n)instanceof q&&(L(this,c)||(yield V(this,l,we).call(this)),E=yield L(this,n).get(R)),L(this,n)instanceof Storage&&(E=L(this,n).getItem(R)),E!=null)try{return JSON.parse(E)}catch($){console.error(`Parsing error: ${$}`)}return null})}set(R,E){return w(this,null,function*(){L(this,n)instanceof q&&(L(this,c)||(yield V(this,l,we).call(this)),L(this,n).set(R,JSON.stringify(E))),L(this,n)instanceof Storage&&(typeof E=="string"?L(this,n).setItem(R,E):L(this,n).setItem(R,JSON.stringify(E)))})}remove(R){return w(this,null,function*(){L(this,n)instanceof q&&(L(this,c)||(yield V(this,l,we).call(this)),L(this,n).remove(R)),L(this,n)instanceof Storage&&L(this,n).removeItem(R)})}clear(){return w(this,null,function*(){L(this,n).clear()})}};n=new WeakMap,c=new WeakMap,l=new WeakSet,we=function(){return w(this,null,function*(){yield L(this,n).create(),ee(this,c,!0)})},_.\u0275fac=function(E){return new(E||_)},_.\u0275prov=ue({token:_,factory:_.\u0275fac,providedIn:"root"});let u=_;return u})()});var Wt,Yt=re(()=>{"use strict";Wt=u=>{let[n,c]=u.split(","),l=n.match(/:(.*?);/),v=l?l[1]:"image/jpeg",_=atob(c),P=Uint8Array.from(_,R=>R.charCodeAt(0));return new Blob([P],{type:v})}});var zt,Jn,Kt,Ht,Vt,cn=re(()=>{"use strict";oe();St();Ft();It();kt();Ut();Yt();Qr();oe();zt={isAuthenticated:!1,userId:"",username:"",userRoles:[]},Jn=(()=>{var n,c,l,v,de,ze,R,E,Ke,Gt;let x=class x{constructor(m){Z(this,v);Z(this,n);Z(this,c);Z(this,l);Z(this,R);Z(this,E);this.injector=m,ee(this,n,Ie(null)),ee(this,c,Ie(zt)),ee(this,l,Ie(null)),this.userRepository=X(Et),this.cloudStorage=X(Bt),this.cache=X(jt),this.init=()=>w(this,null,function*(){try{yield V(this,v,Gt).call(this)}catch(b){console.error(b)}}),ee(this,R,T=>w(this,[T],function*({profilePictureDataUrl:b,uid:N}){try{return yield this.cloudStorage.upload(`profilePictures/${N}`,Wt(b))}catch(O){throw O}})),ee(this,E,()=>w(this,null,function*(){try{return yield this.cloudStorage.getDownloadURL("profilePictures/default.webp")}catch(b){throw b}}))}get currentUser(){return L(this,n).asReadonly()}get authStatus(){return L(this,c).asReadonly()}get errorMessage(){return L(this,l).asReadonly()}register(N){return w(this,arguments,function*({method:m,userData:b}){var T,O;V(this,v,de).call(this,m);try{let B=yield this.authMethod.register({email:b.email,password:b.password,username:b.username});V(this,v,ze).call(this,B)&&(b._id=B.uid),b.profilePictureDataURL&&b._id?(b.profilePictureURL=(T=yield L(this,R).call(this,{profilePictureDataUrl:b.profilePictureDataURL,uid:b._id}))!=null?T:"",delete b.profilePictureDataURL):b.profilePictureURL=(O=yield L(this,E).call(this))!=null?O:"";let H=b,{password:ce}=H,J=vt(H,["password"]);return yield this.userRepository.saveUser(J)}catch(B){throw L(this,l).set(B),B}})}login(N){return w(this,arguments,function*({method:m,credentials:b}){V(this,v,de).call(this,m);try{let T=yield this.authMethod.login(b==null?void 0:b.email,b==null?void 0:b.password);if($t(T))return T;if(!V(this,v,ze).call(this,T))return null;if(this.userRepository.getUserById$){let H=this.userRepository.getUserById$(T.uid,!0);if(H)return H.subscribe(B=>{L(this,n).set(B)}),V(this,v,Ke).call(this,yield $e(H)),null}let O=yield this.userRepository.getUserById(T.uid,!0);return O||null}catch(T){throw L(this,l).set(T),T}})}logout(){return w(this,null,function*(){V(this,v,de).call(this,"email");try{yield this.authMethod.logout(),L(this,n).set(null),L(this,c).set(zt),yield this.cache.set("authStatus",L(this,c).call(this))}catch(m){throw L(this,l).set(m),m}})}updatePassword(m){return w(this,null,function*(){V(this,v,de).call(this,"email");try{yield this.authMethod.updatePassword(m)}catch(b){throw L(this,l).set(b),b}})}resetPassword(m){return w(this,null,function*(){V(this,v,de).call(this,"email");try{yield this.authMethod.resetPassword(m)}catch(b){throw L(this,l).set(b),b}})}};n=new WeakMap,c=new WeakMap,l=new WeakMap,v=new WeakSet,de=function(m){pt(this.injector,()=>{m==="email"&&!(this.authMethod instanceof Kt)&&(this.authMethod=X(Kt)),m==="google"&&!(this.authMethod instanceof Ht)&&(this.authMethod=X(Ht)),m==="apple"&&!(this.authMethod instanceof Vt)&&(this.authMethod=X(Vt))})},ze=function(m){return m&&typeof m=="object"&&m.uid&&typeof m.uid=="string"},R=new WeakMap,E=new WeakMap,Ke=function(m){return w(this,null,function*(){m&&(L(this,c).set({isAuthenticated:!0,userId:m._id,username:m.username,userRoles:m.roles}),yield this.cache.set("authStatus",L(this,c).call(this)))})},Gt=function(){return w(this,null,function*(){let m=yield this.cache.get("authStatus");if(m!=null&&m.isAuthenticated){let b=m.userId;if(this.userRepository.getUserById$){let T=this.userRepository.getUserById$(b);if(T){T.subscribe(O=>{L(this,n).set(O)}),V(this,v,Ke).call(this,yield $e(T));return}}let N=yield this.userRepository.getUserById(b);L(this,n).set(N)}})},x.\u0275fac=function(b){return new(b||x)(gt(mt))},x.\u0275prov=ue({token:x,factory:x.\u0275fac,providedIn:"root"});let u=x;return u})(),Kt=(()=>{let n=class n{constructor(){this.auth=X(Re)}register(l){return w(this,null,function*(){try{return yield this.auth.registerWithEmail(l)}catch(v){throw v}})}login(l,v){return w(this,null,function*(){try{return yield this.auth.loginWithEmail(l,v)}catch(_){throw _}})}logout(){return w(this,null,function*(){try{return yield this.auth.logout()}catch(l){throw l}})}resetPassword(l){return w(this,null,function*(){try{return yield this.auth.resetPassword(l)}catch(v){throw v}})}updatePassword(l){return w(this,null,function*(){try{return yield this.auth.updatePassword(l)}catch(v){throw v}})}};n.\u0275fac=function(v){return new(v||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"});let u=n;return u})(),Ht=(()=>{let n=class n{constructor(){this.auth=X(Re)}register(){return w(this,null,function*(){try{return yield this.auth.registerWithProvider("google")}catch(l){throw l}})}login(){return w(this,null,function*(){try{return yield this.auth.loginWithProvider("google")}catch(l){throw l}})}logout(){return w(this,null,function*(){try{return yield this.auth.logout()}catch(l){throw l}})}resetPassword(l){return w(this,null,function*(){try{return yield this.auth.resetPassword(l)}catch(v){throw v}})}updatePassword(l){return w(this,null,function*(){try{return yield this.auth.updatePassword(l)}catch(v){throw v}})}};n.\u0275fac=function(v){return new(v||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"});let u=n;return u})(),Vt=(()=>{let n=class n{constructor(){this.auth=X(Re)}register(){return w(this,null,function*(){try{return yield this.auth.loginWithProvider("apple")}catch(l){throw l}})}login(){return w(this,null,function*(){try{return yield this.auth.loginWithProvider("apple")}catch(l){throw l}})}logout(){return w(this,null,function*(){try{return yield this.auth.logout()}catch(l){throw l}})}resetPassword(l){return w(this,null,function*(){try{return yield this.auth.resetPassword(l)}catch(v){throw v}})}updatePassword(l){return w(this,null,function*(){try{return yield this.auth.updatePassword(l)}catch(v){throw v}})}};n.\u0275fac=function(v){return new(v||n)},n.\u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"});let u=n;return u})()});export{Et as a,St as b,sn as c,Mt as d,$t as e,Ft as f,Re as g,It as h,ge as i,pe as j,At as k,Pe as l,xt as m,Rn as n,Nt as o,jt as p,kt as q,Bt as r,Ut as s,Wt as t,Yt as u,Jn as v,cn as w};
