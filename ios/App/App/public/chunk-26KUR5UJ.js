import{D as v,F as y,L as l,T as m,U as g,_ as w,a as f,mb as h,pb as k,x}from"./chunk-LBGYGD76.js";import{a as i,b,f as o}from"./chunk-FIPIWZQS.js";var R,D=o(()=>{"use strict";k();R=new v("CartRepository")});function j(r){r===void 0&&(l(j),r=y(m));let a=r.get(g);return s=>new f(n=>{let d=a.add(),t=!1;function u(){t||(d(),t=!0)}let c=s.subscribe({next:e=>{n.next(e),u()},complete:()=>{n.complete(),u()},error:e=>{n.error(e),u()}});return c.add(()=>{n.unsubscribe(),u()}),c})}function O(r){return r!=null&&r.injector||l(O),h(b(i({},r),{loader:void 0,stream:a=>{let s,n=()=>s.unsubscribe();a.abortSignal.addEventListener("abort",n);let d=w({value:void 0}),t,u=new Promise(e=>t=e);function c(e){d.set(e),t==null||t(d),t=void 0}return s=r.loader(a).subscribe({next:e=>c({value:e}),error:e=>c({error:e}),complete:()=>{t&&c({error:new Error("Resource completed before producing a value")}),a.abortSignal.removeEventListener("abort",n)}}),u}}))}var S=o(()=>{"use strict";k();x();});export{j as a,O as b,S as c,R as d,D as e};
