import{a as et,b as gt}from"./chunk-7HX7VADE.js";import{e as tt,f as dt}from"./chunk-2GV3WWDM.js";import"./chunk-QZLDCAKT.js";import"./chunk-7QGFDW3N.js";import"./chunk-CVZVN4BI.js";import"./chunk-6RPMLJXL.js";import"./chunk-ZDSPE5PQ.js";import"./chunk-XV6JN3SG.js";import"./chunk-G3RFF6YC.js";import"./chunk-ZSFULLTW.js";import"./chunk-JBWWZWAU.js";import"./chunk-ITJAHDAK.js";import"./chunk-WVJ73LOB.js";import"./chunk-5WOL6UCU.js";import"./chunk-UCDHUJSY.js";import"./chunk-67JKSNDF.js";import"./chunk-UUSPLNXY.js";import"./chunk-DH7DTWFE.js";import"./chunk-JT567OVO.js";import"./chunk-NY55XGVK.js";import"./chunk-UHVVQU73.js";import{a as nt,b as pt}from"./chunk-D2DXDZBG.js";import"./chunk-7JRGKQWZ.js";import{y as Z,z as mt}from"./chunk-WI56WTX3.js";import{Ca as Y,Q as G,_ as J,aa as K,da as N,ea as Q,la as W,oa as v,pa as X,t as $,v as ct}from"./chunk-IBFAPW3Z.js";import{$ as o,$a as j,D as f,Da as T,Ea as p,Hb as V,Lb as lt,Qa as c,Ra as h,Sa as F,W as I,Y as P,Za as R,_ as w,_a as k,ab as A,fa as b,hb as M,jb as D,ka as y,kb as E,nb as C,qa as d,ra as S,sa as _,ua as L,ub as U,va as H,vb as B,wa as a,xa as r,xb as q,ya as g,z}from"./chunk-S4NGLO4I.js";import"./chunk-OHMQXWFK.js";import"./chunk-IZ5VZLPJ.js";import"./chunk-FTZN4423.js";import"./chunk-R4WQGMAA.js";import"./chunk-5WZLWBAD.js";import"./chunk-UAVZGLFE.js";import"./chunk-3VQMIGUA.js";import"./chunk-GWOLSY5V.js";import"./chunk-QQVLEOUP.js";import"./chunk-HJZG4HTK.js";import"./chunk-XR3M57TO.js";import"./chunk-3FE2HO5M.js";import"./chunk-ZKJSTCFA.js";import{f as O,o as x}from"./chunk-FIPIWZQS.js";function _t(t,e){if(t&1&&(a(0,"div",0)(1,"ion-text",2),c(2),r()()),t&2){let n=p();o(2),F("A\xFAn no has ",n.type()==="bought"?"comprado":"vendido"," ning\xFAn art\xEDculo")}}function Ct(t,e){if(t&1&&(a(0,"div",3)(1,"div",4)(2,"ion-thumbnail",5),g(3,"img",6),r(),a(4,"div",7)(5,"ion-text",8),c(6),r(),a(7,"ion-label",9),c(8),r(),a(9,"ion-text",10),c(10),k(11,"formatCurrency"),r()()(),a(12,"div",11)(13,"ion-text",12),c(14),k(15,"date"),r(),a(16,"div",13)(17,"ion-text",14),c(18),r(),a(19,"div",15)(20,"ion-avatar",16),g(21,"img",17),r(),a(22,"ion-text",18),c(23),r()()()()()),t&2){let n=e.$implicit,i=p(2);o(3),d("src",n.postData.mainImageURL,w),o(3),h(n.postData.title),o(2),h(n.postData.articleCondition),o(2),h(j(11,9,n.postData.price)),o(4),h(A(15,11,n.createdAt,"dd/MM/yyyy")),o(4),h(i.type()==="bought"?"Comprado a":"Vendido a"),o(),d("routerLink",R(14,ut,"/tabs/user-detail/"+(i.type()==="bought"?n.sellerData.userId:n.buyerData.userId))),o(2),d("src",i.type()==="bought"?n.sellerData.profilePictureURL:n.buyerData.profilePictureURL,w),o(2),h(i.type()==="bought"?n.sellerData.username:n.buyerData.username)}}function ft(t,e){if(t&1&&(a(0,"ion-list",1),L(1,Ct,24,16,"div",3,ht),r()),t&2){let n=p();o(),H(n.sales())}}var ut,ht,ot,at=O(()=>{"use strict";C();Y();gt();q();lt();C();ut=t=>[t],ht=(t,e)=>e._id;ot=(()=>{let e=class e{constructor(){this.sales=I(null),this.type=I("bought")}ngOnInit(){}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=b({type:e,selectors:[["app-history-list"]],inputs:{sales:[1,"sales"],type:[1,"type"]},decls:2,vars:1,consts:[[1,"container-empty"],["lines","none",1,"sales-list"],[1,"text-empty"],[1,"sale-item"],[1,"post-data"],["slot","start",1,"post-image"],["alt","Imagen principal del anuncio",3,"src"],[1,"labels-container"],[1,"post-title"],[1,"post-condition"],[1,"post-price"],[1,"sale-data"],[1,"sale-date"],[1,"user-data-wrapper"],[1,"user-data-label"],[1,"user-data",3,"routerLink"],[1,"user-avatar"],["alt","Avatar del usuario",3,"src"],[1,"user-name"]],template:function(s,l){if(s&1&&y(0,_t,3,1,"div",0)(1,ft,3,0,"ion-list",1),s&2){let m;_(((m=l.sales())==null?null:m.length)===0?0:1)}},dependencies:[V,U,G,N,Q,v,X,et],styles:[".container-empty[_ngcontent-%COMP%]{margin-top:4rem;display:flex;flex-direction:column;align-items:center;justify-content:center}.container-empty[_ngcontent-%COMP%]   .text-empty[_ngcontent-%COMP%]{color:var(--ion-color-medium-tint);font-size:var(--body-large-size, 1rem);font-style:normal;font-weight:var(--body-large-weight, 400);line-height:var(--body-large-line-height, 1.5rem);letter-spacing:var(--body-large-tracking, .03125rem)}ion-list.sales-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]{--padding-start: 0;display:flex;flex-direction:row;gap:1rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem;width:60%}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]   ion-thumbnail.post-image[_ngcontent-%COMP%]{--border-radius: 4px;min-height:64px;min-width:64px}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-size:var(--body-large-size, 1rem);font-style:normal;font-weight:var(--body-large-weight, 400);line-height:var(1rem);letter-spacing:var(--body-large-tracking, .03125rem)}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]   .post-condition[_ngcontent-%COMP%]{font-size:var(--label-large-size, .875rem);font-style:normal;font-weight:var(--label-large-weight-prominent, 600);line-height:var(--label-large-line-height, 1.25rem);letter-spacing:var(--label-large-tracking, .00625rem)}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]   .post-price[_ngcontent-%COMP%]{font-size:1rem;font-style:normal;font-weight:600;line-height:1.625rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]{width:40%;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-end}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .sale-date[_ngcontent-%COMP%]{text-align:right;font-size:var(--label-large-size, .875rem);font-style:normal;font-weight:var(--label-large-weight-prominent, 600);line-height:var(--label-large-line-height, 1.25rem);letter-spacing:var(--label-large-tracking, .00625rem)}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .user-data-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .user-data-wrapper[_ngcontent-%COMP%]   .user-data-label[_ngcontent-%COMP%]{color:var(--ion-color-medium-tint);text-align:right;font-size:var(--label-large-size, .875rem);font-style:normal;font-weight:var(--label-large-weight, 400);line-height:var(--label-large-line-height, 1.25rem);letter-spacing:var(--label-large-tracking, .00625rem)}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .user-data-wrapper[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem;cursor:pointer}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .user-data-wrapper[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:2rem;height:2rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .user-data-wrapper[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:var(--label-medium-size, .75rem);font-style:normal;font-weight:var(--label-medium-weight-prominent, 600);line-height:var(--label-medium-line-height, 1rem);letter-spacing:var(--label-medium-tracking, .03125rem)}"]});let t=e;return t})()});var rt,st=O(()=>{"use strict";C();pt();mt();C();rt=(()=>{let e=class e{constructor(){this.saleRepository=f(nt),this.authService=f(Z),this.boughtItems=E({request:()=>this.authService.authState().userId,loader:s=>x(this,[s],function*({request:i}){var l,m;if(!i)return[];try{return(l=yield this.saleRepository.getSalesByBuyerId(i))!=null?l:[]}catch(u){return this.errorMessage.set((m=u==null?void 0:u.message)!=null?m:"Unknown error"),[]}})}),this.soldItems=E({request:()=>this.authService.authState().userId,loader:s=>x(this,[s],function*({request:i}){var l,m;if(!i)return[];try{return(l=yield this.saleRepository.getSalesBySellerId(i))!=null?l:[]}catch(u){return this.errorMessage.set((m=u==null?void 0:u.message)!=null?m:"Unknown error"),[]}})}),this.errorMessage=P(""),this.historyState=M(()=>{var i,s;return{boughtItems:(i=this.boughtItems.value())!=null?i:[],soldItems:(s=this.soldItems.value())!=null?s:[],loading:this.boughtItems.isLoading()||this.soldItems.isLoading(),errorMessage:this.errorMessage()}})}reloadResources(){this.boughtItems.reload(),this.soldItems.reload()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})()});function yt(t,e){t&1&&(a(0,"div",7),g(1,"ion-spinner",8),r())}function Mt(t,e){if(t&1&&g(0,"app-history-list",9),t&2){let n=p(2);d("sales",n.boughtItems())}}function Pt(t,e){if(t&1&&g(0,"app-history-list",10),t&2){let n=p(2);d("sales",n.soldItems())}}function bt(t,e){if(t&1&&y(0,Mt,1,1,"app-history-list",9)(1,Pt,1,1,"app-history-list",10),t&2){let n=p();_(n.selectedTab()==="boughtItems"?0:-1),o(),_(n.selectedTab()==="soldItems"?1:-1)}}var Kt,vt=O(()=>{C();q();ct();Y();dt();at();st();C();Kt=(()=>{let e=class e{constructor(){this.historyService=f(rt),this.boughtItems=D(()=>this.historyService.historyState().boughtItems),this.soldItems=D(()=>this.historyService.historyState().soldItems),this.loading=M(()=>this.historyService.historyState().loading),this.errorMessage=M(()=>this.historyService.historyState().errorMessage),this.selectedTab=P("boughtItems")}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=b({type:e,selectors:[["app-history"]],decls:13,vars:7,consts:[[3,"translucent"],["type","menu","title","Historial"],[3,"fullscreen"],[1,"container"],[1,"top-tabs-container"],[1,"bought-tab",3,"click"],[1,"sold-tab",3,"click"],[1,"loading-spinner-container"],["name","crescent"],["type","bought",3,"sales"],["type","sold",3,"sales"]],template:function(s,l){s&1&&(a(0,"ion-header",0),g(1,"app-toolbar",1),r(),a(2,"ion-content",2)(3,"div",3)(4,"div",4)(5,"div",5),T("click",function(){return l.selectedTab.set("boughtItems")}),a(6,"ion-text"),c(7,"Compras"),r()(),a(8,"div",6),T("click",function(){return l.selectedTab.set("soldItems")}),a(9,"ion-text"),c(10,"Ventas"),r()()(),y(11,yt,2,0,"div",7)(12,bt,2,2),r()()),s&2&&(d("translucent",!0),o(2),d("fullscreen",!0),o(4),S("selected",l.selectedTab()==="boughtItems"),o(3),S("selected",l.selectedTab()==="soldItems"),o(2),_(l.loading()?11:12))},dependencies:[W,ot,v,tt,J,K,B,$],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}.container[_ngcontent-%COMP%]   .loading-spinner-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;padding:1rem 0}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;min-height:4rem;min-width:100dvw;margin-left:-1.5rem;margin-bottom:3rem}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%] > .bought-tab[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%] > .sold-tab[_ngcontent-%COMP%]{flex:1 0 0;display:flex;align-items:center;justify-content:center;color:var(--ion-color-medium);cursor:pointer}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .bought-tab[_ngcontent-%COMP%]{border-right:1px solid var(--ion-color-dark-tint)}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .sold-tab[_ngcontent-%COMP%]{border-left:1px solid var(--ion-color-dark-tint)}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:var(--ion-color-light)}"]});let t=e;return t})()});vt();export{Kt as HistoryPage};
