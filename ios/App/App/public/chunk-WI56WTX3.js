import{A as wt,B as ie,D as V,H as _t,I as St,J as $e,P as Re,R as Et,S as It,Y as ye,Z as xt,a as pt,ga as At,hb as De,ib as We,kb as Rt,l as Ae,nb as ee,v as bt,wb as Dt,xb as nn,z as se}from"./chunk-S4NGLO4I.js";import{a as xe,b as mt,c as he,e as gt,f as Q,g as tn,h as rn,j,k as ae,l as oe,m as ve,o as E}from"./chunk-FIPIWZQS.js";var Pt,Ot=Q(()=>{"use strict";ee();Pt=new ie("Auth")});var Ct,Lt=Q(()=>{"use strict";ee();Ct=new ie("UserRepository")});var ge,me,on,an,sn,pe,Nt,Pe,Tt,Ut,Ye,_n,cn,un,fn,ln,ze,Sn,Mt=Q(()=>{"use strict";ge=function(c){return c.Unimplemented="UNIMPLEMENTED",c.Unavailable="UNAVAILABLE",c}(ge||{}),me=class extends Error{constructor(r,f,h){super(r),this.message=r,this.code=f,this.data=h}},on=c=>{var r,f;return c!=null&&c.androidBridge?"android":!((f=(r=c==null?void 0:c.webkit)===null||r===void 0?void 0:r.messageHandlers)===null||f===void 0)&&f.bridge?"ios":"web"},an=c=>{let r=c.CapacitorCustomPlatform||null,f=c.Capacitor||{},h=f.Plugins=f.Plugins||{},_=()=>r!==null?r.name:on(c),s=()=>_()!=="web",d=R=>{let m=O.get(R);return!!(m!=null&&m.platforms.has(_())||w(R))},w=R=>{var m;return(m=f.PluginHeaders)===null||m===void 0?void 0:m.find(x=>x.name===R)},p=R=>c.console.error(R),O=new Map,M=(R,m={})=>{let x=O.get(R);if(x)return console.warn(`Capacitor plugin "${R}" already registered. Cannot register plugins twice.`),x.proxy;let T=_(),N=w(R),$,W=()=>E(void 0,null,function*(){return!$&&T in m?$=typeof m[T]=="function"?$=yield m[T]():$=m[T]:r!==null&&!$&&"web"in m&&($=typeof m.web=="function"?$=yield m.web():$=m.web),$}),J=(I,A)=>{var U,k;if(N){let Y=N==null?void 0:N.methods.find(B=>A===B.name);if(Y)return Y.rtype==="promise"?B=>f.nativePromise(R,A.toString(),B):(B,q)=>f.nativeCallback(R,A.toString(),B,q);if(I)return(U=I[A])===null||U===void 0?void 0:U.bind(I)}else{if(I)return(k=I[A])===null||k===void 0?void 0:k.bind(I);throw new me(`"${R}" plugin is not implemented on ${T}`,ge.Unimplemented)}},F=I=>{let A,U=(...k)=>{let Y=W().then(B=>{let q=J(B,I);if(q){let Z=q(...k);return A=Z==null?void 0:Z.remove,Z}else throw new me(`"${R}.${I}()" is not implemented on ${T}`,ge.Unimplemented)});return I==="addListener"&&(Y.remove=()=>E(void 0,null,function*(){return A()})),Y};return U.toString=()=>`${I.toString()}() { [capacitor code] }`,Object.defineProperty(U,"name",{value:I,writable:!1,configurable:!1}),U},ce=F("addListener"),X=F("removeListener"),b=(I,A)=>{let U=ce({eventName:I},A),k=()=>E(void 0,null,function*(){let B=yield U;X({eventName:I,callbackId:B},A)}),Y=new Promise(B=>U.then(()=>B({remove:k})));return Y.remove=()=>E(void 0,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield k()}),Y},P=new Proxy({},{get(I,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?b:ce;case"removeListener":return X;default:return F(A)}}});return h[R]=P,O.set(R,{name:R,proxy:P,platforms:new Set([...Object.keys(m),...N?[T]:[]])}),P};return f.convertFileSrc||(f.convertFileSrc=R=>R),f.getPlatform=_,f.handleError=p,f.isNativePlatform=s,f.isPluginAvailable=d,f.registerPlugin=M,f.Exception=me,f.DEBUG=!!f.DEBUG,f.isLoggingEnabled=!!f.isLoggingEnabled,f},sn=c=>c.Capacitor=an(c),pe=sn(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Nt=pe.registerPlugin,Pe=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(r,f){let h=!1;this.listeners[r]||(this.listeners[r]=[],h=!0),this.listeners[r].push(f);let s=this.windowListeners[r];s&&!s.registered&&this.addWindowListener(s),h&&this.sendRetainedArgumentsForEvent(r);let d=()=>E(this,null,function*(){return this.removeListener(r,f)});return Promise.resolve({remove:d})}removeAllListeners(){return E(this,null,function*(){this.listeners={};for(let r in this.windowListeners)this.removeWindowListener(this.windowListeners[r]);this.windowListeners={}})}notifyListeners(r,f,h){let _=this.listeners[r];if(!_){if(h){let s=this.retainedEventArguments[r];s||(s=[]),s.push(f),this.retainedEventArguments[r]=s}return}_.forEach(s=>s(f))}hasListeners(r){return!!this.listeners[r].length}registerWindowListener(r,f){this.windowListeners[f]={registered:!1,windowEventName:r,pluginEventName:f,handler:h=>{this.notifyListeners(f,h)}}}unimplemented(r="not implemented"){return new pe.Exception(r,ge.Unimplemented)}unavailable(r="not available"){return new pe.Exception(r,ge.Unavailable)}removeListener(r,f){return E(this,null,function*(){let h=this.listeners[r];if(!h)return;let _=h.indexOf(f);this.listeners[r].splice(_,1),this.listeners[r].length||this.removeWindowListener(this.windowListeners[r])})}addWindowListener(r){window.addEventListener(r.windowEventName,r.handler),r.registered=!0}removeWindowListener(r){r&&(window.removeEventListener(r.windowEventName,r.handler),r.registered=!1)}sendRetainedArgumentsForEvent(r){let f=this.retainedEventArguments[r];f&&(delete this.retainedEventArguments[r],f.forEach(h=>{this.notifyListeners(r,h)}))}},Tt=c=>encodeURIComponent(c).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ut=c=>c.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),Ye=class extends Pe{getCookies(){return E(this,null,function*(){let r=document.cookie,f={};return r.split(";").forEach(h=>{if(h.length<=0)return;let[_,s]=h.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");_=Ut(_).trim(),s=Ut(s).trim(),f[_]=s}),f})}setCookie(r){return E(this,null,function*(){try{let f=Tt(r.key),h=Tt(r.value),_=`; expires=${(r.expires||"").replace("expires=","")}`,s=(r.path||"/").replace("path=",""),d=r.url!=null&&r.url.length>0?`domain=${r.url}`:"";document.cookie=`${f}=${h||""}${_}; path=${s}; ${d};`}catch(f){return Promise.reject(f)}})}deleteCookie(r){return E(this,null,function*(){try{document.cookie=`${r.key}=; Max-Age=0`}catch(f){return Promise.reject(f)}})}clearCookies(){return E(this,null,function*(){try{let r=document.cookie.split(";")||[];for(let f of r)document.cookie=f.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(r){return Promise.reject(r)}})}clearAllCookies(){return E(this,null,function*(){try{yield this.clearCookies()}catch(r){return Promise.reject(r)}})}},_n=Nt("CapacitorCookies",{web:()=>new Ye}),cn=c=>E(void 0,null,function*(){return new Promise((r,f)=>{let h=new FileReader;h.onload=()=>{let _=h.result;r(_.indexOf(",")>=0?_.split(",")[1]:_)},h.onerror=_=>f(_),h.readAsDataURL(c)})}),un=(c={})=>{let r=Object.keys(c);return Object.keys(c).map(_=>_.toLocaleLowerCase()).reduce((_,s,d)=>(_[s]=c[r[d]],_),{})},fn=(c,r=!0)=>c?Object.entries(c).reduce((h,_)=>{let[s,d]=_,w,p;return Array.isArray(d)?(p="",d.forEach(O=>{w=r?encodeURIComponent(O):O,p+=`${s}=${w}&`}),p.slice(0,-1)):(w=r?encodeURIComponent(d):d,p=`${s}=${w}`),`${h}&${p}`},"").substr(1):null,ln=(c,r={})=>{let f=Object.assign({method:c.method||"GET",headers:c.headers},r),_=un(c.headers)["content-type"]||"";if(typeof c.data=="string")f.body=c.data;else if(_.includes("application/x-www-form-urlencoded")){let s=new URLSearchParams;for(let[d,w]of Object.entries(c.data||{}))s.set(d,w);f.body=s.toString()}else if(_.includes("multipart/form-data")||c.data instanceof FormData){let s=new FormData;if(c.data instanceof FormData)c.data.forEach((w,p)=>{s.append(p,w)});else for(let w of Object.keys(c.data))s.append(w,c.data[w]);f.body=s;let d=new Headers(f.headers);d.delete("content-type"),f.headers=d}else(_.includes("application/json")||typeof c.data=="object")&&(f.body=JSON.stringify(c.data));return f},ze=class extends Pe{request(r){return E(this,null,function*(){let f=ln(r,r.webFetchExtra),h=fn(r.params,r.shouldEncodeUrlParams),_=h?`${r.url}?${h}`:r.url,s=yield fetch(_,f),d=s.headers.get("content-type")||"",{responseType:w="text"}=s.ok?r:{};d.includes("application/json")&&(w="json");let p,O;switch(w){case"arraybuffer":case"blob":O=yield s.blob(),p=yield cn(O);break;case"json":p=yield s.json();break;case"document":case"text":default:p=yield s.text()}let M={};return s.headers.forEach((R,m)=>{M[m]=R}),{data:p,headers:M,status:s.status,url:s.url}})}get(r){return E(this,null,function*(){return this.request(Object.assign(Object.assign({},r),{method:"GET"}))})}post(r){return E(this,null,function*(){return this.request(Object.assign(Object.assign({},r),{method:"POST"}))})}put(r){return E(this,null,function*(){return this.request(Object.assign(Object.assign({},r),{method:"PUT"}))})}patch(r){return E(this,null,function*(){return this.request(Object.assign(Object.assign({},r),{method:"PATCH"}))})}delete(r){return E(this,null,function*(){return this.request(Object.assign(Object.assign({},r),{method:"DELETE"}))})}},Sn=Nt("CapacitorHttp",{web:()=>new ze})});var Ft=tn((Bt,Ke)=>{"use strict";(function(c){if(typeof Bt=="object"&&typeof Ke<"u")Ke.exports=c();else if(typeof define=="function"&&define.amd)define([],c);else{var r;typeof window<"u"?r=window:typeof global<"u"?r=global:typeof self<"u"?r=self:r=this,r.localforage=c()}})(function(){var c,r,f;return function h(_,s,d){function w(M,R){if(!s[M]){if(!_[M]){var m=typeof he=="function"&&he;if(!R&&m)return m(M,!0);if(p)return p(M,!0);var x=new Error("Cannot find module '"+M+"'");throw x.code="MODULE_NOT_FOUND",x}var T=s[M]={exports:{}};_[M][0].call(T.exports,function(N){var $=_[M][1][N];return w($||N)},T,T.exports,h,_,s,d)}return s[M].exports}for(var p=typeof he=="function"&&he,O=0;O<d.length;O++)w(d[O]);return w}({1:[function(h,_,s){(function(d){"use strict";var w=d.MutationObserver||d.WebKitMutationObserver,p;if(w){var O=0,M=new w(N),R=d.document.createTextNode("");M.observe(R,{characterData:!0}),p=function(){R.data=O=++O%2}}else if(!d.setImmediate&&typeof d.MessageChannel<"u"){var m=new d.MessageChannel;m.port1.onmessage=N,p=function(){m.port2.postMessage(0)}}else"document"in d&&"onreadystatechange"in d.document.createElement("script")?p=function(){var W=d.document.createElement("script");W.onreadystatechange=function(){N(),W.onreadystatechange=null,W.parentNode.removeChild(W),W=null},d.document.documentElement.appendChild(W)}:p=function(){setTimeout(N,0)};var x,T=[];function N(){x=!0;for(var W,J,F=T.length;F;){for(J=T,T=[],W=-1;++W<F;)J[W]();F=T.length}x=!1}_.exports=$;function $(W){T.push(W)===1&&!x&&p()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(h,_,s){"use strict";var d=h(1);function w(){}var p={},O=["REJECTED"],M=["FULFILLED"],R=["PENDING"];_.exports=m;function m(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=R,this.queue=[],this.outcome=void 0,b!==w&&$(this,b)}m.prototype.catch=function(b){return this.then(null,b)},m.prototype.then=function(b,P){if(typeof b!="function"&&this.state===M||typeof P!="function"&&this.state===O)return this;var I=new this.constructor(w);if(this.state!==R){var A=this.state===M?b:P;T(I,A,this.outcome)}else this.queue.push(new x(I,b,P));return I};function x(b,P,I){this.promise=b,typeof P=="function"&&(this.onFulfilled=P,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}x.prototype.callFulfilled=function(b){p.resolve(this.promise,b)},x.prototype.otherCallFulfilled=function(b){T(this.promise,this.onFulfilled,b)},x.prototype.callRejected=function(b){p.reject(this.promise,b)},x.prototype.otherCallRejected=function(b){T(this.promise,this.onRejected,b)};function T(b,P,I){d(function(){var A;try{A=P(I)}catch(U){return p.reject(b,U)}A===b?p.reject(b,new TypeError("Cannot resolve promise with itself")):p.resolve(b,A)})}p.resolve=function(b,P){var I=W(N,P);if(I.status==="error")return p.reject(b,I.value);var A=I.value;if(A)$(b,A);else{b.state=M,b.outcome=P;for(var U=-1,k=b.queue.length;++U<k;)b.queue[U].callFulfilled(P)}return b},p.reject=function(b,P){b.state=O,b.outcome=P;for(var I=-1,A=b.queue.length;++I<A;)b.queue[I].callRejected(P);return b};function N(b){var P=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof P=="function")return function(){P.apply(b,arguments)}}function $(b,P){var I=!1;function A(B){I||(I=!0,p.reject(b,B))}function U(B){I||(I=!0,p.resolve(b,B))}function k(){P(U,A)}var Y=W(k);Y.status==="error"&&A(Y.value)}function W(b,P){var I={};try{I.value=b(P),I.status="success"}catch(A){I.status="error",I.value=A}return I}m.resolve=J;function J(b){return b instanceof this?b:p.resolve(new this(w),b)}m.reject=F;function F(b){var P=new this(w);return p.reject(P,b)}m.all=ce;function ce(b){var P=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=b.length,A=!1;if(!I)return this.resolve([]);for(var U=new Array(I),k=0,Y=-1,B=new this(w);++Y<I;)q(b[Y],Y);return B;function q(Z,Se){P.resolve(Z).then(Ce,function(ue){A||(A=!0,p.reject(B,ue))});function Ce(ue){U[Se]=ue,++k===I&&!A&&(A=!0,p.resolve(B,U))}}}m.race=X;function X(b){var P=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=b.length,A=!1;if(!I)return this.resolve([]);for(var U=-1,k=new this(w);++U<I;)Y(b[U]);return k;function Y(B){P.resolve(B).then(function(q){A||(A=!0,p.resolve(k,q))},function(q){A||(A=!0,p.reject(k,q))})}}},{1:1}],3:[function(h,_,s){(function(d){"use strict";typeof d.Promise!="function"&&(d.Promise=h(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(h,_,s){"use strict";var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function w(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function p(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var O=p();function M(){try{if(!O||!O.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||n)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function R(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(o){if(o.name!=="TypeError")throw o;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,i=new t,a=0;a<e.length;a+=1)i.append(e[a]);return i.getBlob(n.type)}}typeof Promise>"u"&&h(3);var m=Promise;function x(e,n){n&&e.then(function(t){n(null,t)},function(t){n(t)})}function T(e,n,t){typeof n=="function"&&e.then(n),typeof t=="function"&&e.catch(t)}function N(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function $(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var W="local-forage-detect-blob-support",J=void 0,F={},ce=Object.prototype.toString,X="readonly",b="readwrite";function P(e){for(var n=e.length,t=new ArrayBuffer(n),i=new Uint8Array(t),a=0;a<n;a++)i[a]=e.charCodeAt(a);return t}function I(e){return new m(function(n){var t=e.transaction(W,b),i=R([""]);t.objectStore(W).put(i,"key"),t.onabort=function(a){a.preventDefault(),a.stopPropagation(),n(!1)},t.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),o=navigator.userAgent.match(/Edge\//);n(o||!a||parseInt(a[1],10)>=43)}}).catch(function(){return!1})}function A(e){return typeof J=="boolean"?m.resolve(J):I(e).then(function(n){return J=n,J})}function U(e){var n=F[e.name],t={};t.promise=new m(function(i,a){t.resolve=i,t.reject=a}),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then(function(){return t.promise}):n.dbReady=t.promise}function k(e){var n=F[e.name],t=n.deferredOperations.pop();if(t)return t.resolve(),t.promise}function Y(e,n){var t=F[e.name],i=t.deferredOperations.pop();if(i)return i.reject(n),i.promise}function B(e,n){return new m(function(t,i){if(F[e.name]=F[e.name]||Je(),e.db)if(n)U(e),e.db.close();else return t(e.db);var a=[e.name];n&&a.push(e.version);var o=O.open.apply(O,a);n&&(o.onupgradeneeded=function(u){var l=o.result;try{l.createObjectStore(e.storeName),u.oldVersion<=1&&l.createObjectStore(W)}catch(v){if(v.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+u.oldVersion+" to version "+u.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw v}}),o.onerror=function(u){u.preventDefault(),i(o.error)},o.onsuccess=function(){var u=o.result;u.onversionchange=function(l){l.target.close()},t(u),k(e)}})}function q(e){return B(e,!1)}function Z(e){return B(e,!0)}function Se(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,a=e.version>e.db.version;if(i&&(e.version!==n&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),a||t){if(t){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function Ce(e){return new m(function(n,t){var i=new FileReader;i.onerror=t,i.onloadend=function(a){var o=btoa(a.target.result||"");n({__local_forage_encoded_blob:!0,data:o,type:e.type})},i.readAsBinaryString(e)})}function ue(e){var n=P(atob(e.data));return R([n],{type:e.type})}function Ge(e){return e&&e.__local_forage_encoded_blob}function rr(e){var n=this,t=n._initReady().then(function(){var i=F[n._dbInfo.name];if(i&&i.dbReady)return i.dbReady});return T(t,e,e),t}function nr(e){U(e);for(var n=F[e.name],t=n.forages,i=0;i<t.length;i++){var a=t[i];a._dbInfo.db&&(a._dbInfo.db.close(),a._dbInfo.db=null)}return e.db=null,q(e).then(function(o){return e.db=o,Se(e)?Z(e):o}).then(function(o){e.db=n.db=o;for(var u=0;u<t.length;u++)t[u]._dbInfo.db=o}).catch(function(o){throw Y(e,o),o})}function te(e,n,t,i){i===void 0&&(i=1);try{var a=e.db.transaction(e.storeName,n);t(null,a)}catch(o){if(i>0&&(!e.db||o.name==="InvalidStateError"||o.name==="NotFoundError"))return m.resolve().then(function(){if(!e.db||o.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),Z(e)}).then(function(){return nr(e).then(function(){te(e,n,t,i-1)})}).catch(t);t(o)}}function Je(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function or(e){var n=this,t={db:null};if(e)for(var i in e)t[i]=e[i];var a=F[t.name];a||(a=Je(),F[t.name]=a),a.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=rr);var o=[];function u(){return m.resolve()}for(var l=0;l<a.forages.length;l++){var v=a.forages[l];v!==n&&o.push(v._initReady().catch(u))}var y=a.forages.slice(0);return m.all(o).then(function(){return t.db=a.db,q(t)}).then(function(g){return t.db=g,Se(t,n._defaultConfig.version)?Z(t):g}).then(function(g){t.db=a.db=g,n._dbInfo=t;for(var S=0;S<y.length;S++){var D=y[S];D!==n&&(D._dbInfo.db=t.db,D._dbInfo.version=t.version)}})}function ir(e,n){var t=this;e=N(e);var i=new m(function(a,o){t.ready().then(function(){te(t._dbInfo,X,function(u,l){if(u)return o(u);try{var v=l.objectStore(t._dbInfo.storeName),y=v.get(e);y.onsuccess=function(){var g=y.result;g===void 0&&(g=null),Ge(g)&&(g=ue(g)),a(g)},y.onerror=function(){o(y.error)}}catch(g){o(g)}})}).catch(o)});return x(i,n),i}function ar(e,n){var t=this,i=new m(function(a,o){t.ready().then(function(){te(t._dbInfo,X,function(u,l){if(u)return o(u);try{var v=l.objectStore(t._dbInfo.storeName),y=v.openCursor(),g=1;y.onsuccess=function(){var S=y.result;if(S){var D=S.value;Ge(D)&&(D=ue(D));var C=e(D,S.key,g++);C!==void 0?a(C):S.continue()}else a()},y.onerror=function(){o(y.error)}}catch(S){o(S)}})}).catch(o)});return x(i,n),i}function sr(e,n,t){var i=this;e=N(e);var a=new m(function(o,u){var l;i.ready().then(function(){return l=i._dbInfo,ce.call(n)==="[object Blob]"?A(l.db).then(function(v){return v?n:Ce(n)}):n}).then(function(v){te(i._dbInfo,b,function(y,g){if(y)return u(y);try{var S=g.objectStore(i._dbInfo.storeName);v===null&&(v=void 0);var D=S.put(v,e);g.oncomplete=function(){v===void 0&&(v=null),o(v)},g.onabort=g.onerror=function(){var C=D.error?D.error:D.transaction.error;u(C)}}catch(C){u(C)}})}).catch(u)});return x(a,t),a}function cr(e,n){var t=this;e=N(e);var i=new m(function(a,o){t.ready().then(function(){te(t._dbInfo,b,function(u,l){if(u)return o(u);try{var v=l.objectStore(t._dbInfo.storeName),y=v.delete(e);l.oncomplete=function(){a()},l.onerror=function(){o(y.error)},l.onabort=function(){var g=y.error?y.error:y.transaction.error;o(g)}}catch(g){o(g)}})}).catch(o)});return x(i,n),i}function ur(e){var n=this,t=new m(function(i,a){n.ready().then(function(){te(n._dbInfo,b,function(o,u){if(o)return a(o);try{var l=u.objectStore(n._dbInfo.storeName),v=l.clear();u.oncomplete=function(){i()},u.onabort=u.onerror=function(){var y=v.error?v.error:v.transaction.error;a(y)}}catch(y){a(y)}})}).catch(a)});return x(t,e),t}function fr(e){var n=this,t=new m(function(i,a){n.ready().then(function(){te(n._dbInfo,X,function(o,u){if(o)return a(o);try{var l=u.objectStore(n._dbInfo.storeName),v=l.count();v.onsuccess=function(){i(v.result)},v.onerror=function(){a(v.error)}}catch(y){a(y)}})}).catch(a)});return x(t,e),t}function lr(e,n){var t=this,i=new m(function(a,o){if(e<0){a(null);return}t.ready().then(function(){te(t._dbInfo,X,function(u,l){if(u)return o(u);try{var v=l.objectStore(t._dbInfo.storeName),y=!1,g=v.openKeyCursor();g.onsuccess=function(){var S=g.result;if(!S){a(null);return}e===0||y?a(S.key):(y=!0,S.advance(e))},g.onerror=function(){o(g.error)}}catch(S){o(S)}})}).catch(o)});return x(i,n),i}function dr(e){var n=this,t=new m(function(i,a){n.ready().then(function(){te(n._dbInfo,X,function(o,u){if(o)return a(o);try{var l=u.objectStore(n._dbInfo.storeName),v=l.openKeyCursor(),y=[];v.onsuccess=function(){var g=v.result;if(!g){i(y);return}y.push(g.key),g.continue()},v.onerror=function(){a(v.error)}}catch(g){a(g)}})}).catch(a)});return x(t,e),t}function hr(e,n){n=$.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,a;if(!e.name)a=m.reject("Invalid arguments");else{var o=e.name===t.name&&i._dbInfo.db,u=o?m.resolve(i._dbInfo.db):q(e).then(function(l){var v=F[e.name],y=v.forages;v.db=l;for(var g=0;g<y.length;g++)y[g]._dbInfo.db=l;return l});e.storeName?a=u.then(function(l){if(l.objectStoreNames.contains(e.storeName)){var v=l.version+1;U(e);var y=F[e.name],g=y.forages;l.close();for(var S=0;S<g.length;S++){var D=g[S];D._dbInfo.db=null,D._dbInfo.version=v}var C=new m(function(L,K){var z=O.open(e.name,v);z.onerror=function(H){var de=z.result;de.close(),K(H)},z.onupgradeneeded=function(){var H=z.result;H.deleteObjectStore(e.storeName)},z.onsuccess=function(){var H=z.result;H.close(),L(H)}});return C.then(function(L){y.db=L;for(var K=0;K<g.length;K++){var z=g[K];z._dbInfo.db=L,k(z._dbInfo)}}).catch(function(L){throw(Y(e,L)||m.resolve()).catch(function(){}),L})}}):a=u.then(function(l){U(e);var v=F[e.name],y=v.forages;l.close();for(var g=0;g<y.length;g++){var S=y[g];S._dbInfo.db=null}var D=new m(function(C,L){var K=O.deleteDatabase(e.name);K.onerror=function(){var z=K.result;z&&z.close(),L(K.error)},K.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},K.onsuccess=function(){var z=K.result;z&&z.close(),C(z)}});return D.then(function(C){v.db=C;for(var L=0;L<y.length;L++){var K=y[L];k(K._dbInfo)}}).catch(function(C){throw(Y(e,C)||m.resolve()).catch(function(){}),C})})}return x(a,n),a}var vr={_driver:"asyncStorage",_initStorage:or,_support:M(),iterate:ar,getItem:ir,setItem:sr,removeItem:cr,clear:ur,length:fr,key:lr,keys:dr,dropInstance:hr};function yr(){return typeof openDatabase=="function"}var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mr="~~local_forage_type~",Qe=/^~~local_forage_type~([^~]+)~/,Ee="__lfsc__:",Le=Ee.length,Te="arbf",Ue="blob",Xe="si08",Ze="ui08",et="uic8",tt="si16",rt="si32",nt="ur16",ot="ui32",it="fl32",at="fl64",st=Le+Te.length,ct=Object.prototype.toString;function ut(e){var n=e.length*.75,t=e.length,i,a=0,o,u,l,v;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var y=new ArrayBuffer(n),g=new Uint8Array(y);for(i=0;i<t;i+=4)o=re.indexOf(e[i]),u=re.indexOf(e[i+1]),l=re.indexOf(e[i+2]),v=re.indexOf(e[i+3]),g[a++]=o<<2|u>>4,g[a++]=(u&15)<<4|l>>2,g[a++]=(l&3)<<6|v&63;return y}function Ne(e){var n=new Uint8Array(e),t="",i;for(i=0;i<n.length;i+=3)t+=re[n[i]>>2],t+=re[(n[i]&3)<<4|n[i+1]>>4],t+=re[(n[i+1]&15)<<2|n[i+2]>>6],t+=re[n[i+2]&63];return n.length%3===2?t=t.substring(0,t.length-1)+"=":n.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function gr(e,n){var t="";if(e&&(t=ct.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&ct.call(e.buffer)==="[object ArrayBuffer]")){var i,a=Ee;e instanceof ArrayBuffer?(i=e,a+=Te):(i=e.buffer,t==="[object Int8Array]"?a+=Xe:t==="[object Uint8Array]"?a+=Ze:t==="[object Uint8ClampedArray]"?a+=et:t==="[object Int16Array]"?a+=tt:t==="[object Uint16Array]"?a+=nt:t==="[object Int32Array]"?a+=rt:t==="[object Uint32Array]"?a+=ot:t==="[object Float32Array]"?a+=it:t==="[object Float64Array]"?a+=at:n(new Error("Failed to get type for BinaryArray"))),n(a+Ne(i))}else if(t==="[object Blob]"){var o=new FileReader;o.onload=function(){var u=mr+e.type+"~"+Ne(this.result);n(Ee+Ue+u)},o.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(u){console.error("Couldn't convert value into a JSON string: ",e),n(null,u)}}function pr(e){if(e.substring(0,Le)!==Ee)return JSON.parse(e);var n=e.substring(st),t=e.substring(Le,st),i;if(t===Ue&&Qe.test(n)){var a=n.match(Qe);i=a[1],n=n.substring(a[0].length)}var o=ut(n);switch(t){case Te:return o;case Ue:return R([o],{type:i});case Xe:return new Int8Array(o);case Ze:return new Uint8Array(o);case et:return new Uint8ClampedArray(o);case tt:return new Int16Array(o);case nt:return new Uint16Array(o);case rt:return new Int32Array(o);case ot:return new Uint32Array(o);case it:return new Float32Array(o);case at:return new Float64Array(o);default:throw new Error("Unkown type: "+t)}}var Me={serialize:gr,deserialize:pr,stringToBuffer:ut,bufferToString:Ne};function ft(e,n,t,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,i)}function br(e){var n=this,t={db:null};if(e)for(var i in e)t[i]=typeof e[i]!="string"?e[i].toString():e[i];var a=new m(function(o,u){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(l){return u(l)}t.db.transaction(function(l){ft(l,t,function(){n._dbInfo=t,o()},function(v,y){u(y)})},u)});return t.serializer=Me,a}function ne(e,n,t,i,a,o){e.executeSql(t,i,a,function(u,l){l.code===l.SYNTAX_ERR?u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(v,y){y.rows.length?o(v,l):ft(v,n,function(){v.executeSql(t,i,a,o)},o)},o):o(u,l)},o)}function wr(e,n){var t=this;e=N(e);var i=new m(function(a,o){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(l){ne(l,u,"SELECT * FROM "+u.storeName+" WHERE key = ? LIMIT 1",[e],function(v,y){var g=y.rows.length?y.rows.item(0).value:null;g&&(g=u.serializer.deserialize(g)),a(g)},function(v,y){o(y)})})}).catch(o)});return x(i,n),i}function _r(e,n){var t=this,i=new m(function(a,o){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(l){ne(l,u,"SELECT * FROM "+u.storeName,[],function(v,y){for(var g=y.rows,S=g.length,D=0;D<S;D++){var C=g.item(D),L=C.value;if(L&&(L=u.serializer.deserialize(L)),L=e(L,C.key,D+1),L!==void 0){a(L);return}}a()},function(v,y){o(y)})})}).catch(o)});return x(i,n),i}function lt(e,n,t,i){var a=this;e=N(e);var o=new m(function(u,l){a.ready().then(function(){n===void 0&&(n=null);var v=n,y=a._dbInfo;y.serializer.serialize(n,function(g,S){S?l(S):y.db.transaction(function(D){ne(D,y,"INSERT OR REPLACE INTO "+y.storeName+" (key, value) VALUES (?, ?)",[e,g],function(){u(v)},function(C,L){l(L)})},function(D){if(D.code===D.QUOTA_ERR){if(i>0){u(lt.apply(a,[e,v,t,i-1]));return}l(D)}})})}).catch(l)});return x(o,t),o}function Sr(e,n,t){return lt.apply(this,[e,n,t,1])}function Er(e,n){var t=this;e=N(e);var i=new m(function(a,o){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(l){ne(l,u,"DELETE FROM "+u.storeName+" WHERE key = ?",[e],function(){a()},function(v,y){o(y)})})}).catch(o)});return x(i,n),i}function Ir(e){var n=this,t=new m(function(i,a){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(u){ne(u,o,"DELETE FROM "+o.storeName,[],function(){i()},function(l,v){a(v)})})}).catch(a)});return x(t,e),t}function xr(e){var n=this,t=new m(function(i,a){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(u){ne(u,o,"SELECT COUNT(key) as c FROM "+o.storeName,[],function(l,v){var y=v.rows.item(0).c;i(y)},function(l,v){a(v)})})}).catch(a)});return x(t,e),t}function Ar(e,n){var t=this,i=new m(function(a,o){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(l){ne(l,u,"SELECT key FROM "+u.storeName+" WHERE id = ? LIMIT 1",[e+1],function(v,y){var g=y.rows.length?y.rows.item(0).key:null;a(g)},function(v,y){o(y)})})}).catch(o)});return x(i,n),i}function Rr(e){var n=this,t=new m(function(i,a){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(u){ne(u,o,"SELECT key FROM "+o.storeName,[],function(l,v){for(var y=[],g=0;g<v.rows.length;g++)y.push(v.rows.item(g).key);i(y)},function(l,v){a(v)})})}).catch(a)});return x(t,e),t}function Dr(e){return new m(function(n,t){e.transaction(function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(a,o){for(var u=[],l=0;l<o.rows.length;l++)u.push(o.rows.item(l).name);n({db:e,storeNames:u})},function(a,o){t(o)})},function(i){t(i)})})}function Pr(e,n){n=$.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,a;return e.name?a=new m(function(o){var u;e.name===t.name?u=i._dbInfo.db:u=openDatabase(e.name,"","",0),e.storeName?o({db:u,storeNames:[e.storeName]}):o(Dr(u))}).then(function(o){return new m(function(u,l){o.db.transaction(function(v){function y(C){return new m(function(L,K){v.executeSql("DROP TABLE IF EXISTS "+C,[],function(){L()},function(z,H){K(H)})})}for(var g=[],S=0,D=o.storeNames.length;S<D;S++)g.push(y(o.storeNames[S]));m.all(g).then(function(){u()}).catch(function(C){l(C)})},function(v){l(v)})})}):a=m.reject("Invalid arguments"),x(a,n),a}var Or={_driver:"webSQLStorage",_initStorage:br,_support:yr(),iterate:_r,getItem:wr,setItem:Sr,removeItem:Er,clear:Ir,length:xr,key:Ar,keys:Rr,dropInstance:Pr};function Cr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function dt(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}function Lr(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Tr(){return!Lr()||localStorage.length>0}function Ur(e){var n=this,t={};if(e)for(var i in e)t[i]=e[i];return t.keyPrefix=dt(e,n._defaultConfig),Tr()?(n._dbInfo=t,t.serializer=Me,m.resolve()):m.reject()}function Nr(e){var n=this,t=n.ready().then(function(){for(var i=n._dbInfo.keyPrefix,a=localStorage.length-1;a>=0;a--){var o=localStorage.key(a);o.indexOf(i)===0&&localStorage.removeItem(o)}});return x(t,e),t}function Mr(e,n){var t=this;e=N(e);var i=t.ready().then(function(){var a=t._dbInfo,o=localStorage.getItem(a.keyPrefix+e);return o&&(o=a.serializer.deserialize(o)),o});return x(i,n),i}function Br(e,n){var t=this,i=t.ready().then(function(){for(var a=t._dbInfo,o=a.keyPrefix,u=o.length,l=localStorage.length,v=1,y=0;y<l;y++){var g=localStorage.key(y);if(g.indexOf(o)===0){var S=localStorage.getItem(g);if(S&&(S=a.serializer.deserialize(S)),S=e(S,g.substring(u),v++),S!==void 0)return S}}});return x(i,n),i}function Fr(e,n){var t=this,i=t.ready().then(function(){var a=t._dbInfo,o;try{o=localStorage.key(e)}catch{o=null}return o&&(o=o.substring(a.keyPrefix.length)),o});return x(i,n),i}function kr(e){var n=this,t=n.ready().then(function(){for(var i=n._dbInfo,a=localStorage.length,o=[],u=0;u<a;u++){var l=localStorage.key(u);l.indexOf(i.keyPrefix)===0&&o.push(l.substring(i.keyPrefix.length))}return o});return x(t,e),t}function jr(e){var n=this,t=n.keys().then(function(i){return i.length});return x(t,e),t}function $r(e,n){var t=this;e=N(e);var i=t.ready().then(function(){var a=t._dbInfo;localStorage.removeItem(a.keyPrefix+e)});return x(i,n),i}function Wr(e,n,t){var i=this;e=N(e);var a=i.ready().then(function(){n===void 0&&(n=null);var o=n;return new m(function(u,l){var v=i._dbInfo;v.serializer.serialize(n,function(y,g){if(g)l(g);else try{localStorage.setItem(v.keyPrefix+e,y),u(o)}catch(S){(S.name==="QuotaExceededError"||S.name==="NS_ERROR_DOM_QUOTA_REACHED")&&l(S),l(S)}})})});return x(a,t),a}function Yr(e,n){if(n=$.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var i=this,a;return e.name?a=new m(function(o){e.storeName?o(dt(e,i._defaultConfig)):o(e.name+"/")}).then(function(o){for(var u=localStorage.length-1;u>=0;u--){var l=localStorage.key(u);l.indexOf(o)===0&&localStorage.removeItem(l)}}):a=m.reject("Invalid arguments"),x(a,n),a}var zr={_driver:"localStorageWrapper",_initStorage:Ur,_support:Cr(),iterate:Br,getItem:Mr,setItem:Wr,removeItem:$r,clear:Nr,length:jr,key:Fr,keys:kr,dropInstance:Yr},Kr=function(n,t){return n===t||typeof n=="number"&&typeof t=="number"&&isNaN(n)&&isNaN(t)},qr=function(n,t){for(var i=n.length,a=0;a<i;){if(Kr(n[a],t))return!0;a++}return!1},ht=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},le={},vt={},fe={INDEXEDDB:vr,WEBSQL:Or,LOCALSTORAGE:zr},Vr=[fe.INDEXEDDB._driver,fe.WEBSQL._driver,fe.LOCALSTORAGE._driver],Ie=["dropInstance"],Be=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ie),Hr={description:"",driver:Vr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Gr(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function Fe(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&(ht(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]}var Jr=function(){function e(n){w(this,e);for(var t in fe)if(fe.hasOwnProperty(t)){var i=fe[t],a=i._driver;this[t]=a,le[a]||this.defineDriver(i)}this._defaultConfig=Fe({},Hr),this._config=Fe({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":d(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in t){if(i==="storeName"&&(t[i]=t[i].replace(/\W/g,"_")),i==="version"&&typeof t[i]!="number")return new Error("Database version must be a number.");this._config[i]=t[i]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,i,a){var o=new m(function(u,l){try{var v=t._driver,y=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){l(y);return}for(var g=Be.concat("_initStorage"),S=0,D=g.length;S<D;S++){var C=g[S],L=!qr(Ie,C);if((L||t[C])&&typeof t[C]!="function"){l(y);return}}var K=function(){for(var de=function(Zr){return function(){var en=new Error("Method "+Zr+" is not implemented by the current driver"),yt=m.reject(en);return x(yt,arguments[arguments.length-1]),yt}},ke=0,Xr=Ie.length;ke<Xr;ke++){var je=Ie[ke];t[je]||(t[je]=de(je))}};K();var z=function(de){le[v]&&console.info("Redefining LocalForage driver: "+v),le[v]=t,vt[v]=de,u()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(z,l):z(!!t._support):z(!0)}catch(H){l(H)}});return T(o,i,a),o},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,i,a){var o=le[t]?m.resolve(le[t]):m.reject(new Error("Driver not found."));return T(o,i,a),o},e.prototype.getSerializer=function(t){var i=m.resolve(Me);return T(i,t),i},e.prototype.ready=function(t){var i=this,a=i._driverSet.then(function(){return i._ready===null&&(i._ready=i._initDriver()),i._ready});return T(a,t,t),a},e.prototype.setDriver=function(t,i,a){var o=this;ht(t)||(t=[t]);var u=this._getSupportedDrivers(t);function l(){o._config.driver=o.driver()}function v(S){return o._extend(S),l(),o._ready=o._initStorage(o._config),o._ready}function y(S){return function(){var D=0;function C(){for(;D<S.length;){var L=S[D];return D++,o._dbInfo=null,o._ready=null,o.getDriver(L).then(v).catch(C)}l();var K=new Error("No available storage method found.");return o._driverSet=m.reject(K),o._driverSet}return C()}}var g=this._driverSet!==null?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=g.then(function(){var S=u[0];return o._dbInfo=null,o._ready=null,o.getDriver(S).then(function(D){o._driver=D._driver,l(),o._wrapLibraryMethodsWithReady(),o._initDriver=y(u)})}).catch(function(){l();var S=new Error("No available storage method found.");return o._driverSet=m.reject(S),o._driverSet}),T(this._driverSet,i,a),this._driverSet},e.prototype.supports=function(t){return!!vt[t]},e.prototype._extend=function(t){Fe(this,t)},e.prototype._getSupportedDrivers=function(t){for(var i=[],a=0,o=t.length;a<o;a++){var u=t[a];this.supports(u)&&i.push(u)}return i},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,i=Be.length;t<i;t++)Gr(this,Be[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),Qr=new Jr;_.exports=Qr},{3:3}]},{},[4])(4)})});var be,Oe,kt,G,qe=Q(()=>{"use strict";be=rn(Ft()),Oe={SecureStorage:"ionicSecureStorage",IndexedDB:be.default.INDEXEDDB,LocalStorage:be.default.LOCALSTORAGE},kt={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[Oe.SecureStorage,Oe.IndexedDB,Oe.LocalStorage]},G=class{constructor(r=kt){this._db=null,this._secureStorageDriver=null;let f=Object.assign({},kt,r||{});this._config=f}create(){return E(this,null,function*(){let r=be.default.createInstance(this._config);return this._db=r,yield r.setDriver(this._config.driverOrder||[]),this})}defineDriver(r){return E(this,null,function*(){return r._driver===Oe.SecureStorage&&(this._secureStorageDriver=r),be.default.defineDriver(r)})}get driver(){var r;return((r=this._db)===null||r===void 0?void 0:r.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(r){return this.assertDb().getItem(r)}set(r,f){return this.assertDb().setItem(r,f)}remove(r){return this.assertDb().removeItem(r)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(r){return this.assertDb().iterate(r)}setEncryptionKey(r){var f;if(this._secureStorageDriver)(f=this._secureStorageDriver)===null||f===void 0||f.setEncryptionKey(r);else throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available")}}});function dn(c,r){return Dt(c)?new Ve:new G(r)}var jt,Ve,Ln,Wt=Q(()=>{"use strict";nn();ee();ee();qe();qe();jt=new ie("STORAGE_CONFIG_TOKEN"),Ve=class extends G{constructor(){super()}create(){return E(this,null,function*(){return this})}defineDriver(){return E(this,null,function*(){})}get driver(){return"noop"}get(r){return E(this,null,function*(){return null})}set(r,f){return E(this,null,function*(){})}remove(r){return E(this,null,function*(){})}clear(){return E(this,null,function*(){})}length(){return E(this,null,function*(){return 0})}keys(){return E(this,null,function*(){return[]})}forEach(r){return E(this,null,function*(){})}setEncryptionKey(r){}};Ln=(()=>{class c{static forRoot(f=null){return{ngModule:c,providers:[{provide:jt,useValue:f},{provide:G,useFactory:dn,deps:[xt,jt]}]}}}return c.\u0275fac=function(f){return new(f||c)},c.\u0275mod=At({type:c}),c.\u0275inj=wt({}),c})()});var Yt,zt=Q(()=>{"use strict";ee();Yt=new ie("CloudStorage")});function hn(c){c===void 0&&($e(hn),c=V(Et));let r=c.get(It);return f=>new pt(h=>{let _=r.add(),s=!1;function d(){s||(_(),s=!0)}let w=f.subscribe({next:p=>{h.next(p),d()},complete:()=>{h.complete(),d()},error:p=>{h.error(p),d()}});return w.add(()=>{h.unsubscribe(),d()}),w})}function He(c){return c!=null&&c.injector||$e(He),Rt(mt(xe({},c),{loader:void 0,stream:r=>{let f,h=()=>f.unsubscribe();r.abortSignal.addEventListener("abort",h);let _=ye({value:void 0}),s,d=new Promise(p=>s=p);function w(p){_.set(p),s==null||s(_),s=void 0}return f=c.loader(r).subscribe({next:p=>w({value:p}),error:p=>w({error:p}),complete:()=>{s&&w({error:new Error("Resource completed before producing a value")}),r.abortSignal.removeEventListener("abort",h)}}),d}}))}var Kt=Q(()=>{"use strict";ee();bt();});function Vt(c){return typeof c=="object"&&c!==null&&typeof c._id=="string"&&typeof c.email=="string"&&typeof c.username=="string"&&typeof c.profilePictureURL=="string"&&Array.isArray(c.roles)}var vn,qt,Ht=Q(()=>{"use strict";vn=function(c){return c.None="",c.Amateur="Aficionado",c.Professional="Profesional",c.Collector="Coleccionista",c.Student="Estudiante",c}(vn||{}),qt=class c{constructor(r={}){this._id="",this.email="",this.username="",this.profilePictureURL="",this.name={first:"",middle:"",last:""},this.address={line1:"",city:"",country:"",zipcode:""},this.roles=[],this.bio="",this.activePosts=[],this.fcmToken="",Object.assign(this,xe({},r))}static Build(r={}){return new c(r)}get fullName(){return this.name?this.name.middle?`${this.name.first} ${this.name.middle} ${this.name.last}`:`${this.name.first} ${this.name.last}`:""}toJSON(){let r=Object.assign(this);delete r._id,delete r.fullName;try{return JSON.stringify(r)}catch(f){console.error(`Error stringifying object ${r}: ${f}`)}return""}fromJSON(r){try{return JSON.parse(r)}catch(f){console.error(`Error parsing json ${r}: ${f}`)}return null}}});var Gt,Jt=Q(()=>{"use strict";ee();Mt();Wt();ee();Gt=(()=>{var r,f,h,we;let s=class s{constructor(){ae(this,h);ae(this,r);ae(this,f,!1);pe.isNativePlatform()?(oe(this,r,V(G)),ve(this,h,we).call(this)):(oe(this,r,localStorage),oe(this,f,!0))}get(w){return E(this,null,function*(){let p=null;if(j(this,r)instanceof G&&(j(this,f)||(yield ve(this,h,we).call(this)),p=yield j(this,r).get(w)),j(this,r)instanceof Storage&&(p=j(this,r).getItem(w)),p!=null)try{return JSON.parse(p)}catch(O){console.error(`Parsing error: ${O}`)}return null})}set(w,p){return E(this,null,function*(){j(this,r)instanceof G&&(j(this,f)||(yield ve(this,h,we).call(this)),j(this,r).set(w,JSON.stringify(p))),j(this,r)instanceof Storage&&(typeof p=="string"?j(this,r).setItem(w,p):j(this,r).setItem(w,JSON.stringify(p)))})}remove(w){return E(this,null,function*(){j(this,r)instanceof G&&(j(this,f)||(yield ve(this,h,we).call(this)),j(this,r).remove(w)),j(this,r)instanceof Storage&&j(this,r).removeItem(w)})}clear(){return E(this,null,function*(){j(this,r).clear()})}};r=new WeakMap,f=new WeakMap,h=new WeakSet,we=function(){return E(this,null,function*(){yield j(this,r).create(),oe(this,f,!0)})},s.\u0275fac=function(p){return new(p||s)},s.\u0275prov=se({token:s,factory:s.\u0275fac,providedIn:"root"});let c=s;return c})()});var Qt,Xt=Q(()=>{"use strict";Qt=c=>{let[r,f]=c.split(","),h=r.match(/:(.*?);/),_=h?h[1]:"image/jpeg",s=atob(f),d=Uint8Array.from(s,w=>w.charCodeAt(0));return new Blob([d],{type:_})}});var yo,_e,Zt,er,tr,yn=Q(()=>{"use strict";ee();bt();Kt();Ot();Lt();Ht();Jt();zt();Xt();ee();yo=(()=>{var r,f;let h=class h{constructor(){ae(this,r);ae(this,f);this.injector=V(_t),this.userRepository=V(Ct),this.cloudStorage=V(Yt),this.cache=V(Gt),this.errorMessage=ye(null),this.userId=ye(void 0),this._currentUser=He({request:()=>this.userId(),loader:({request:s})=>{var d;if(!s)return Ae(null);try{let w=this.userRepository.getUserById$(s);return w!=null?w:Ae(null)}catch(w){return this.errorMessage.set((d=w==null?void 0:w.message)!=null?d:"Unknown error"),Ae(null)}}}),this.authState=De(()=>{var s,d,w;return{isAuthenticated:!!this._currentUser.value(),userId:(d=(s=this._currentUser.value())==null?void 0:s._id)!=null?d:"",currentUser:(w=this._currentUser.value())!=null?w:null,errorMessage:this.errorMessage()}}),this.currentUser=De(()=>{var s;return(s=this._currentUser.value())!=null?s:null}),this.init=()=>E(this,null,function*(){try{yield this.loadUserFromCache()}catch(s){console.error(s)}}),oe(this,r,w=>E(this,[w],function*({profilePictureDataUrl:s,uid:d}){try{return yield this.cloudStorage.upload(`profilePictures/${d}`,Qt(s))}catch(p){throw p}})),oe(this,f,()=>E(this,null,function*(){try{return yield this.cloudStorage.getDownloadURL("profilePictures/default.webp")}catch(s){throw s}})),We(()=>E(this,null,function*(){var s,d,w,p;yield this.cache.set("authState",{isAuthenticated:this.authState().isAuthenticated,userId:(d=(s=this.authState().currentUser)==null?void 0:s._id)!=null?d:"",username:(p=(w=this.authState().currentUser)==null?void 0:w.username)!=null?p:""})}))}setUserId(s){this.userId.set(s)}setAuthMethod(s){St(this.injector,()=>{s==="email"&&!(this.authMethod instanceof Zt)&&(this.authMethod=V(Zt)),s==="google"&&!(this.authMethod instanceof er)&&(this.authMethod=V(er)),s==="apple"&&!(this.authMethod instanceof tr)&&(this.authMethod=V(tr))})}isUidObject(s){return s&&typeof s=="object"&&s.uid&&typeof s.uid=="string"}register(w){return E(this,arguments,function*({method:s,userData:d}){var p,O;this.setAuthMethod(s);try{let R=yield this.authMethod.register({email:d.email,password:d.password,username:d.username});this.isUidObject(R)&&(d._id=R.uid),d.profilePictureDataURL&&d._id?(d.profilePictureURL=(p=yield j(this,r).call(this,{profilePictureDataUrl:d.profilePictureDataURL,uid:d._id}))!=null?p:"",delete d.profilePictureDataURL):d.profilePictureURL=(O=yield j(this,f).call(this))!=null?O:"";let M=d,{password:m}=M,x=gt(M,["password"]);return yield this.userRepository.saveUser(x)}catch(R){throw this.errorMessage.set(R),R}})}login(w){return E(this,arguments,function*({method:s,credentials:d}){this.setAuthMethod(s);try{let p=yield this.authMethod.login(d==null?void 0:d.email,d==null?void 0:d.password);if(Vt(p)){this.setUserId(p._id);return}if(!this.isUidObject(p))return;this.setUserId(p.uid)}catch(p){throw this.errorMessage.set(p),p}})}logout(){return E(this,null,function*(){this.setAuthMethod("email");try{yield this.authMethod.logout(),this.setUserId(void 0),this._currentUser.set(null)}catch(s){throw this.errorMessage.set(s),s}})}updatePassword(s){return E(this,null,function*(){this.setAuthMethod("email");try{yield this.authMethod.updatePassword(s)}catch(d){throw this.errorMessage.set(d),d}})}resetPassword(s){return E(this,null,function*(){this.setAuthMethod("email");try{yield this.authMethod.resetPassword(s)}catch(d){throw this.errorMessage.set(d),d}})}loadUserFromCache(){return E(this,null,function*(){let s=yield this.cache.get("authState");if(s!=null&&s.isAuthenticated)for(this.setUserId(s.userId);!this._currentUser.hasValue();)yield new Promise(d=>setTimeout(d,10))})}};r=new WeakMap,f=new WeakMap,h.\u0275fac=function(d){return new(d||h)},h.\u0275prov=se({token:h,factory:h.\u0275fac,providedIn:"root"});let c=h;return c})(),_e=class{constructor(){this.auth=V(Pt)}logout(){return E(this,null,function*(){try{return yield this.auth.logout()}catch(r){throw r}})}updatePassword(r){return E(this,null,function*(){try{return yield this.auth.updatePassword(r)}catch(f){throw f}})}resetPassword(r){return E(this,null,function*(){try{return yield this.auth.resetPassword(r)}catch(f){throw f}})}},Zt=(()=>{let r=class r extends _e{register(h){return E(this,null,function*(){try{return yield this.auth.registerWithEmail(h)}catch(_){throw _}})}login(h,_){return E(this,null,function*(){try{return yield this.auth.loginWithEmail(h,_)}catch(s){throw s}})}};r.\u0275fac=(()=>{let h;return function(s){return(h||(h=Re(r)))(s||r)}})(),r.\u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})(),er=(()=>{let r=class r extends _e{register(){return E(this,null,function*(){try{return yield this.auth.registerWithProvider("google")}catch(h){throw h}})}login(){return E(this,null,function*(){try{return yield this.auth.loginWithProvider("google")}catch(h){throw h}})}};r.\u0275fac=(()=>{let h;return function(s){return(h||(h=Re(r)))(s||r)}})(),r.\u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})(),tr=(()=>{let r=class r extends _e{register(){return E(this,null,function*(){try{return yield this.auth.loginWithProvider("apple")}catch(h){throw h}})}login(){return E(this,null,function*(){try{return yield this.auth.loginWithProvider("apple")}catch(h){throw h}})}};r.\u0275fac=(()=>{let h;return function(s){return(h||(h=Re(r)))(s||r)}})(),r.\u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"});let c=r;return c})()});export{hn as a,He as b,Kt as c,Pt as d,Ot as e,Ct as f,Lt as g,vn as h,qt as i,Vt as j,Ht as k,me as l,pe as m,Nt as n,Pe as o,Mt as p,Ln as q,Wt as r,Gt as s,Jt as t,Yt as u,zt as v,Qt as w,Xt as x,yo as y,yn as z};
