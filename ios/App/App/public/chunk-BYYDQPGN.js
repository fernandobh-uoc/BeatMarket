import{a as it,b as ut}from"./chunk-K4X2YLKW.js";import{a as nt,b as pt}from"./chunk-SZG4CGCH.js";import"./chunk-SWFIUNRV.js";import"./chunk-D4UN2WVJ.js";import{a as ot,b as ht}from"./chunk-HWNQPEWS.js";import"./chunk-26KUR5UJ.js";import{v as et,w as gt}from"./chunk-GIZGGZ62.js";import{$ as K,Ba as tt,P as G,Z as J,ca as N,da as Q,ka as W,na as v,oa as X,pa as Y,qa as Z,t as $,v as dt}from"./chunk-XVXSUTZI.js";import{$a as R,Aa as g,B as D,F as f,Fa as T,Ga as p,Jb as V,Nb as mt,Sa as c,Ta as h,Ua as F,Y as I,_ as P,aa as S,ab as k,ba as a,bb as j,cb as A,ha as b,jb as M,lb as E,ma as y,mb as z,pb as C,sa as d,ta as w,ua as _,wa as L,wb as U,xa as H,xb as B,ya as i,za as r,zb as q}from"./chunk-LBGYGD76.js";import"./chunk-OHMQXWFK.js";import"./chunk-IZ5VZLPJ.js";import"./chunk-FTZN4423.js";import"./chunk-R4WQGMAA.js";import"./chunk-5WZLWBAD.js";import"./chunk-UAVZGLFE.js";import"./chunk-3VQMIGUA.js";import"./chunk-GWOLSY5V.js";import"./chunk-QQVLEOUP.js";import"./chunk-HJZG4HTK.js";import"./chunk-XR3M57TO.js";import"./chunk-3FE2HO5M.js";import"./chunk-ZKJSTCFA.js";import{f as O,o as x}from"./chunk-FIPIWZQS.js";function ft(t,e){if(t&1&&(i(0,"div",0)(1,"ion-text",2),c(2),r()()),t&2){let n=p();a(2),F("A\xFAn no has ",n.type()==="bought"?"comprado":"vendido"," ning\xFAn art\xEDculo")}}function yt(t,e){if(t&1&&(i(0,"div",3)(1,"div",4)(2,"ion-thumbnail",5),g(3,"img",6),r(),i(4,"div",7)(5,"ion-text",8),c(6),r(),i(7,"ion-label",9),c(8),r(),i(9,"ion-text",10),c(10),k(11,"formatCurrency"),r()()(),i(12,"div",11)(13,"ion-text",12),c(14),k(15,"date"),r(),i(16,"div",13)(17,"ion-text",14),c(18),r(),i(19,"div",15)(20,"ion-avatar",16),g(21,"img",17),r(),i(22,"ion-text",18),c(23),r()()()()()),t&2){let n=e.$implicit,o=p(2);a(3),d("src",n.postData.mainImageURL,S),a(3),h(n.postData.title),a(2),h(n.postData.articleCondition),a(2),h(j(11,9,n.postData.price)),a(4),h(A(15,11,n.createdAt,"dd/MM/yyyy")),a(4),h(o.type()==="bought"?"Comprado a":"Vendido a"),a(),d("routerLink",R(14,_t,"/tabs/user-detail/"+(o.type()==="bought"?n.sellerData.userId:n.buyerData.userId))),a(2),d("src",o.type()==="bought"?n.sellerData.profilePictureURL:n.buyerData.profilePictureURL,S),a(2),h(o.type()==="bought"?n.sellerData.username:n.buyerData.username)}}function Mt(t,e){if(t&1&&(i(0,"ion-list",1),L(1,yt,24,16,"div",3,Ct),r()),t&2){let n=p();a(),H(n.sales())}}var _t,Ct,rt,st=O(()=>{"use strict";C();tt();ut();q();mt();C();_t=t=>[t],Ct=(t,e)=>e._id;rt=(()=>{let e=class e{constructor(){this.sales=I(null),this.type=I("bought")}ngOnInit(){}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=b({type:e,selectors:[["app-history-list"]],inputs:{sales:[1,"sales"],type:[1,"type"]},decls:2,vars:1,consts:[[1,"container-empty"],["lines","none",1,"sales-list"],[1,"text-empty"],[1,"sale-item"],[1,"post-data"],["slot","start",1,"post-image"],["alt","Imagen principal del anuncio",3,"src"],[1,"labels-container"],[1,"post-title"],[1,"post-condition"],[1,"post-price"],[1,"sale-data"],[1,"sale-date"],[1,"user-data-wrapper"],[1,"user-data-label"],[1,"user-data",3,"routerLink"],[1,"user-avatar"],["alt","Avatar del usuario",3,"src"],[1,"user-name"]],template:function(s,l){if(s&1&&y(0,ft,3,1,"div",0)(1,Mt,3,0,"ion-list",1),s&2){let m;_(((m=l.sales())==null?null:m.length)===0?0:1)}},dependencies:[V,U,G,N,Q,v,X,it],styles:[".container-empty[_ngcontent-%COMP%]{margin-top:4rem;display:flex;flex-direction:column;align-items:center;justify-content:center}.container-empty[_ngcontent-%COMP%]   .text-empty[_ngcontent-%COMP%]{color:var(--ion-color-medium-tint);font-size:var(--body-large-size, 1rem);font-style:normal;font-weight:var(--body-large-weight, 400);line-height:var(--body-large-line-height, 1.5rem);letter-spacing:var(--body-large-tracking, .03125rem)}ion-list.sales-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]{--padding-start: 0;display:flex;flex-direction:row;gap:1rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem;width:60%}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]   ion-thumbnail.post-image[_ngcontent-%COMP%]{--border-radius: 4px;min-height:64px;min-width:64px}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-size:var(--body-large-size, 1rem);font-style:normal;font-weight:var(--body-large-weight, 400);line-height:var(1rem);letter-spacing:var(--body-large-tracking, .03125rem)}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]   .post-condition[_ngcontent-%COMP%]{font-size:var(--label-large-size, .875rem);font-style:normal;font-weight:var(--label-large-weight-prominent, 600);line-height:var(--label-large-line-height, 1.25rem);letter-spacing:var(--label-large-tracking, .00625rem)}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .post-data[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]   .post-price[_ngcontent-%COMP%]{font-size:1rem;font-style:normal;font-weight:600;line-height:1.625rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]{width:40%;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-end}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .sale-date[_ngcontent-%COMP%]{text-align:right;font-size:var(--label-large-size, .875rem);font-style:normal;font-weight:var(--label-large-weight-prominent, 600);line-height:var(--label-large-line-height, 1.25rem);letter-spacing:var(--label-large-tracking, .00625rem)}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .user-data-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .user-data-wrapper[_ngcontent-%COMP%]   .user-data-label[_ngcontent-%COMP%]{color:var(--ion-color-medium-tint);text-align:right;font-size:var(--label-large-size, .875rem);font-style:normal;font-weight:var(--label-large-weight, 400);line-height:var(--label-large-line-height, 1.25rem);letter-spacing:var(--label-large-tracking, .00625rem)}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .user-data-wrapper[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem;cursor:pointer}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .user-data-wrapper[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:2rem;height:2rem}ion-list.sales-list[_ngcontent-%COMP%]   .sale-item[_ngcontent-%COMP%]   .sale-data[_ngcontent-%COMP%]   .user-data-wrapper[_ngcontent-%COMP%]   .user-data[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:var(--label-medium-size, .75rem);font-style:normal;font-weight:var(--label-medium-weight-prominent, 600);line-height:var(--label-medium-line-height, 1rem);letter-spacing:var(--label-medium-tracking, .03125rem)}"]});let t=e;return t})()});var lt,ct=O(()=>{"use strict";C();ht();gt();C();lt=(()=>{let e=class e{constructor(){this.saleRepository=f(ot),this.authService=f(et),this.boughtItems=z({request:()=>this.authService.authStatus().userId,loader:s=>x(this,[s],function*({request:o}){var l,m;if(!o)return[];try{return(l=yield this.saleRepository.getSalesByBuyerId(o))!=null?l:[]}catch(u){return this.errorMessage.set((m=u==null?void 0:u.message)!=null?m:"Unknown error"),[]}})}),this.soldItems=z({request:()=>this.authService.authStatus().userId,loader:s=>x(this,[s],function*({request:o}){var l,m;if(!o)return[];try{return(l=yield this.saleRepository.getSalesBySellerId(o))!=null?l:[]}catch(u){return this.errorMessage.set((m=u==null?void 0:u.message)!=null?m:"Unknown error"),[]}})}),this.errorMessage=P(""),this.historyState=M(()=>{var o,s;return{boughtItems:(o=this.boughtItems.value())!=null?o:[],soldItems:(s=this.soldItems.value())!=null?s:[],loading:this.boughtItems.isLoading()||this.soldItems.isLoading(),errorMessage:this.errorMessage()}})}reloadResources(){this.boughtItems.reload(),this.soldItems.reload()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})()});function Pt(t,e){t&1&&(i(0,"div",9),g(1,"ion-spinner",10),r())}function bt(t,e){if(t&1&&g(0,"app-history-list",11),t&2){let n=p(2);d("sales",n.boughtItems())}}function vt(t,e){if(t&1&&g(0,"app-history-list",12),t&2){let n=p(2);d("sales",n.soldItems())}}function Ot(t,e){if(t&1&&y(0,bt,1,1,"app-history-list",11)(1,vt,1,1,"app-history-list",12),t&2){let n=p();_(n.selectedTab()==="boughtItems"?0:-1),a(),_(n.selectedTab()==="soldItems"?1:-1)}}var Kt,xt=O(()=>{C();q();dt();tt();pt();st();ct();C();Kt=(()=>{let e=class e{constructor(){this.historyService=f(lt),this.boughtItems=E(()=>this.historyService.historyState().boughtItems),this.soldItems=E(()=>this.historyService.historyState().soldItems),this.loading=M(()=>this.historyService.historyState().loading),this.errorMessage=M(()=>this.historyService.historyState().errorMessage),this.selectedTab=P("boughtItems")}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=b({type:e,selectors:[["app-history"]],decls:17,vars:7,consts:[[3,"translucent"],["type","menu","title","Historial"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"container"],[1,"top-tabs-container"],[1,"bought-tab",3,"click"],[1,"sold-tab",3,"click"],[1,"loading-spinner-container"],["name","crescent"],["type","bought",3,"sales"],["type","sold",3,"sales"]],template:function(s,l){s&1&&(i(0,"ion-header",0),g(1,"app-toolbar",1),r(),i(2,"ion-content",2)(3,"ion-header",3)(4,"ion-toolbar")(5,"ion-title",4),c(6,"Historial"),r()()(),i(7,"div",5)(8,"div",6)(9,"div",7),T("click",function(){return l.selectedTab.set("boughtItems")}),i(10,"ion-text"),c(11,"Compras"),r()(),i(12,"div",8),T("click",function(){return l.selectedTab.set("soldItems")}),i(13,"ion-text"),c(14,"Ventas"),r()()(),y(15,Pt,2,0,"div",9)(16,Ot,2,2),r()()),s&2&&(d("translucent",!0),a(2),d("fullscreen",!0),a(8),w("selected",l.selectedTab()==="boughtItems"),a(3),w("selected",l.selectedTab()==="soldItems"),a(2),_(l.loading()?15:16))},dependencies:[W,rt,v,nt,J,K,Y,Z,B,$],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}.container[_ngcontent-%COMP%]   .loading-spinner-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;padding:1rem 0}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;min-height:4rem;min-width:100dvw;margin-left:-1.5rem;margin-bottom:3rem}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%] > .bought-tab[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%] > .sold-tab[_ngcontent-%COMP%]{flex:1 0 0;display:flex;align-items:center;justify-content:center;color:var(--ion-color-medium);cursor:pointer}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .bought-tab[_ngcontent-%COMP%]{border-right:1px solid var(--ion-color-dark-tint)}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .sold-tab[_ngcontent-%COMP%]{border-left:1px solid var(--ion-color-dark-tint)}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:var(--ion-color-light)}"]});let t=e;return t})()});xt();export{Kt as HistoryPage};
