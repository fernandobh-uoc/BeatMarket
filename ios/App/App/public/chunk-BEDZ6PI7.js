import{a as Re,b as at}from"./chunk-PVNJ44BD.js";import{a as De,b as it}from"./chunk-UIHM3IIJ.js";import{a as Fe,b as ke,c as Le,d as nt}from"./chunk-375QIGGA.js";import{c as Y,d as tt}from"./chunk-GUENO4VH.js";import{O as et,a as Ue,b as Ze,o as Oe,q as Te,r as Ee}from"./chunk-FBV753BW.js";import"./chunk-6NUGH5FF.js";import{f as Pe,g as Ge,n as be,o as Ke,p as Se,q as Xe,r as Me,s as Ye,t as X,u as Ie}from"./chunk-VQCHUAXV.js";import{b as xe,e as Je}from"./chunk-K5TY53DO.js";import"./chunk-4XKNA7IF.js";import"./chunk-4FRKXPG4.js";import"./chunk-E4HNE3PW.js";import"./chunk-P2UHFIXP.js";import"./chunk-XV6JN3SG.js";import"./chunk-G3RFF6YC.js";import"./chunk-GTZXGHKK.js";import"./chunk-JBWWZWAU.js";import"./chunk-ITJAHDAK.js";import"./chunk-WVJ73LOB.js";import{Aa as we,Ca as Z,Q as de,_ as ue,aa as me,ba as _e,ca as ge,da as K,ea as fe,ka as he,oa as j,pa as ve,t as pe,v as He,wa as Ce,xa as ye}from"./chunk-BQ2OOKCX.js";import{$ as s,$a as oe,Ca as S,D as M,Da as f,Ea as p,L as _,Lb as ce,M as g,Ma as B,Na as z,Oa as J,Pb as qe,Qa as v,Ra as U,V as E,W as u,Xa as ie,Y as C,Ya as ne,Za as ae,_ as W,_a as re,ea as A,fa as I,hb as O,ib as se,ka as b,nb as P,qa as d,ra as D,sa as h,ua as H,va as G,vb as le,wa as l,xa as c,xb as $e,ya as y,z as te}from"./chunk-DHHGUDQP.js";import"./chunk-OHMQXWFK.js";import"./chunk-S6VCIYOJ.js";import"./chunk-25CU3KXX.js";import"./chunk-67JKSNDF.js";import"./chunk-UUSPLNXY.js";import"./chunk-DH7DTWFE.js";import"./chunk-JT567OVO.js";import"./chunk-NY55XGVK.js";import"./chunk-UHVVQU73.js";import"./chunk-IZ5VZLPJ.js";import"./chunk-FTZN4423.js";import"./chunk-R4WQGMAA.js";import"./chunk-5WZLWBAD.js";import"./chunk-UAVZGLFE.js";import"./chunk-3VQMIGUA.js";import"./chunk-GWOLSY5V.js";import"./chunk-QQVLEOUP.js";import"./chunk-HJZG4HTK.js";import"./chunk-XR3M57TO.js";import"./chunk-3FE2HO5M.js";import"./chunk-ZKJSTCFA.js";import{a as $,b as q,f as V,o as w}from"./chunk-FIPIWZQS.js";function lt(n,a){if(n&1){let r=S();l(0,"ion-input",17,0),f("ionFocus",function(){_(r);let e=p(2);return g(e.controlFocus.emit())})("ionInput",function(){_(r);let e=J(1),i=p(2);return g(i.controlInput.emit(e.value))}),c()}if(n&2){let r=p(2);d("value",r.data())}}function ct(n,a){if(n&1){let r=S();l(0,"ion-input",18,0),f("ionFocus",function(){_(r);let e=p(2);return g(e.controlFocus.emit())})("ionInput",function(){_(r);let e=J(1),i=p(2);return g(i.controlInput.emit(e.value))}),y(2,"ion-input-password-toggle",19),c()}}function pt(n,a){if(n&1){let r=S();l(0,"ion-input",20,0),f("ionFocus",function(){_(r);let e=p(2);return g(e.controlFocus.emit())})("ionInput",function(){_(r);let e=J(1),i=p(2);return g(i.controlInput.emit(e.value))}),c()}if(n&2){let r=p(2);d("value",r.data())}}function dt(n,a){if(n&1){let r=S();l(0,"ion-avatar",21,0),f("ionFocus",function(){_(r);let e=p(2);return g(e.controlFocus.emit())}),y(2,"img",22),c()}if(n&2){let r=p(2);s(2),d("src",r.profilePictureURL(),W)}}function ut(n,a){if(n&1&&(l(0,"ion-select-option",24),v(1),c()),n&2){let r=a.$implicit;d("value",r.nameES),s(),U(r.nameES)}}function mt(n,a){if(n&1){let r=S();l(0,"ion-select",23,0),f("ionFocus",function(){_(r);let e=p(2);return g(e.controlFocus.emit())})("ionChange",function(){_(r);let e=p(2);return g(e.selectChange.emit())}),H(2,ut,2,2,"ion-select-option",24,st),c()}if(n&2){let r=p(2);d("interfaceOptions",ne(1,ot)),s(2),G(r.selectOptions())}}function _t(n,a){if(n&1){let r=S();l(0,"div",7)(1,"form"),b(2,lt,2,1,"ion-input",8)(3,ct,3,0,"ion-input",9)(4,pt,2,1,"ion-input",10)(5,dt,3,1,"ion-avatar",2)(6,mt,4,2,"ion-select",11),c()(),l(7,"div",12)(8,"div",13)(9,"ion-icon",14),f("click",function(){let e;_(r);let i=p();return g(!i.disabledSaveButtonPending()&&!i.disabledSaveButtonManual()&&i.save.emit((e=i.editInput())==null?null:e.value))}),c()(),l(10,"div",15)(11,"ion-icon",16),f("click",function(){_(r);let e=p();return g(!e.disabledSaveButtonPending()&&e.editable()&&e.toggleEditingState.emit())}),c()()()}if(n&2){let r,t=p();s(2),h((r=t.type())==="text"?2:r==="password"?3:r==="number"?4:r==="profilePicture"?5:r==="select"?6:-1),s(7),D("icon-disabled",t.disabledSaveButtonPending()||t.disabledSaveButtonManual()),s(2),D("icon-disabled",t.disabledSaveButtonPending())}}function gt(n,a){if(n&1){let r=S();l(0,"ion-avatar",21,0),f("ionFocus",function(){_(r);let e=p(2);return g(e.controlFocus.emit())}),y(2,"img",22),c()}if(n&2){let r=p(2);s(2),d("src",r.profilePictureURL(),W)}}function ft(n,a){if(n&1&&(l(0,"ion-text",26),v(1),c()),n&2){let r=p(2);s(),U(r.data())}}function ht(n,a){if(n&1){let r=S();l(0,"div",28),f("click",function(){_(r);let e=p(2);return e.toggleEditingState.emit(),g(e.type()==="profilePicture"&&e.editAvatar.emit())}),y(1,"ion-icon",29),c()}}function vt(n,a){if(n&1&&(l(0,"div",25),b(1,gt,3,1,"ion-avatar",2)(2,ft,2,1,"ion-text",26)(3,ht,2,0,"div",27),c()),n&2){let r,t=p();D("min-height-wrapper",t.editable()),s(),h((r=t.type())==="profilePicture"?1:2),s(2),h(t.editable()?3:-1)}}function Ct(n,a){if(n&1&&(l(0,"ion-text",5),v(1),c()),n&2){let r=p();s(),U(r.usernameErrorMessage())}}function yt(n,a){if(n&1&&(l(0,"ion-text",6),v(1),c()),n&2){let r=p();s(),U(r.passwordUpdateSuccessMessage())}}var rt,ot,st,Ve,Ae=V(()=>{"use strict";P();Z();Ze();et();P();rt=["editInput"],ot=()=>({cssClass:"custom-action-sheet"}),st=(n,a)=>a.iso2;Ve=(()=>{let a=class a{constructor(){this.keyTag=u(""),this.type=u("text"),this.editable=u(!0),this.label=u(""),this.data=u(""),this.profilePictureURL=u(""),this.disabledSaveButtonPending=u(!1),this.disabledSaveButtonManual=u(!1),this.editingStateActive=u(!1),this.usernameErrorMessage=u(""),this.passwordUpdateSuccessMessage=u(""),this.editingPasswordStateActive=C(!1),this.save=E(),this.toggleEditingState=E(),this.editAvatar=E(),this.controlFocus=E(),this.controlInput=E(),this.selectChange=E(),this.selectOptions=u([]),this.editInput=A("editInput"),Ue({createOutline:Ee,checkmarkOutline:Oe,closeOutline:Te})}ngOnInit(){}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=I({type:a,selectors:[["app-user-data-item"]],viewQuery:function(e,i){e&1&&B(i.editInput,rt,5),e&2&&z()},inputs:{keyTag:[1,"keyTag"],type:[1,"type"],editable:[1,"editable"],label:[1,"label"],data:[1,"data"],profilePictureURL:[1,"profilePictureURL"],disabledSaveButtonPending:[1,"disabledSaveButtonPending"],disabledSaveButtonManual:[1,"disabledSaveButtonManual"],editingStateActive:[1,"editingStateActive"],usernameErrorMessage:[1,"usernameErrorMessage"],passwordUpdateSuccessMessage:[1,"passwordUpdateSuccessMessage"],selectOptions:[1,"selectOptions"]},outputs:{save:"save",toggleEditingState:"toggleEditingState",editAvatar:"editAvatar",controlFocus:"controlFocus",controlInput:"controlInput",selectChange:"selectChange"},decls:8,vars:4,consts:[["editInput",""],[1,"label-text-wrapper"],[1,"custom"],[1,"data-field-wrapper"],[1,"data-display-wrapper",3,"min-height-wrapper"],["color","danger",1,"error-text"],["color","success",1,"success-text"],[1,"edit-form-wrapper"],["type","text",1,"custom",3,"value"],["type","password",1,"custom"],["type","text","inputmode","numeric",1,"custom",3,"value"],["interface","action-sheet","color","light",1,"custom","select-input",3,"interfaceOptions"],[1,"edit-buttons-wrapper"],[1,"save-icon-wrapper"],["name","checkmark-outline","size","large",3,"click"],[1,"cancel-icon-wrapper"],["name","close-outline",3,"click"],["type","text",1,"custom",3,"ionFocus","ionInput","value"],["type","password",1,"custom",3,"ionFocus","ionInput"],["slot","end","color","light"],["type","text","inputmode","numeric",1,"custom",3,"ionFocus","ionInput","value"],[1,"custom",3,"ionFocus"],["alt","Avatar",3,"src"],["interface","action-sheet","color","light",1,"custom","select-input",3,"ionFocus","ionChange","interfaceOptions"],[3,"value"],[1,"data-display-wrapper"],["color","light"],[1,"edit-icon-wrapper"],[1,"edit-icon-wrapper",3,"click"],["name","create-outline","size","large"]],template:function(e,i){e&1&&(l(0,"div",1)(1,"ion-label",2),v(2),c(),l(3,"div",3),b(4,_t,12,5)(5,vt,4,4,"div",4),c(),b(6,Ct,2,1,"ion-text",5)(7,yt,2,1,"ion-text",6),c()),e&2&&(s(2),U(i.label()),s(2),h(i.editable()&&i.editingStateActive()?4:5),s(2),h(i.keyTag()==="username"&&i.usernameErrorMessage()?6:-1),s(),h(i.keyTag()==="password"&&i.passwordUpdateSuccessMessage()?7:-1))},dependencies:[Ce,de,ye,K,j,_e,we,he],styles:[".data-field-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:2rem}.data-field-wrapper[_ngcontent-%COMP%]   .edit-form-wrapper[_ngcontent-%COMP%]{flex:1 0 0}.data-field-wrapper[_ngcontent-%COMP%]   .edit-form-wrapper[_ngcontent-%COMP%]   ion-input.custom[_ngcontent-%COMP%]{min-height:3rem;font-size:var(--body-medium-size, .875rem)}.data-field-wrapper[_ngcontent-%COMP%]   .edit-buttons-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center;gap:1rem}.data-field-wrapper[_ngcontent-%COMP%]   .edit-buttons-wrapper[_ngcontent-%COMP%]   .inline-link-save[_ngcontent-%COMP%], .data-field-wrapper[_ngcontent-%COMP%]   .edit-buttons-wrapper[_ngcontent-%COMP%]   .inline-link-cancel[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;cursor:pointer;text-decoration:underline;text-underline-offset:.15rem}.data-field-wrapper[_ngcontent-%COMP%]   .edit-buttons-wrapper[_ngcontent-%COMP%]   .save-icon-wrapper[_ngcontent-%COMP%], .data-field-wrapper[_ngcontent-%COMP%]   .edit-buttons-wrapper[_ngcontent-%COMP%]   .cancel-icon-wrapper[_ngcontent-%COMP%]{height:2rem;width:3rem;display:flex;justify-content:center;align-items:center;cursor:pointer}.data-field-wrapper[_ngcontent-%COMP%]   .edit-buttons-wrapper[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-light)}.data-field-wrapper[_ngcontent-%COMP%]   .edit-buttons-wrapper[_ngcontent-%COMP%]   .icon-disabled[_ngcontent-%COMP%]{color:var(--ion-color-medium-shade)}.data-field-wrapper[_ngcontent-%COMP%]   .data-display-wrapper[_ngcontent-%COMP%]{flex:1 0 0;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.data-field-wrapper[_ngcontent-%COMP%]   .data-display-wrapper[_ngcontent-%COMP%]   .edit-icon-wrapper[_ngcontent-%COMP%]{height:2rem;width:3rem;display:flex;justify-content:center;align-items:center;cursor:pointer}.data-field-wrapper[_ngcontent-%COMP%]   .min-height-wrapper[_ngcontent-%COMP%]{min-height:3rem}.data-field-wrapper[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:var(--body-medium-size, .875rem);font-style:normal;font-weight:var(--body-medium-weight, 400);line-height:var(--body-medium-line-height, 1.25rem);letter-spacing:var(--body-medium-tracking, .01563rem)}ion-text.success-text[_ngcontent-%COMP%], ion-text.error-text[_ngcontent-%COMP%]{font-size:var(--label-large-size, .875rem);font-style:normal;font-weight:var(--label-large-weight-prominent, 600);line-height:var(--label-large-line-height, 1.25rem);letter-spacing:var(--label-large-tracking, .00625rem)}"]});let n=a;return n})()});var Q,ee=V(()=>{"use strict";P();nt();Ge();Ie();Xe();Ke();Ye();P();Q=(()=>{let a=class a{constructor(){this.userRepository=M(Pe),this.authService=M(X),this.cloudStorage=M(Se),this.cache=M(be),this.newProfilePictureDataURL=C(null),this.pending=C(!1),this.editingInputStates=C([]),this.storageErrorMessage=C(""),this.usernameErrorMessage=C(""),this.passwordUpdateSuccessMessage=C(""),this.setAvatarDataNotNative=t=>w(this,null,function*(){var m;let e=t.target;if(!((m=e.files)!=null&&m.length))return;let i=e.files[0],o=yield this.readFileAsDataURL(i);this.newProfilePictureDataURL.set(o)}),this.saveNewProfilePictureDataURL=()=>w(this,null,function*(){var t,e,i;try{let o=(t=this.authService.currentUser())==null?void 0:t._id;if(!o)return!1;let m=this.newProfilePictureDataURL();if(!m)return!1;(e=this.authService.currentUser())!=null&&e.profilePictureURL.includes("default")||(yield this.removeProfilePicture(o));let x=(i=yield this.uploadProfilePicture({profilePictureDataUrl:m,uid:o}))!=null?i:"";return x?(this.userRepository.updateUser({_id:o,profilePictureURL:x}),this.newProfilePictureDataURL.set(null),!0):!1}catch(o){return console.error(`Error al guardar avatar: ${o}`),!1}}),this.removeProfilePicture=t=>w(this,null,function*(){try{yield this.cloudStorage.delete(`profilePictures/${t}`),console.log("removed")}catch(e){console.error(`Error al eliminar avatar: ${e}`)}return!1}),this.uploadProfilePicture=i=>w(this,[i],function*({profilePictureDataUrl:t,uid:e}){try{return yield this.cloudStorage.upload(`profilePictures/${e}`,Me(t))}catch(o){throw o}}),se(()=>{console.log(this.newProfilePictureDataURL())})}editUserData(t,e){return w(this,null,function*(){var i,o,m,x;this.pending.set(!0);try{return t==="username"&&(yield this.usernameExists(e))?(this.usernameErrorMessage.set("Ese nombre de usuario ya est\xE1 en uso"),this.pending.set(!1),!1):t==="password"?(yield this.authService.updatePassword(e),this.passwordUpdateSuccessMessage.set("Contrase\xF1a actualizada"),this.resetEditingInputStates(),this.pending.set(!1),setTimeout(()=>{this.passwordUpdateSuccessMessage.set("")},2e3),!0):(t==="avatar"&&console.log("test"),(t==="line1"||t==="city"||t==="country"||t==="zipcode")&&(e=q($({},(i=this.authService.currentUser())==null?void 0:i.address),{[t]:e}),t="address"),(t==="first"||t==="last")&&(e=q($({},(o=this.authService.currentUser())==null?void 0:o.name),{[t]:e}),t="name"),this.userRepository.updateUser({_id:(x=(m=yield this.cache.get("authState"))==null?void 0:m.userId)!=null?x:"",[t]:e}),t==="username"&&this.cache.set("authState",q($({},yield this.cache.get("authState")),{username:e})),this.resetEditingInputStates(),this.pending.set(!1),!0)}catch(T){return this.storageErrorMessage.set(T),this.pending.set(!1),!1}})}getAvatarData(){return w(this,null,function*(){try{let t=yield Le.getPhoto({quality:80,allowEditing:!1,resultType:ke.DataUrl,source:Fe.Prompt});this.newProfilePictureDataURL.set(t.dataUrl)}catch(t){console.error(`Error al seleccionar avatar: ${t}`)}})}readFileAsDataURL(t){return new Promise((e,i)=>{let o=new FileReader;o.onload=()=>{e(o.result)},o.onerror=i,o.readAsDataURL(t)})}resetEditingInputStates(){let t=this.editingInputStates().map(e=>{let i={};for(let o in e)e.hasOwnProperty(o)&&(i[o]=!1);return i});this.editingInputStates.set(t)}removeErrorMessages(){this.usernameErrorMessage.set("")}usernameExists(t){return w(this,null,function*(){try{return!!(yield this.userRepository.getUserByUsername(t))}catch(e){return this.usernameErrorMessage.set(e),!1}})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=te({token:a,factory:a.\u0275fac});let n=a;return n})()});function Pt(n,a){if(n&1){let r=S();l(0,"input",3,0),f("change",function(e){_(r);let i=p();return g(i.handleFileInput(e))}),c()}}var wt,Be,ze=V(()=>{"use strict";P();Ae();ee();it();Je();P();wt=["fileInput"];Be=(()=>{let a=class a{constructor(){this.profileService=M(Q),this.keyTag=u(""),this.type=u("text"),this.editable=u(!0),this.label=u(""),this.data=u(""),this.newProfilePictureDataURL=O(()=>this.profileService.newProfilePictureDataURL()),this.disabledSaveButtonManual=C(!0),this.disabledSaveButtonPending=O(()=>this.profileService.pending()),this.editingStateActive=O(()=>{let t=this.profileService.editingInputStates().findIndex(e=>e.hasOwnProperty(this.keyTag()));return t===-1?!1:this.profileService.editingInputStates()[t][this.keyTag()]}),this.storageErrorMessage=O(()=>this.profileService.storageErrorMessage()),this.usernameErrorMessage=O(()=>this.profileService.usernameErrorMessage()),this.passwordUpdateSuccessMessage=O(()=>this.profileService.passwordUpdateSuccessMessage()),this.countries=De,this.fileInput=A("fileInput"),this.onEditAvatar=()=>w(this,null,function*(){var t;xe.isNativePlatform()?(yield this.profileService.getAvatarData(),this.profileService.newProfilePictureDataURL()?this.disabledSaveButtonManual.set(!1):this.onToggleEditingState()):(t=this.fileInput())==null||t.nativeElement.click()}),this.handleFileInput=t=>w(this,null,function*(){yield this.profileService.setAvatarDataNotNative(t),this.profileService.newProfilePictureDataURL()&&this.disabledSaveButtonManual.set(!1)})}onToggleEditingState(){let t=this.profileService.editingInputStates(),e=t.findIndex(o=>o.hasOwnProperty(this.keyTag())),i=[...t];e===-1?i.push({[this.keyTag()]:!0}):i[e][this.keyTag()]=!i[e][this.keyTag()],this.profileService.editingInputStates.set(i),this.profileService.newProfilePictureDataURL.set(null),this.disabledSaveButtonManual.set(!0),this.profileService.removeErrorMessages()}onControlFocus(){this.profileService.removeErrorMessages()}onControlInput(t){this.disabledSaveButtonManual.set(t===this.data())}onSelectChange(){this.disabledSaveButtonManual.set(!1)}onSave(t){return w(this,null,function*(){if(this.type()==="profilePicture"&&this.profileService.newProfilePictureDataURL()){(yield this.profileService.saveNewProfilePictureDataURL())&&this.disabledSaveButtonManual.set(!0);return}(yield this.profileService.editUserData(this.keyTag(),t))&&this.disabledSaveButtonManual.set(!0)})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=I({type:a,selectors:[["app-user-data-item-wrapper"]],viewQuery:function(e,i){e&1&&B(i.fileInput,wt,5),e&2&&z()},inputs:{keyTag:[1,"keyTag"],type:[1,"type"],editable:[1,"editable"],label:[1,"label"],data:[1,"data"]},decls:2,vars:13,consts:[["fileInput",""],[3,"save","toggleEditingState","editAvatar","handleFileInput","controlFocus","controlInput","selectChange","keyTag","editable","type","label","data","profilePictureURL","usernameErrorMessage","passwordUpdateSuccessMessage","editingStateActive","disabledSaveButtonPending","disabledSaveButtonManual","selectOptions"],["type","file","accept","image/*","hidden",""],["type","file","accept","image/*","hidden","",3,"change"]],template:function(e,i){if(e&1&&(l(0,"app-user-data-item",1),f("save",function(m){return i.onSave(m)})("toggleEditingState",function(){return i.onToggleEditingState()})("editAvatar",function(){return i.onEditAvatar()})("handleFileInput",function(m){return i.handleFileInput(m)})("controlFocus",function(){return i.onControlFocus()})("controlInput",function(m){return i.onControlInput(m)})("selectChange",function(){return i.onSelectChange()}),c(),b(1,Pt,2,0,"input",2)),e&2){let o;d("keyTag",i.keyTag())("editable",i.editable())("type",i.type())("label",i.label())("data",i.data())("profilePictureURL",(o=i.newProfilePictureDataURL())!==null&&o!==void 0?o:i.data())("usernameErrorMessage",i.usernameErrorMessage())("passwordUpdateSuccessMessage",i.passwordUpdateSuccessMessage())("editingStateActive",i.editingStateActive())("disabledSaveButtonPending",i.disabledSaveButtonPending())("disabledSaveButtonManual",i.disabledSaveButtonManual())("selectOptions",i.countries),s(),h(i.type()==="profilePicture"?1:-1)}},dependencies:[Ve],encapsulation:2});let n=a;return n})()});var je,We=V(()=>{"use strict";P();ze();P();je=(()=>{let a=class a{constructor(){this.user=u(null)}ngOnInit(){}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=I({type:a,selectors:[["app-user-data-list"]],inputs:{user:[1,"user"]},decls:10,vars:17,consts:[[1,"user-data-list"],["keyTag","email","type","text","label","Email",3,"editable","data"],["keyTag","username","type","text","label","Nombre de usuario",3,"editable","data"],["keyTag","profilePicture","type","profilePicture","label","Avatar",3,"editable","data"],["keyTag","password","type","password","label","Contrase\xF1a","data","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"editable"],["keyTag","first","type","text","label","Nombre",3,"editable","data"],["keyTag","last","type","text","label","Apellidos",3,"editable","data"],["keyTag","line1","type","text","label","Direcci\xF3n",3,"editable","data"],["keyTag","zipcode","type","number","label","C\xF3digo postal",3,"editable","data"],["keyTag","country","type","select","label","Pa\xEDs",3,"editable","data"]],template:function(e,i){if(e&1&&(l(0,"div",0),y(1,"app-user-data-item-wrapper",1)(2,"app-user-data-item-wrapper",2)(3,"app-user-data-item-wrapper",3)(4,"app-user-data-item-wrapper",4)(5,"app-user-data-item-wrapper",5)(6,"app-user-data-item-wrapper",6)(7,"app-user-data-item-wrapper",7)(8,"app-user-data-item-wrapper",8)(9,"app-user-data-item-wrapper",9),c()),e&2){let o,m,x,T,F,k,L,R;s(),d("editable",!1)("data",(o=(o=i.user())==null?null:o.email)!==null&&o!==void 0?o:""),s(),d("editable",!0)("data",(m=(m=i.user())==null?null:m.username)!==null&&m!==void 0?m:""),s(),d("editable",!0)("data",(x=(x=i.user())==null?null:x.profilePictureURL)!==null&&x!==void 0?x:""),s(),d("editable",!0),s(),d("editable",!0)("data",(T=(T=i.user())==null||T.name==null?null:T.name.first)!==null&&T!==void 0?T:""),s(),d("editable",!0)("data",(F=(F=i.user())==null||F.name==null?null:F.name.last)!==null&&F!==void 0?F:""),s(),d("editable",!0)("data",(k=(k=i.user())==null||k.address==null?null:k.address.line1)!==null&&k!==void 0?k:""),s(),d("editable",!0)("data",(L=(L=i.user())==null||L.address==null?null:L.address.zipcode)!==null&&L!==void 0?L:""),s(),d("editable",!0)("data",(R=(R=i.user())==null||R.address==null?null:R.address.country)!==null&&R!==void 0?R:"")}},dependencies:[Be],styles:[".user-data-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}"]});let n=a;return n})()});function St(n,a){n&1&&(l(0,"div",0)(1,"ion-text",2),v(2,"No tienes anuncios activos publicados"),c()())}function Mt(n,a){if(n&1&&(l(0,"ion-item",3)(1,"ion-thumbnail",4),y(2,"img",5),c(),l(3,"div",6)(4,"ion-text",7),v(5),c(),l(6,"ion-label",8),v(7),c(),l(8,"ion-text",9),v(9),re(10,"formatCurrency"),c()()()),n&2){let r=a.$implicit;d("routerLink",ae(7,xt,r._id)),s(2),d("src",r.mainImageURL,W),s(3),U(r.title),s(2),U(r.category),s(2),U(oe(10,5,r.price))}}function It(n,a){if(n&1&&(l(0,"ion-list",1),H(1,Mt,11,9,"ion-item",3,bt),c()),n&2){let r=p();s(),G(r.posts())}}var xt,bt,Ne,Qe=V(()=>{"use strict";P();qe();Z();at();P();xt=n=>["/tabs/post-detail",n],bt=(n,a)=>a._id;Ne=(()=>{let a=class a{constructor(){this.posts=u(null)}ngOnInit(){}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=I({type:a,selectors:[["app-user-posts-list"]],inputs:{posts:[1,"posts"]},decls:2,vars:1,consts:[[1,"container-empty"],["lines","none",1,"posts-list"],[1,"text-empty"],[1,"post-item",3,"routerLink"],["slot","start",1,"post-image"],["alt","Imagen principal del anuncio",3,"src"],[1,"labels-container"],[1,"post-title"],[1,"post-category"],[1,"post-price"]],template:function(e,i){if(e&1&&b(0,St,3,0,"div",0)(1,It,3,0,"ion-list",1),e&2){let o;h(((o=i.posts())==null?null:o.length)===0?0:1)}},dependencies:[ce,Re,j,K,ge,fe,ve],styles:[".container-empty[_ngcontent-%COMP%]{margin-top:4rem;display:flex;flex-direction:column;align-items:center;justify-content:center}.container-empty[_ngcontent-%COMP%]   .text-empty[_ngcontent-%COMP%]{color:var(--ion-color-medium-tint);font-size:var(--body-large-size, 1rem);font-style:normal;font-weight:var(--body-large-weight, 400);line-height:var(--body-large-line-height, 1.5rem);letter-spacing:var(--body-large-tracking, .03125rem)}ion-list.posts-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}ion-list.posts-list[_ngcontent-%COMP%]   ion-item.post-item[_ngcontent-%COMP%]{--padding-start: 0;display:flex;flex-direction:column;align-items:flex-start;cursor:pointer}ion-list.posts-list[_ngcontent-%COMP%]   ion-item.post-item[_ngcontent-%COMP%]   ion-thumbnail.post-image[_ngcontent-%COMP%]{--border-radius: 4px}ion-list.posts-list[_ngcontent-%COMP%]   ion-item.post-item[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}ion-list.posts-list[_ngcontent-%COMP%]   ion-item.post-item[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-size:var(--body-large-size, 1rem);font-style:normal;font-weight:var(--body-large-weight, 400);line-height:var(1rem);letter-spacing:var(--body-large-tracking, .03125rem)}ion-list.posts-list[_ngcontent-%COMP%]   ion-item.post-item[_ngcontent-%COMP%]   .post-category[_ngcontent-%COMP%]{font-size:var(--label-large-size, .875rem);font-style:normal;font-weight:var(--label-large-weight-prominent, 600);line-height:var(--label-large-line-height, 1.25rem);letter-spacing:var(--label-large-tracking, .00625rem)}ion-list.posts-list[_ngcontent-%COMP%]   ion-item.post-item[_ngcontent-%COMP%]   .post-price[_ngcontent-%COMP%]{font-size:1.25rem;font-style:normal;font-weight:600;line-height:1.625rem}"]});let n=a;return n})()});function Ut(n,a){if(n&1&&y(0,"app-user-data-list",6),n&2){let r=p();d("user",r.currentUser())}}function Ot(n,a){if(n&1&&y(0,"app-user-posts-list",7),n&2){let r,t=p();d("posts",(r=t.currentUser())==null?null:r.activePosts)}}var wi,Tt=V(()=>{P();$e();He();Z();tt();Ie();We();ee();Qe();P();wi=(()=>{let a=class a{constructor(){this.authService=M(X),this.profileService=M(Q),this.selectedTab=C("profileData"),this.currentUser=O(()=>this.authService.currentUser()),this.toolbar=A(Y)}ionViewDidLeave(){var t;this.profileService.resetEditingInputStates(),(t=this.toolbar())==null||t.searchActive.set(!1)}ngOnInit(){}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=I({type:a,selectors:[["app-profile"]],viewQuery:function(e,i){e&1&&B(i.toolbar,Y,5),e&2&&z()},features:[ie([Q])],decls:13,vars:8,consts:[["type","menu",3,"title"],[3,"fullscreen"],[1,"container"],[1,"top-tabs-container"],[1,"my-data-tab",3,"click"],[1,"my-posts-tab",3,"click"],[3,"user"],[3,"posts"]],template:function(e,i){e&1&&(l(0,"ion-header"),y(1,"app-toolbar",0),c(),l(2,"ion-content",1)(3,"div",2)(4,"div",3)(5,"div",4),f("click",function(){return i.selectedTab.set("profileData")}),l(6,"ion-text"),v(7,"Mis datos"),c()(),l(8,"div",5),f("click",function(){return i.selectedTab.set("userPosts")}),l(9,"ion-text"),v(10,"Mis anuncios"),c()()(),b(11,Ut,1,1,"app-user-data-list",6)(12,Ot,1,1,"app-user-posts-list",7),c()()),e&2&&(s(),d("title","Mi perfil"),s(),d("fullscreen",!0),s(4),D("selected",i.selectedTab()==="profileData"),s(3),D("selected",i.selectedTab()==="userPosts"),s(2),h(i.selectedTab()==="profileData"?11:-1),s(),h(i.selectedTab()==="userPosts"?12:-1))},dependencies:[je,Ne,j,Y,ue,me,le,pe],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;min-height:4rem;min-width:100dvw;margin-left:-1.5rem;margin-bottom:3rem}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%] > .my-data-tab[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%] > .my-posts-tab[_ngcontent-%COMP%]{flex:1 0 0;display:flex;align-items:center;justify-content:center;color:var(--ion-color-medium);cursor:pointer}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .my-data-tab[_ngcontent-%COMP%]{border-right:1px solid var(--ion-color-dark-tint)}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .my-posts-tab[_ngcontent-%COMP%]{border-left:1px solid var(--ion-color-dark-tint)}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:var(--ion-color-light)}"]});let n=a;return n})()});Tt();export{wi as ProfilePage};
