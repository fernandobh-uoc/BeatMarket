import{a as X,b as ce}from"./chunk-SZG4CGCH.js";import"./chunk-SWFIUNRV.js";import"./chunk-D4UN2WVJ.js";import{a as Y,b as pe}from"./chunk-XZOZKGXX.js";import{b as A,c as ae}from"./chunk-26KUR5UJ.js";import{v as W,w as le}from"./chunk-GIZGGZ62.js";import{$ as N,Ba as V,P as q,Z as H,da as G,ka as J,na as M,pa as K,qa as Q,t as D,v as se}from"./chunk-XVXSUTZI.js";import{$a as k,Aa as g,B as T,F as _,Fa as L,Ga as m,Gb as F,Jb as U,Nb as $,Sa as v,Ta as x,Y as b,_ as y,aa as O,ab as I,ba as l,cb as E,ha as h,jb as u,l as c,ma as f,pb as C,sa as p,ta as S,ua as d,wa as B,wb as z,x as re,xa as w,xb as R,ya as s,za as a,zb as j}from"./chunk-LBGYGD76.js";import"./chunk-OHMQXWFK.js";import"./chunk-IZ5VZLPJ.js";import"./chunk-FTZN4423.js";import"./chunk-R4WQGMAA.js";import"./chunk-5WZLWBAD.js";import"./chunk-UAVZGLFE.js";import"./chunk-3VQMIGUA.js";import"./chunk-GWOLSY5V.js";import"./chunk-QQVLEOUP.js";import"./chunk-HJZG4HTK.js";import"./chunk-XR3M57TO.js";import"./chunk-3FE2HO5M.js";import"./chunk-ZKJSTCFA.js";import{f as P}from"./chunk-FIPIWZQS.js";var ee,te=P(()=>{"use strict";C();ae();re();pe();le();C();ee=(()=>{let t=class t{constructor(){this.conversationRepository=_(Y),this.authService=_(W),this.errorMessage=y(""),this.conversationsAsSeller=A({request:()=>{var i,n;return(n=(i=this.authService.currentUser())==null?void 0:i._id)!=null?n:null},loader:({request:i})=>{var n;if(!this.conversationRepository.getConversationsBySellerId$)return c(null);if(!i)return c(null);try{let o=this.conversationRepository.getConversationsBySellerId$(i);return o!=null?o:c(null)}catch(o){return this.errorMessage.set((n=o==null?void 0:o.message)!=null?n:"Unknown error"),c(null)}}}),this.conversationsAsBuyer=A({request:()=>{var i,n;return(n=(i=this.authService.currentUser())==null?void 0:i._id)!=null?n:null},loader:({request:i})=>{var n;if(!this.conversationRepository.getConversationsByBuyerId$)return c(null);if(!i)return c(null);try{let o=this.conversationRepository.getConversationsByBuyerId$(i);return o!=null?o:c(null)}catch(o){return this.errorMessage.set((n=o==null?void 0:o.message)!=null?n:"Unknown error"),c(null)}}}),this.conversationsListState=u(()=>{var i,n;return{conversationsAsSeller:(i=this.conversationsAsSeller.value())!=null?i:[],conversationsAsBuyer:(n=this.conversationsAsBuyer.value())!=null?n:[],loading:this.conversationsAsSeller.isLoading()||this.conversationsAsBuyer.isLoading(),errorMessage:this.errorMessage()}})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})()});function de(e,t){e&1&&(s(0,"div",0)(1,"ion-text",2),v(2,"No hay conversaciones"),a()())}function ge(e,t){if(e&1&&g(0,"img",6),e&2){let r=m().$implicit;p("src",r.participants.seller.profilePictureURL,O)}}function ue(e,t){if(e&1&&g(0,"img",6),e&2){let r=m().$implicit;p("src",r.participants.buyer.profilePictureURL,O)}}function _e(e,t){if(e&1&&(s(0,"div",3)(1,"div",4)(2,"ion-avatar",5),f(3,ge,1,1,"img",6)(4,ue,1,1,"img",6),a(),s(5,"div",7)(6,"ion-text",8),v(7),a(),s(8,"ion-text",9),v(9),a()()(),s(10,"div",10)(11,"ion-text",10),v(12),I(13,"date"),a()()()),e&2){let r=t.$implicit,i=m(2);p("routerLink",k(9,me,"/conversation/"+r._id)),l(3),d(i.type()==="asBuyer"?3:-1),l(),d(i.type()==="asSeller"?4:-1),l(3),x(i.type()==="asBuyer"?r.participants.seller.username:r.participants.buyer.username),l(2),x(r.relatedPost.title),l(3),x(E(13,6,r.updatedAt,"dd/MM/yyyy"))}}function fe(e,t){if(e&1&&(s(0,"ion-list",1),B(1,_e,14,11,"div",3,ve),a()),e&2){let r=m();l(),w(r.conversations())}}var me,ve,ne,ie=P(()=>{"use strict";C();V();j();$();C();me=e=>[e],ve=(e,t)=>t._id;ne=(()=>{let t=class t{constructor(){this.conversations=b([]),this.type=b("asBuyer")}ngOnInit(){}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=h({type:t,selectors:[["app-conversations-list"]],inputs:{conversations:[1,"conversations"],type:[1,"type"]},decls:2,vars:1,consts:[[1,"container-empty"],["lines","none",1,"conversations-list"],[1,"text-empty"],[1,"conversation-item",3,"routerLink"],[1,"conversation-data"],[1,"user-avatar"],["alt","Avatar del usuario",3,"src"],[1,"labels-container"],[1,"user-name"],[1,"post-title"],[1,"conversation-date"]],template:function(n,o){n&1&&f(0,de,3,0,"div",0)(1,fe,3,0,"ion-list",1),n&2&&d(o.conversations().length===0?0:1)},dependencies:[U,z,q,G,M],styles:[".container-empty[_ngcontent-%COMP%]{margin-top:4rem;display:flex;flex-direction:column;align-items:center;justify-content:center}.container-empty[_ngcontent-%COMP%]   .text-empty[_ngcontent-%COMP%]{color:var(--ion-color-medium-tint);font-size:var(--body-large-size, 1rem);font-style:normal;font-weight:var(--body-large-weight, 400);line-height:var(--body-large-line-height, 1.5rem);letter-spacing:var(--body-large-tracking, .03125rem)}ion-list.conversations-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}ion-list.conversations-list[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]{--padding-start: 0;display:flex;flex-direction:row;justify-content:space-between;cursor:pointer}ion-list.conversations-list[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-data[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem;width:60%}ion-list.conversations-list[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-data[_ngcontent-%COMP%]   ion-avatar.user-avatar[_ngcontent-%COMP%]{min-height:48px;min-width:48px}ion-list.conversations-list[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-data[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}ion-list.conversations-list[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-data[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:var(--label-larger-size, 1.25rem);font-style:normal;font-weight:var(--label-larger-weight, 400);line-height:var(--label-larger-line-height, 1.625rem);letter-spacing:var(--label-larger-tracking, 0)}ion-list.conversations-list[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-data[_ngcontent-%COMP%]   .labels-container[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{color:var(--ion-color-light-shade);font-size:var(--label-large-size, .875rem);font-style:normal;font-weight:var(--label-large-weight-normal, 400);line-height:var(--label-large-line-height, 1.25rem);letter-spacing:var(--label-large-tracking, .00625rem)}ion-list.conversations-list[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-date[_ngcontent-%COMP%]{text-align:right;font-size:var(--label-large-size, .875rem);font-style:normal;font-weight:var(--label-large-weight-prominent, 600);line-height:var(--label-large-line-height, 1.25rem);letter-spacing:var(--label-large-tracking, .00625rem)}"]});let e=t;return e})()});function Ce(e,t){e&1&&(s(0,"div",9),g(1,"ion-spinner",10),a())}function ye(e,t){if(e&1&&g(0,"app-conversations-list",11),e&2){let r=m(2);p("conversations",r.conversationsAsBuyer())("type","asBuyer")}}function he(e,t){if(e&1&&g(0,"app-conversations-list",11),e&2){let r=m(2);p("conversations",r.conversationsAsSeller())("type","asSeller")}}function xe(e,t){if(e&1&&f(0,ye,1,2,"app-conversations-list",11)(1,he,1,2,"app-conversations-list",11),e&2){let r=m();d(r.selectedTab()==="conversationsAsBuyer"?0:-1),l(),d(r.selectedTab()==="conversationsAsSeller"?1:-1)}}var Je,Me=P(()=>{C();j();se();V();$();te();ce();ie();C();Je=(()=>{let t=class t{constructor(){this.route=_(F),this.conversationsListService=_(ee),this.selectedTab=y("conversationsAsBuyer"),this.conversationsAsBuyer=u(()=>this.conversationsListService.conversationsListState().conversationsAsBuyer),this.conversationsAsSeller=u(()=>this.conversationsListService.conversationsListState().conversationsAsSeller),this.conversations=u(()=>({asBuyer:this.conversationsAsBuyer(),asSeller:this.conversationsAsSeller()})),this.loading=u(()=>this.conversationsListService.conversationsListState().loading),this.errorMessage=u(()=>this.conversationsListService.conversationsListState().errorMessage)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=h({type:t,selectors:[["app-conversations-list-page"]],decls:17,vars:7,consts:[[3,"translucent"],["type","menu","title","Mensajes"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"container"],[1,"top-tabs-container"],[1,"as-buyer-tab",3,"click"],[1,"as-seller-tab",3,"click"],[1,"loading-spinner-container"],["name","crescent"],[3,"conversations","type"]],template:function(n,o){n&1&&(s(0,"ion-header",0),g(1,"app-toolbar",1),a(),s(2,"ion-content",2)(3,"ion-header",3)(4,"ion-toolbar")(5,"ion-title",4),v(6,"Mensajes"),a()()(),s(7,"div",5)(8,"div",6)(9,"div",7),L("click",function(){return o.selectedTab.set("conversationsAsBuyer")}),s(10,"ion-text"),v(11,"Como comprador"),a()(),s(12,"div",8),L("click",function(){return o.selectedTab.set("conversationsAsSeller")}),s(13,"ion-text"),v(14,"Como vendedor"),a()()(),f(15,Ce,2,0,"div",9)(16,xe,2,2),a()()),n&2&&(p("translucent",!0),l(2),p("fullscreen",!0),l(8),S("selected",o.selectedTab()==="conversationsAsBuyer"),l(3),S("selected",o.selectedTab()==="conversationsAsSeller"),l(2),d(o.loading()?15:16))},dependencies:[J,X,ne,M,H,N,K,Q,R,D],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}.container[_ngcontent-%COMP%]   .loading-spinner-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;padding:1rem 0}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;min-height:4rem;min-width:100dvw;margin-left:-1.5rem;margin-bottom:3rem}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%] > .as-buyer-tab[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%] > .as-seller-tab[_ngcontent-%COMP%]{text-align:center;flex:1 0 0;display:flex;align-items:center;justify-content:center;color:var(--ion-color-medium);cursor:pointer}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .as-buyer-tab[_ngcontent-%COMP%]{border-right:1px solid var(--ion-color-dark-tint)}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .as-seller-tab[_ngcontent-%COMP%]{border-left:1px solid var(--ion-color-dark-tint)}.container[_ngcontent-%COMP%]   .top-tabs-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{color:var(--ion-color-light)}"]});let e=t;return e})()});Me();export{Je as ConversationsListPage};
