import{d as z,e as J}from"./chunk-ZCVPC63O.js";import{c as j,d as q}from"./chunk-GUENO4VH.js";import"./chunk-FBV753BW.js";import"./chunk-42PVXCFM.js";import"./chunk-6NUGH5FF.js";import"./chunk-VQCHUAXV.js";import{b as D,c as F,e as U}from"./chunk-K5TY53DO.js";import"./chunk-4XKNA7IF.js";import"./chunk-4FRKXPG4.js";import"./chunk-E4HNE3PW.js";import"./chunk-P2UHFIXP.js";import"./chunk-XV6JN3SG.js";import"./chunk-G3RFF6YC.js";import"./chunk-GTZXGHKK.js";import"./chunk-JBWWZWAU.js";import"./chunk-ITJAHDAK.js";import"./chunk-WVJ73LOB.js";import{Ca as X,S as L,_ as B,aa as E,la as I,oa as V,t as T,v as R}from"./chunk-BQ2OOKCX.js";import{$ as c,Ca as P,D as m,Da as M,Ea as f,Kb as A,L as _,M as S,Pb as N,Qa as v,Y as C,fa as O,hb as s,ib as x,jb as w,ka as h,nb as y,qa as p,sa as b,vb as k,wa as o,xa as r,xb as G,ya as g}from"./chunk-DHHGUDQP.js";import"./chunk-OHMQXWFK.js";import"./chunk-S6VCIYOJ.js";import"./chunk-25CU3KXX.js";import"./chunk-67JKSNDF.js";import"./chunk-UUSPLNXY.js";import"./chunk-DH7DTWFE.js";import"./chunk-JT567OVO.js";import"./chunk-NY55XGVK.js";import"./chunk-UHVVQU73.js";import"./chunk-IZ5VZLPJ.js";import"./chunk-FTZN4423.js";import"./chunk-R4WQGMAA.js";import"./chunk-5WZLWBAD.js";import"./chunk-UAVZGLFE.js";import"./chunk-3VQMIGUA.js";import"./chunk-GWOLSY5V.js";import"./chunk-QQVLEOUP.js";import"./chunk-HJZG4HTK.js";import"./chunk-XR3M57TO.js";import"./chunk-3FE2HO5M.js";import"./chunk-ZKJSTCFA.js";import{f as u,o as a}from"./chunk-FIPIWZQS.js";var H=u(()=>{"use strict"});var d,Q=u(()=>{"use strict";U();H();d=F("Browser",{web:()=>import("./chunk-JAATUI6W.js").then(t=>new t.BrowserWeb)})});function K(t,e){t&1&&(o(0,"div",4),g(1,"ion-spinner",5),r())}function Y(t,e){t&1&&g(0,"ion-spinner",5)}function Z(t,e){if(t&1){let l=P();o(0,"div",6)(1,"ion-text",7),v(2,"Para poder publicar anuncios y recibir pagos de los compradores, debes activar tu cuenta de Stripe."),r()(),o(3,"div",8)(4,"ion-button",9),M("click",function(){_(l);let i=f();return S(i.goToStripe())}),v(5," Activar cuenta de Stripe "),h(6,Y,1,0,"ion-spinner",5),r()()}if(t&2){let l=f();c(4),p("disabled",l.loadingOnboardingLink()),c(2),b(l.loadingOnboardingLink()?6:-1)}}var mt,$=u(()=>{y();G();R();X();N();J();q();U();Q();y();mt=(()=>{let e=class e{constructor(){this.router=m(A),this.stripeService=m(z),this.redirectTo=C(""),this.accountActive=s(()=>this.stripeService.stripeState().accountActive),this.stripeOnboardingUrl=s(()=>this.stripeService.stripeState().onboardingLink),this.loadingAccountStatus=w(()=>this.stripeService.stripeState().loading.accountStatus),this.loadingOnboardingLink=s(()=>this.stripeService.stripeState().loading.onboardingLink),this.errorMessage=s(()=>this.stripeService.stripeState().errorMessage),x(()=>console.log("loading status changed to "+this.loadingAccountStatus()))}ngOnInit(){return a(this,null,function*(){d.addListener("browserFinished",()=>a(this,null,function*(){console.log("browserFinished"),yield this.stripeService.getStripeAccountStatus(),this.accountActive()?this.router.navigate(["/tabs/sell/publish"]):(yield this.stripeService.getStripeOnboardingLink(),console.log({url:this.stripeOnboardingUrl()}))}))})}ngOnDestroy(){return a(this,null,function*(){d.removeAllListeners()})}ionViewDidEnter(){return a(this,null,function*(){if(console.log({isActive1:this.accountActive()}),this.accountActive()||(yield this.stripeService.getStripeAccountStatus(),console.log({isActive2:this.accountActive()})),this.accountActive()){this.router.navigate(["/tabs/sell/publish"]);return}console.log("getting onboarding link"),yield this.stripeService.getStripeOnboardingLink(),console.log({url:this.stripeOnboardingUrl()})})}goToStripe(){let n=this.stripeOnboardingUrl();n&&(D.isNativePlatform()?d.open({url:n}):window.open(n,"_blank"))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=O({type:e,selectors:[["app-setup"]],decls:6,vars:3,consts:[[3,"translucent"],["title","Vender"],[3,"fullscreen"],[1,"container"],[1,"loading-spinner-container"],["name","crescent"],[1,"text-container"],[1,"text"],[1,"button-container"],[1,"custom",3,"click","disabled"]],template:function(i,W){i&1&&(o(0,"ion-header",0),g(1,"app-toolbar",1),r(),o(2,"ion-content",2)(3,"div",3),h(4,K,2,0,"div",4)(5,Z,7,2),r()()),i&2&&(p("translucent",!0),c(2),p("fullscreen",!0),c(2),b(W.loadingAccountStatus()?4:5))},dependencies:[I,V,j,L,B,E,k,T],styles:['.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;position:relative}.container[_ngcontent-%COMP%]   .loading-spinner-container[_ngcontent-%COMP%]{width:100%;min-height:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{margin-top:40%;text-align:center}.container[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:var(--ion-color-light-shade);font-size:var(--body-larger-size, 1.25rem);line-height:1.25rem}.container[_ngcontent-%COMP%]   .background-logo[_ngcontent-%COMP%]{width:60dvw;height:60dvw;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-image:url("./media/stripe-logo-GQXHQBW4.png");background-repeat:no-repeat;background-size:contain;background-position:center;opacity:.2}.container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0}.container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]:has(ion-button.ios){margin-bottom:24px}.container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .stripe-logo-container[_ngcontent-%COMP%]{display:flex;width:fit-content;height:fit-content;margin-right:5%;opacity:.8;overflow:hidden}.container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .stripe-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px}']});let t=e;return t})()});$();export{mt as SetupPage};
